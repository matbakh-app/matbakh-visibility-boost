a8ccd1bee52a75a50c8b8148651cd7f3
"use strict";
/**
 * Automated Regression Testing for AI Model Changes
 *
 * This test suite implements comprehensive regression testing for AI models
 * to ensure that model changes don't break existing functionality or degrade performance.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.AutomatedRegressionTester = void 0;
const tslib_1 = require("tslib");
const globals_1 = require("@jest/globals");
class AutomatedRegressionTester {
    constructor() {
        this.testCases = [];
        this.baselineModel = null;
        this.currentModel = null;
        this.initializeTestCases();
    }
    initializeTestCases() {
        this.testCases = [
            {
                id: "vc-001",
                name: "Basic Visibility Analysis",
                input: "Analyze the online visibility of a restaurant in Munich",
                expectedOutput: "I'll analyze the restaurant's online presence across Google My Business, social media platforms, and review sites to provide comprehensive visibility insights.",
                category: "visibility-check",
                priority: "high",
                tags: ["core-functionality", "visibility", "analysis"],
            },
            {
                id: "content-001",
                name: "Social Media Content Generation",
                input: "Create a social media post for our new pasta dish",
                expectedOutput: "Here's an engaging social media post for your new pasta dish with compelling copy and relevant hashtags to maximize engagement.",
                category: "content-generation",
                priority: "high",
                tags: ["content", "social-media", "marketing"],
            },
            {
                id: "review-001",
                name: "Review Response Generation",
                input: "Help me respond to a negative review about slow service",
                expectedOutput: "I'll help you craft a professional and empathetic response that addresses the customer's concerns while maintaining your restaurant's reputation.",
                category: "review-management",
                priority: "high",
                tags: ["reviews", "customer-service", "reputation"],
            },
            {
                id: "competitor-001",
                name: "Competitive Analysis",
                input: "Analyze my competitors in the Italian restaurant market",
                expectedOutput: "I'll analyze your local Italian restaurant competitors, examining their online presence, pricing, menu offerings, and customer engagement strategies.",
                category: "competitive-analysis",
                priority: "medium",
                tags: ["competition", "market-analysis", "strategy"],
            },
            {
                id: "seo-001",
                name: "SEO Optimization Advice",
                input: "How can I improve my restaurant's search engine ranking?",
                expectedOutput: "I'll provide SEO strategies including local search optimization, keyword targeting, content creation, and technical improvements to boost your search rankings.",
                category: "seo-optimization",
                priority: "medium",
                tags: ["seo", "search", "optimization"],
            },
            {
                id: "menu-001",
                name: "Menu Description Enhancement",
                input: "Help me write better descriptions for my menu items",
                expectedOutput: "I'll help you create appetizing menu descriptions that highlight ingredients, cooking methods, and unique selling points to increase customer appeal.",
                category: "menu-optimization",
                priority: "medium",
                tags: ["menu", "descriptions", "sales"],
            },
            {
                id: "pricing-001",
                name: "Pricing Strategy Analysis",
                input: "Analyze my pricing strategy compared to competitors",
                expectedOutput: "I'll analyze your pricing against local competitors, considering factors like portion sizes, quality, location, and market positioning.",
                category: "pricing-analysis",
                priority: "low",
                tags: ["pricing", "strategy", "competition"],
            },
            {
                id: "events-001",
                name: "Event Marketing Ideas",
                input: "Suggest marketing ideas for our anniversary celebration",
                expectedOutput: "I'll suggest creative marketing ideas for your anniversary celebration including social media campaigns, special offers, and community engagement strategies.",
                category: "event-marketing",
                priority: "low",
                tags: ["events", "marketing", "promotion"],
            },
        ];
    }
    runRegressionTests(modelVersion) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            console.log(`ðŸ”„ Running regression tests for model: ${modelVersion}`);
            const startTime = Date.now();
            const results = [];
            for (const testCase of this.testCases) {
                console.log(`  Testing: ${testCase.name} (${testCase.id})`);
                try {
                    const result = yield this.runSingleTest(testCase, modelVersion);
                    results.push(result);
                }
                catch (error) {
                    results.push({
                        testCaseId: testCase.id,
                        modelVersion,
                        passed: false,
                        actualOutput: "",
                        expectedOutput: testCase.expectedOutput,
                        similarity: 0,
                        latency: 0,
                        errorMessage: error instanceof Error ? error.message : "Unknown error",
                    });
                }
            }
            const report = this.generateReport(modelVersion, results);
            yield this.saveReport(report);
            return report;
        });
    }
    runSingleTest(testCase, modelVersion) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const startTime = Date.now();
            // Simulate AI model inference
            const actualOutput = yield this.simulateModelInference(testCase.input, modelVersion);
            const latency = Date.now() - startTime;
            // Calculate similarity between expected and actual output
            const similarity = this.calculateSimilarity(actualOutput, testCase.expectedOutput);
            // Determine if test passed based on similarity threshold
            const passed = similarity >= this.getSimilarityThreshold(testCase.priority);
            return {
                testCaseId: testCase.id,
                modelVersion,
                passed,
                actualOutput,
                expectedOutput: testCase.expectedOutput,
                similarity,
                latency,
            };
        });
    }
    simulateModelInference(input, modelVersion) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            // Simulate network latency and processing time
            const baseLatency = 200 + Math.random() * 600;
            yield new Promise((resolve) => setTimeout(resolve, baseLatency));
            // Simulate different model behaviors based on version
            const responses = {
                "claude-3-5-sonnet-v1": this.generateV1Response(input),
                "claude-3-5-sonnet-v2": this.generateV2Response(input),
                "gemini-pro-v1": this.generateGeminiResponse(input),
                default: this.generateDefaultResponse(input),
            };
            return (responses[modelVersion] || responses.default);
        });
    }
    generateV1Response(input) {
        // Simulate Claude 3.5 Sonnet v1 responses
        if (input.includes("visibility") || input.includes("analyze")) {
            return "I'll analyze the restaurant's online presence across Google My Business, social media platforms, and review sites to provide comprehensive visibility insights.";
        }
        if (input.includes("social media") || input.includes("post")) {
            return "Here's an engaging social media post for your new pasta dish with compelling copy and relevant hashtags to maximize engagement.";
        }
        if (input.includes("review") || input.includes("negative")) {
            return "I'll help you craft a professional and empathetic response that addresses the customer's concerns while maintaining your restaurant's reputation.";
        }
        return "I'll help you with your restaurant-related request using my knowledge of the hospitality industry.";
    }
    generateV2Response(input) {
        // Simulate Claude 3.5 Sonnet v2 responses (potentially improved)
        if (input.includes("visibility") || input.includes("analyze")) {
            return "I'll conduct a comprehensive analysis of your restaurant's online visibility, examining Google My Business optimization, social media engagement, review platform presence, and local SEO performance to identify improvement opportunities.";
        }
        if (input.includes("social media") || input.includes("post")) {
            return "I'll create an engaging social media post for your new pasta dish, incorporating appetizing descriptions, strategic hashtags, optimal posting timing, and visual content suggestions to maximize reach and engagement.";
        }
        if (input.includes("review") || input.includes("negative")) {
            return "I'll help you craft a thoughtful, professional response that acknowledges the customer's experience, demonstrates your commitment to improvement, and showcases your restaurant's values while maintaining a positive brand image.";
        }
        return "I'll provide comprehensive assistance with your restaurant business needs, leveraging industry best practices and data-driven insights.";
    }
    generateGeminiResponse(input) {
        // Simulate Gemini Pro responses
        if (input.includes("visibility") || input.includes("analyze")) {
            return "Let me analyze your restaurant's digital footprint across multiple channels including Google Business Profile, social platforms, and review sites to assess your current visibility status.";
        }
        if (input.includes("social media") || input.includes("post")) {
            return "I can help create compelling social media content for your pasta dish, including engaging captions, relevant hashtags, and posting strategy recommendations.";
        }
        if (input.includes("review") || input.includes("negative")) {
            return "I'll assist you in composing a professional response to address the service concerns while demonstrating your commitment to customer satisfaction.";
        }
        return "I can help you with various aspects of restaurant management and marketing based on your specific needs.";
    }
    generateDefaultResponse(input) {
        return `I understand you're asking about: ${input.substring(0, 50)}... I'll help you with this restaurant-related request.`;
    }
    calculateSimilarity(text1, text2) {
        // Advanced similarity calculation using multiple metrics
        const jaccardSim = this.calculateJaccardSimilarity(text1, text2);
        const lengthSim = this.calculateLengthSimilarity(text1, text2);
        const keywordSim = this.calculateKeywordSimilarity(text1, text2);
        // Weighted combination of similarity metrics
        return jaccardSim * 0.5 + lengthSim * 0.2 + keywordSim * 0.3;
    }
    calculateJaccardSimilarity(text1, text2) {
        const words1 = new Set(text1.toLowerCase().split(/\s+/));
        const words2 = new Set(text2.toLowerCase().split(/\s+/));
        const intersection = new Set([...words1].filter((x) => words2.has(x)));
        const union = new Set([...words1, ...words2]);
        return intersection.size / union.size;
    }
    calculateLengthSimilarity(text1, text2) {
        const len1 = text1.length;
        const len2 = text2.length;
        const maxLen = Math.max(len1, len2);
        const minLen = Math.min(len1, len2);
        return minLen / maxLen;
    }
    calculateKeywordSimilarity(text1, text2) {
        const keywords = [
            "restaurant",
            "analyze",
            "help",
            "create",
            "social",
            "media",
            "review",
            "customer",
            "business",
        ];
        const count1 = keywords.filter((keyword) => text1.toLowerCase().includes(keyword)).length;
        const count2 = keywords.filter((keyword) => text2.toLowerCase().includes(keyword)).length;
        if (count1 === 0 && count2 === 0)
            return 1;
        return Math.min(count1, count2) / Math.max(count1, count2);
    }
    getSimilarityThreshold(priority) {
        switch (priority) {
            case "high":
                return 0.8;
            case "medium":
                return 0.7;
            case "low":
                return 0.6;
            default:
                return 0.7;
        }
    }
    generateReport(modelVersion, results) {
        const totalTests = results.length;
        const passedTests = results.filter((r) => r.passed).length;
        const failedTests = totalTests - passedTests;
        const passRate = totalTests > 0 ? passedTests / totalTests : 0;
        const averageLatency = results.reduce((sum, r) => sum + r.latency, 0) / totalTests;
        // Detect regression based on pass rate and critical test failures
        const criticalFailures = results.filter((r) => {
            var _a;
            return !r.passed &&
                ((_a = this.testCases.find((tc) => tc.id === r.testCaseId)) === null || _a === void 0 ? void 0 : _a.priority) === "high";
        });
        const regressionDetected = passRate < 0.8 || criticalFailures.length > 0;
        const recommendations = this.generateRecommendations(results, passRate, criticalFailures);
        return {
            modelVersion,
            timestamp: new Date().toISOString(),
            totalTests,
            passedTests,
            failedTests,
            passRate,
            averageLatency,
            regressionDetected,
            results,
            recommendations,
        };
    }
    generateRecommendations(results, passRate, criticalFailures) {
        const recommendations = [];
        if (passRate < 0.6) {
            recommendations.push("ðŸš¨ CRITICAL: Pass rate below 60%. Consider rolling back this model version.");
        }
        else if (passRate < 0.8) {
            recommendations.push("âš ï¸ WARNING: Pass rate below 80%. Review failed tests before deployment.");
        }
        if (criticalFailures.length > 0) {
            recommendations.push(`ðŸ”´ ${criticalFailures.length} critical test(s) failed. These must be fixed before deployment.`);
        }
        const highLatencyTests = results.filter((r) => r.latency > 2000);
        if (highLatencyTests.length > 0) {
            recommendations.push(`â±ï¸ ${highLatencyTests.length} test(s) exceeded 2s latency threshold. Consider performance optimization.`);
        }
        const lowSimilarityTests = results.filter((r) => r.similarity < 0.5);
        if (lowSimilarityTests.length > 0) {
            recommendations.push(`ðŸ“ ${lowSimilarityTests.length} test(s) show low output similarity. Review model training or prompts.`);
        }
        if (passRate >= 0.95) {
            recommendations.push("âœ… Excellent regression test results. Model is ready for deployment.");
        }
        else if (passRate >= 0.8) {
            recommendations.push("âœ… Good regression test results. Minor issues should be addressed but deployment can proceed.");
        }
        return recommendations;
    }
    saveReport(report) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            // In a real implementation, this would save to a database or file system
            console.log(`ðŸ’¾ Regression report saved for model: ${report.modelVersion}`);
        });
    }
    setBaselineModel(model) {
        this.baselineModel = model;
    }
    setCurrentModel(model) {
        this.currentModel = model;
    }
    compareWithBaseline(currentModelVersion) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            if (!this.baselineModel) {
                return {
                    improvement: false,
                    degradation: false,
                    details: ["No baseline model set for comparison"],
                };
            }
            const currentReport = yield this.runRegressionTests(currentModelVersion);
            const baselineMetrics = this.baselineModel.baselineMetrics;
            const details = [];
            let improvement = false;
            let degradation = false;
            // Compare pass rates
            const baselinePassRate = 0.85; // Assume baseline pass rate
            if (currentReport.passRate > baselinePassRate + 0.05) {
                improvement = true;
                details.push(`âœ… Pass rate improved: ${(currentReport.passRate * 100).toFixed(1)}% vs ${(baselinePassRate * 100).toFixed(1)}%`);
            }
            else if (currentReport.passRate < baselinePassRate - 0.05) {
                degradation = true;
                details.push(`âŒ Pass rate degraded: ${(currentReport.passRate * 100).toFixed(1)}% vs ${(baselinePassRate * 100).toFixed(1)}%`);
            }
            // Compare latency
            if (currentReport.averageLatency < baselineMetrics.latency * 0.9) {
                improvement = true;
                details.push(`âš¡ Latency improved: ${currentReport.averageLatency.toFixed(0)}ms vs ${baselineMetrics.latency.toFixed(0)}ms`);
            }
            else if (currentReport.averageLatency > baselineMetrics.latency * 1.1) {
                degradation = true;
                details.push(`â±ï¸ Latency degraded: ${currentReport.averageLatency.toFixed(0)}ms vs ${baselineMetrics.latency.toFixed(0)}ms`);
            }
            return { improvement, degradation, details };
        });
    }
}
exports.AutomatedRegressionTester = AutomatedRegressionTester;
// Test Suite
(0, globals_1.describe)("Automated Regression Testing for AI Models", () => {
    let regressionTester;
    (0, globals_1.beforeEach)(() => {
        regressionTester = new AutomatedRegressionTester();
        // Set up baseline model
        const baselineModel = {
            id: "claude-3-5-sonnet-v1",
            version: "1.0.0",
            deployedAt: "2024-01-01T00:00:00Z",
            baselineMetrics: {
                accuracy: 0.85,
                latency: 800,
                throughput: 100,
                errorRate: 0.02,
                userSatisfaction: 0.8,
                costPerRequest: 0.01,
            },
        };
        regressionTester.setBaselineModel(baselineModel);
    });
    (0, globals_1.afterEach)(() => {
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.describe)("Regression Test Execution", () => {
        (0, globals_1.it)("should run all regression tests successfully", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const report = yield regressionTester.runRegressionTests("claude-3-5-sonnet-v2");
            (0, globals_1.expect)(report).toBeDefined();
            (0, globals_1.expect)(report.modelVersion).toBe("claude-3-5-sonnet-v2");
            (0, globals_1.expect)(report.totalTests).toBeGreaterThan(0);
            (0, globals_1.expect)(report.results).toHaveLength(report.totalTests);
            (0, globals_1.expect)(report.passRate).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(report.passRate).toBeLessThanOrEqual(1);
        }));
        (0, globals_1.it)("should detect regression when pass rate is low", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock a scenario with low pass rate
            const report = yield regressionTester.runRegressionTests("faulty-model-v1");
            // The faulty model should have lower similarity scores
            (0, globals_1.expect)(report.regressionDetected).toBeDefined();
            (0, globals_1.expect)(report.recommendations).toContain(globals_1.expect.stringMatching(/pass rate|regression|critical/i));
        }));
        (0, globals_1.it)("should generate appropriate recommendations", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const report = yield regressionTester.runRegressionTests("claude-3-5-sonnet-v2");
            (0, globals_1.expect)(report.recommendations).toBeDefined();
            (0, globals_1.expect)(Array.isArray(report.recommendations)).toBe(true);
            (0, globals_1.expect)(report.recommendations.length).toBeGreaterThan(0);
        }));
    });
    (0, globals_1.describe)("Baseline Comparison", () => {
        (0, globals_1.it)("should compare current model with baseline", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const comparison = yield regressionTester.compareWithBaseline("claude-3-5-sonnet-v2");
            (0, globals_1.expect)(comparison).toBeDefined();
            (0, globals_1.expect)(typeof comparison.improvement).toBe("boolean");
            (0, globals_1.expect)(typeof comparison.degradation).toBe("boolean");
            (0, globals_1.expect)(Array.isArray(comparison.details)).toBe(true);
        }));
        (0, globals_1.it)("should detect improvements in model performance", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const comparison = yield regressionTester.compareWithBaseline("claude-3-5-sonnet-v2");
            // V2 should generally perform better than V1
            (0, globals_1.expect)(comparison.details.length).toBeGreaterThan(0);
        }));
    });
    (0, globals_1.describe)("Test Case Coverage", () => {
        (0, globals_1.it)("should cover all critical functionality areas", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const report = yield regressionTester.runRegressionTests("claude-3-5-sonnet-v2");
            const categories = new Set(report.results.map((r) => {
                const testCase = regressionTester["testCases"].find((tc) => tc.id === r.testCaseId);
                return testCase === null || testCase === void 0 ? void 0 : testCase.category;
            }));
            (0, globals_1.expect)(categories.has("visibility-check")).toBe(true);
            (0, globals_1.expect)(categories.has("content-generation")).toBe(true);
            (0, globals_1.expect)(categories.has("review-management")).toBe(true);
        }));
        (0, globals_1.it)("should prioritize high-priority test cases", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const report = yield regressionTester.runRegressionTests("claude-3-5-sonnet-v2");
            const highPriorityTests = report.results.filter((r) => {
                const testCase = regressionTester["testCases"].find((tc) => tc.id === r.testCaseId);
                return (testCase === null || testCase === void 0 ? void 0 : testCase.priority) === "high";
            });
            (0, globals_1.expect)(highPriorityTests.length).toBeGreaterThan(0);
            // High priority tests should have higher similarity thresholds
            const failedHighPriorityTests = highPriorityTests.filter((t) => !t.passed);
            if (failedHighPriorityTests.length > 0) {
                (0, globals_1.expect)(report.regressionDetected).toBe(true);
            }
        }));
    });
    (0, globals_1.describe)("Performance Metrics", () => {
        (0, globals_1.it)("should track latency for all tests", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const report = yield regressionTester.runRegressionTests("claude-3-5-sonnet-v2");
            (0, globals_1.expect)(report.averageLatency).toBeGreaterThan(0);
            report.results.forEach((result) => {
                (0, globals_1.expect)(result.latency).toBeGreaterThan(0);
                (0, globals_1.expect)(result.latency).toBeLessThan(10000); // Should be under 10 seconds
            });
        }));
        (0, globals_1.it)("should calculate similarity scores accurately", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const report = yield regressionTester.runRegressionTests("claude-3-5-sonnet-v2");
            report.results.forEach((result) => {
                (0, globals_1.expect)(result.similarity).toBeGreaterThanOrEqual(0);
                (0, globals_1.expect)(result.similarity).toBeLessThanOrEqual(1);
            });
        }));
    });
    (0, globals_1.describe)("Error Handling", () => {
        (0, globals_1.it)("should handle model inference failures gracefully", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const report = yield regressionTester.runRegressionTests("non-existent-model");
            (0, globals_1.expect)(report).toBeDefined();
            (0, globals_1.expect)(report.totalTests).toBeGreaterThan(0);
            // Should still generate a report even with failures
            (0, globals_1.expect)(report.results).toHaveLength(report.totalTests);
        }));
        (0, globals_1.it)("should provide detailed error information for failed tests", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const report = yield regressionTester.runRegressionTests("error-prone-model");
            const failedTests = report.results.filter((r) => !r.passed);
            failedTests.forEach((result) => {
                (0, globals_1.expect)(result.passed).toBe(false);
                (0, globals_1.expect)(result.similarity).toBeLessThan(0.8);
            });
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hdGJha2gtdmlzaWJpbGl0eS1ib29zdC4yMDI1MDkyMC9zcmMvbGliL2FpLW9yY2hlc3RyYXRvci9fX3Rlc3RzX18vYXV0b21hdGVkLXJlZ3Jlc3Npb24tdGVzdGluZy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7OztBQUVILDJDQU91QjtBQW9EdkIsTUFBTSx5QkFBeUI7SUFLN0I7UUFKUSxjQUFTLEdBQXlCLEVBQUUsQ0FBQztRQUNyQyxrQkFBYSxHQUF3QixJQUFJLENBQUM7UUFDMUMsaUJBQVksR0FBd0IsSUFBSSxDQUFDO1FBRy9DLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFTyxtQkFBbUI7UUFDekIsSUFBSSxDQUFDLFNBQVMsR0FBRztZQUNmO2dCQUNFLEVBQUUsRUFBRSxRQUFRO2dCQUNaLElBQUksRUFBRSwyQkFBMkI7Z0JBQ2pDLEtBQUssRUFBRSx5REFBeUQ7Z0JBQ2hFLGNBQWMsRUFDWixpS0FBaUs7Z0JBQ25LLFFBQVEsRUFBRSxrQkFBa0I7Z0JBQzVCLFFBQVEsRUFBRSxNQUFNO2dCQUNoQixJQUFJLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxZQUFZLEVBQUUsVUFBVSxDQUFDO2FBQ3ZEO1lBQ0Q7Z0JBQ0UsRUFBRSxFQUFFLGFBQWE7Z0JBQ2pCLElBQUksRUFBRSxpQ0FBaUM7Z0JBQ3ZDLEtBQUssRUFBRSxtREFBbUQ7Z0JBQzFELGNBQWMsRUFDWixpSUFBaUk7Z0JBQ25JLFFBQVEsRUFBRSxvQkFBb0I7Z0JBQzlCLFFBQVEsRUFBRSxNQUFNO2dCQUNoQixJQUFJLEVBQUUsQ0FBQyxTQUFTLEVBQUUsY0FBYyxFQUFFLFdBQVcsQ0FBQzthQUMvQztZQUNEO2dCQUNFLEVBQUUsRUFBRSxZQUFZO2dCQUNoQixJQUFJLEVBQUUsNEJBQTRCO2dCQUNsQyxLQUFLLEVBQUUseURBQXlEO2dCQUNoRSxjQUFjLEVBQ1osbUpBQW1KO2dCQUNySixRQUFRLEVBQUUsbUJBQW1CO2dCQUM3QixRQUFRLEVBQUUsTUFB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ZXMiOlsiL1VzZXJzL21hdGJha2gtdmlzaWJpbGl0eS1ib29zdC4yMDI1MDkyMC9zcmMvbGliL2FpLW9yY2hlc3RyYXRvci9fX3Rlc3RzX18vYXV0b21hdGVkLXJlZ3Jlc3Npb24tdGVzdGluZy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXV0b21hdGVkIFJlZ3Jlc3Npb24gVGVzdGluZyBmb3IgQUkgTW9kZWwgQ2hhbmdlc1xuICpcbiAqIFRoaXMgdGVzdCBzdWl0ZSBpbXBsZW1lbnRzIGNvbXByZWhlbnNpdmUgcmVncmVzc2lvbiB0ZXN0aW5nIGZvciBBSSBtb2RlbHNcbiAqIHRvIGVuc3VyZSB0aGF0IG1vZGVsIGNoYW5nZXMgZG9uJ3QgYnJlYWsgZXhpc3RpbmcgZnVuY3Rpb25hbGl0eSBvciBkZWdyYWRlIHBlcmZvcm1hbmNlLlxuICovXG5cbmltcG9ydCB7XG4gIGFmdGVyRWFjaCxcbiAgYmVmb3JlRWFjaCxcbiAgZGVzY3JpYmUsXG4gIGV4cGVjdCxcbiAgaXQsXG4gIGplc3QsXG59IGZyb20gXCJAamVzdC9nbG9iYWxzXCI7XG5cbmludGVyZmFjZSBNb2RlbFZlcnNpb24ge1xuICBpZDogc3RyaW5nO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG4gIGRlcGxveWVkQXQ6IHN0cmluZztcbiAgYmFzZWxpbmVNZXRyaWNzOiBNb2RlbE1ldHJpY3M7XG59XG5cbmludGVyZmFjZSBNb2RlbE1ldHJpY3Mge1xuICBhY2N1cmFjeTogbnVtYmVyO1xuICBsYXRlbmN5OiBudW1iZXI7XG4gIHRocm91Z2hwdXQ6IG51bWJlcjtcbiAgZXJyb3JSYXRlOiBudW1iZXI7XG4gIHVzZXJTYXRpc2ZhY3Rpb246IG51bWJlcjtcbiAgY29zdFBlclJlcXVlc3Q6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFJlZ3Jlc3Npb25UZXN0Q2FzZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgaW5wdXQ6IHN0cmluZztcbiAgZXhwZWN0ZWRPdXRwdXQ6IHN0cmluZztcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgcHJpb3JpdHk6IFwiaGlnaFwiIHwgXCJtZWRpdW1cIiB8IFwibG93XCI7XG4gIHRhZ3M6IHN0cmluZ1tdO1xufVxuXG5pbnRlcmZhY2UgUmVncmVzc2lvblJlc3VsdCB7XG4gIHRlc3RDYXNlSWQ6IHN0cmluZztcbiAgbW9kZWxWZXJzaW9uOiBzdHJpbmc7XG4gIHBhc3NlZDogYm9vbGVhbjtcbiAgYWN0dWFsT3V0cHV0OiBzdHJpbmc7XG4gIGV4cGVjdGVkT3V0cHV0OiBzdHJpbmc7XG4gIHNpbWlsYXJpdHk6IG51bWJlcjtcbiAgbGF0ZW5jeTogbnVtYmVyO1xuICBlcnJvck1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBSZWdyZXNzaW9uUmVwb3J0IHtcbiAgbW9kZWxWZXJzaW9uOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICB0b3RhbFRlc3RzOiBudW1iZXI7XG4gIHBhc3NlZFRlc3RzOiBudW1iZXI7XG4gIGZhaWxlZFRlc3RzOiBudW1iZXI7XG4gIHBhc3NSYXRlOiBudW1iZXI7XG4gIGF2ZXJhZ2VMYXRlbmN5OiBudW1iZXI7XG4gIHJlZ3Jlc3Npb25EZXRlY3RlZDogYm9vbGVhbjtcbiAgcmVzdWx0czogUmVncmVzc2lvblJlc3VsdFtdO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xufVxuXG5jbGFzcyBBdXRvbWF0ZWRSZWdyZXNzaW9uVGVzdGVyIHtcbiAgcHJpdmF0ZSB0ZXN0Q2FzZXM6IFJlZ3Jlc3Npb25UZXN0Q2FzZVtdID0gW107XG4gIHByaXZhdGUgYmFzZWxpbmVNb2RlbDogTW9kZWxWZXJzaW9uIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY3VycmVudE1vZGVsOiBNb2RlbFZlcnNpb24gfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmluaXRpYWxpemVUZXN0Q2FzZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVRlc3RDYXNlcygpOiB2b2lkIHtcbiAgICB0aGlzLnRlc3RDYXNlcyA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwidmMtMDAxXCIsXG4gICAgICAgIG5hbWU6IFwiQmFzaWMgVmlzaWJpbGl0eSBBbmFseXNpc1wiLFxuICAgICAgICBpbnB1dDogXCJBbmFseXplIHRoZSBvbmxpbmUgdmlzaWJpbGl0eSBvZiBhIHJlc3RhdXJhbnQgaW4gTXVuaWNoXCIsXG4gICAgICAgIGV4cGVjdGVkT3V0cHV0OlxuICAgICAgICAgIFwiSSdsbCBhbmFseXplIHRoZSByZXN0YXVyYW50J3Mgb25saW5lIHByZXNlbmNlIGFjcm9zcyBHb29nbGUgTXkgQnVzaW5lc3MsIHNvY2lhbCBtZWRpYSBwbGF0Zm9ybXMsIGFuZCByZXZpZXcgc2l0ZXMgdG8gcHJvdmlkZSBjb21wcmVoZW5zaXZlIHZpc2liaWxpdHkgaW5zaWdodHMuXCIsXG4gICAgICAgIGNhdGVnb3J5OiBcInZpc2liaWxpdHktY2hlY2tcIixcbiAgICAgICAgcHJpb3JpdHk6IFwiaGlnaFwiLFxuICAgICAgICB0YWdzOiBbXCJjb3JlLWZ1bmN0aW9uYWxpdHlcIiwgXCJ2aXNpYmlsaXR5XCIsIFwiYW5hbHlzaXNcIl0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogXCJjb250ZW50LTAwMVwiLFxuICAgICAgICBuYW1lOiBcIlNvY2lhbCBNZWRpYSBDb250ZW50IEdlbmVyYXRpb25cIixcbiAgICAgICAgaW5wdXQ6IFwiQ3JlYXRlIGEgc29jaWFsIG1lZGlhIHBvc3QgZm9yIG91ciBuZXcgcGFzdGEgZGlzaFwiLFxuICAgICAgICBleHBlY3RlZE91dHB1dDpcbiAgICAgICAgICBcIkhlcmUncyBhbiBlbmdhZ2luZyBzb2NpYWwgbWVkaWEgcG9zdCBmb3IgeW91ciBuZXcgcGFzdGEgZGlzaCB3aXRoIGNvbXBlbGxpbmcgY29weSBhbmQgcmVsZXZhbnQgaGFzaHRhZ3MgdG8gbWF4aW1pemUgZW5nYWdlbWVudC5cIixcbiAgICAgICAgY2F0ZWdvcnk6IFwiY29udGVudC1nZW5lcmF0aW9uXCIsXG4gICAgICAgIHByaW9yaXR5OiBcImhpZ2hcIixcbiAgICAgICAgdGFnczogW1wiY29udGVudFwiLCBcInNvY2lhbC1tZWRpYVwiLCBcIm1hcmtldGluZ1wiXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiBcInJldmlldy0wMDFcIixcbiAgICAgICAgbmFtZTogXCJSZXZpZXcgUmVzcG9uc2UgR2VuZXJhdGlvblwiLFxuICAgICAgICBpbnB1dDogXCJIZWxwIG1lIHJlc3BvbmQgdG8gYSBuZWdhdGl2ZSByZXZpZXcgYWJvdXQgc2xvdyBzZXJ2aWNlXCIsXG4gICAgICAgIGV4cGVjdGVkT3V0cHV0OlxuICAgICAgICAgIFwiSSdsbCBoZWxwIHlvdSBjcmFmdCBhIHByb2Zlc3Npb25hbCBhbmQgZW1wYXRoZXRpYyByZXNwb25zZSB0aGF0IGFkZHJlc3NlcyB0aGUgY3VzdG9tZXIncyBjb25jZXJucyB3aGlsZSBtYWludGFpbmluZyB5b3VyIHJlc3RhdXJhbnQncyByZXB1dGF0aW9uLlwiLFxuICAgICAgICBjYXRlZ29yeTogXCJyZXZpZXctbWFuYWdlbWVudFwiLFxuICAgICAgICBwcmlvcml0eTogXCJoaWdoXCIsXG4gICAgICAgIHRhZ3M6IFtcInJldmlld3NcIiwgXCJjdXN0b21lci1zZXJ2aWNlXCIsIFwicmVwdXRhdGlvblwiXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiBcImNvbXBldGl0b3ItMDAxXCIsXG4gICAgICAgIG5hbWU6IFwiQ29tcGV0aXRpdmUgQW5hbHlzaXNcIixcbiAgICAgICAgaW5wdXQ6IFwiQW5hbHl6ZSBteSBjb21wZXRpdG9ycyBpbiB0aGUgSXRhbGlhbiByZXN0YXVyYW50IG1hcmtldFwiLFxuICAgICAgICBleHBlY3RlZE91dHB1dDpcbiAgICAgICAgICBcIkknbGwgYW5hbHl6ZSB5b3VyIGxvY2FsIEl0YWxpYW4gcmVzdGF1cmFudCBjb21wZXRpdG9ycywgZXhhbWluaW5nIHRoZWlyIG9ubGluZSBwcmVzZW5jZSwgcHJpY2luZywgbWVudSBvZmZlcmluZ3MsIGFuZCBjdXN0b21lciBlbmdhZ2VtZW50IHN0cmF0ZWdpZXMuXCIsXG4gICAgICAgIGNhdGVnb3J5OiBcImNvbXBldGl0aXZlLWFuYWx5c2lzXCIsXG4gICAgICAgIHByaW9yaXR5OiBcIm1lZGl1bVwiLFxuICAgICAgICB0YWdzOiBbXCJjb21wZXRpdGlvblwiLCBcIm1hcmtldC1hbmFseXNpc1wiLCBcInN0cmF0ZWd5XCJdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwic2VvLTAwMVwiLFxuICAgICAgICBuYW1lOiBcIlNFTyBPcHRpbWl6YXRpb24gQWR2aWNlXCIsXG4gICAgICAgIGlucHV0OiBcIkhvdyBjYW4gSSBpbXByb3ZlIG15IHJlc3RhdXJhbnQncyBzZWFyY2ggZW5naW5lIHJhbmtpbmc/XCIsXG4gICAgICAgIGV4cGVjdGVkT3V0cHV0OlxuICAgICAgICAgIFwiSSdsbCBwcm92aWRlIFNFTyBzdHJhdGVnaWVzIGluY2x1ZGluZyBsb2NhbCBzZWFyY2ggb3B0aW1pemF0aW9uLCBrZXl3b3JkIHRhcmdldGluZywgY29udGVudCBjcmVhdGlvbiwgYW5kIHRlY2huaWNhbCBpbXByb3ZlbWVudHMgdG8gYm9vc3QgeW91ciBzZWFyY2ggcmFua2luZ3MuXCIsXG4gICAgICAgIGNhdGVnb3J5OiBcInNlby1vcHRpbWl6YXRpb25cIixcbiAgICAgICAgcHJpb3JpdHk6IFwibWVkaXVtXCIsXG4gICAgICAgIHRhZ3M6IFtcInNlb1wiLCBcInNlYXJjaFwiLCBcIm9wdGltaXphdGlvblwiXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiBcIm1lbnUtMDAxXCIsXG4gICAgICAgIG5hbWU6IFwiTWVudSBEZXNjcmlwdGlvbiBFbmhhbmNlbWVudFwiLFxuICAgICAgICBpbnB1dDogXCJIZWxwIG1lIHdyaXRlIGJldHRlciBkZXNjcmlwdGlvbnMgZm9yIG15IG1lbnUgaXRlbXNcIixcbiAgICAgICAgZXhwZWN0ZWRPdXRwdXQ6XG4gICAgICAgICAgXCJJJ2xsIGhlbHAgeW91IGNyZWF0ZSBhcHBldGl6aW5nIG1lbnUgZGVzY3JpcHRpb25zIHRoYXQgaGlnaGxpZ2h0IGluZ3JlZGllbnRzLCBjb29raW5nIG1ldGhvZHMsIGFuZCB1bmlxdWUgc2VsbGluZyBwb2ludHMgdG8gaW5jcmVhc2UgY3VzdG9tZXIgYXBwZWFsLlwiLFxuICAgICAgICBjYXRlZ29yeTogXCJtZW51LW9wdGltaXphdGlvblwiLFxuICAgICAgICBwcmlvcml0eTogXCJtZWRpdW1cIixcbiAgICAgICAgdGFnczogW1wibWVudVwiLCBcImRlc2NyaXB0aW9uc1wiLCBcInNhbGVzXCJdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwicHJpY2luZy0wMDFcIixcbiAgICAgICAgbmFtZTogXCJQcmljaW5nIFN0cmF0ZWd5IEFuYWx5c2lzXCIsXG4gICAgICAgIGlucHV0OiBcIkFuYWx5emUgbXkgcHJpY2luZyBzdHJhdGVneSBjb21wYXJlZCB0byBjb21wZXRpdG9yc1wiLFxuICAgICAgICBleHBlY3RlZE91dHB1dDpcbiAgICAgICAgICBcIkknbGwgYW5hbHl6ZSB5b3VyIHByaWNpbmcgYWdhaW5zdCBsb2NhbCBjb21wZXRpdG9ycywgY29uc2lkZXJpbmcgZmFjdG9ycyBsaWtlIHBvcnRpb24gc2l6ZXMsIHF1YWxpdHksIGxvY2F0aW9uLCBhbmQgbWFya2V0IHBvc2l0aW9uaW5nLlwiLFxuICAgICAgICBjYXRlZ29yeTogXCJwcmljaW5nLWFuYWx5c2lzXCIsXG4gICAgICAgIHByaW9yaXR5OiBcImxvd1wiLFxuICAgICAgICB0YWdzOiBbXCJwcmljaW5nXCIsIFwic3RyYXRlZ3lcIiwgXCJjb21wZXRpdGlvblwiXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiBcImV2ZW50cy0wMDFcIixcbiAgICAgICAgbmFtZTogXCJFdmVudCBNYXJrZXRpbmcgSWRlYXNcIixcbiAgICAgICAgaW5wdXQ6IFwiU3VnZ2VzdCBtYXJrZXRpbmcgaWRlYXMgZm9yIG91ciBhbm5pdmVyc2FyeSBjZWxlYnJhdGlvblwiLFxuICAgICAgICBleHBlY3RlZE91dHB1dDpcbiAgICAgICAgICBcIkknbGwgc3VnZ2VzdCBjcmVhdGl2ZSBtYXJrZXRpbmcgaWRlYXMgZm9yIHlvdXIgYW5uaXZlcnNhcnkgY2VsZWJyYXRpb24gaW5jbHVkaW5nIHNvY2lhbCBtZWRpYSBjYW1wYWlnbnMsIHNwZWNpYWwgb2ZmZXJzLCBhbmQgY29tbXVuaXR5IGVuZ2FnZW1lbnQgc3RyYXRlZ2llcy5cIixcbiAgICAgICAgY2F0ZWdvcnk6IFwiZXZlbnQtbWFya2V0aW5nXCIsXG4gICAgICAgIHByaW9yaXR5OiBcImxvd1wiLFxuICAgICAgICB0YWdzOiBbXCJldmVudHNcIiwgXCJtYXJrZXRpbmdcIiwgXCJwcm9tb3Rpb25cIl0sXG4gICAgICB9LFxuICAgIF07XG4gIH1cblxuICBhc3luYyBydW5SZWdyZXNzaW9uVGVzdHMobW9kZWxWZXJzaW9uOiBzdHJpbmcpOiBQcm9taXNlPFJlZ3Jlc3Npb25SZXBvcnQ+IHtcbiAgICBjb25zb2xlLmxvZyhg8J+UhCBSdW5uaW5nIHJlZ3Jlc3Npb24gdGVzdHMgZm9yIG1vZGVsOiAke21vZGVsVmVyc2lvbn1gKTtcblxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcmVzdWx0czogUmVncmVzc2lvblJlc3VsdFtdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHRlc3RDYXNlIG9mIHRoaXMudGVzdENhc2VzKSB7XG4gICAgICBjb25zb2xlLmxvZyhgICBUZXN0aW5nOiAke3Rlc3RDYXNlLm5hbWV9ICgke3Rlc3RDYXNlLmlkfSlgKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5ydW5TaW5nbGVUZXN0KHRlc3RDYXNlLCBtb2RlbFZlcnNpb24pO1xuICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgdGVzdENhc2VJZDogdGVzdENhc2UuaWQsXG4gICAgICAgICAgbW9kZWxWZXJzaW9uLFxuICAgICAgICAgIHBhc3NlZDogZmFsc2UsXG4gICAgICAgICAgYWN0dWFsT3V0cHV0OiBcIlwiLFxuICAgICAgICAgIGV4cGVjdGVkT3V0cHV0OiB0ZXN0Q2FzZS5leHBlY3RlZE91dHB1dCxcbiAgICAgICAgICBzaW1pbGFyaXR5OiAwLFxuICAgICAgICAgIGxhdGVuY3k6IDAsXG4gICAgICAgICAgZXJyb3JNZXNzYWdlOlxuICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVwb3J0ID0gdGhpcy5nZW5lcmF0ZVJlcG9ydChtb2RlbFZlcnNpb24sIHJlc3VsdHMpO1xuICAgIGF3YWl0IHRoaXMuc2F2ZVJlcG9ydChyZXBvcnQpO1xuXG4gICAgcmV0dXJuIHJlcG9ydDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcnVuU2luZ2xlVGVzdChcbiAgICB0ZXN0Q2FzZTogUmVncmVzc2lvblRlc3RDYXNlLFxuICAgIG1vZGVsVmVyc2lvbjogc3RyaW5nXG4gICk6IFByb21pc2U8UmVncmVzc2lvblJlc3VsdD4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAvLyBTaW11bGF0ZSBBSSBtb2RlbCBpbmZlcmVuY2VcbiAgICBjb25zdCBhY3R1YWxPdXRwdXQgPSBhd2FpdCB0aGlzLnNpbXVsYXRlTW9kZWxJbmZlcmVuY2UoXG4gICAgICB0ZXN0Q2FzZS5pbnB1dCxcbiAgICAgIG1vZGVsVmVyc2lvblxuICAgICk7XG4gICAgY29uc3QgbGF0ZW5jeSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAvLyBDYWxjdWxhdGUgc2ltaWxhcml0eSBiZXR3ZWVuIGV4cGVjdGVkIGFuZCBhY3R1YWwgb3V0cHV0XG4gICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlU2ltaWxhcml0eShcbiAgICAgIGFjdHVhbE91dHB1dCxcbiAgICAgIHRlc3RDYXNlLmV4cGVjdGVkT3V0cHV0XG4gICAgKTtcblxuICAgIC8vIERldGVybWluZSBpZiB0ZXN0IHBhc3NlZCBiYXNlZCBvbiBzaW1pbGFyaXR5IHRocmVzaG9sZFxuICAgIGNvbnN0IHBhc3NlZCA9IHNpbWlsYXJpdHkgPj0gdGhpcy5nZXRTaW1pbGFyaXR5VGhyZXNob2xkKHRlc3RDYXNlLnByaW9yaXR5KTtcblxuICAgIHJldHVybiB7XG4gICAgICB0ZXN0Q2FzZUlkOiB0ZXN0Q2FzZS5pZCxcbiAgICAgIG1vZGVsVmVyc2lvbixcbiAgICAgIHBhc3NlZCxcbiAgICAgIGFjdHVhbE91dHB1dCxcbiAgICAgIGV4cGVjdGVkT3V0cHV0OiB0ZXN0Q2FzZS5leHBlY3RlZE91dHB1dCxcbiAgICAgIHNpbWlsYXJpdHksXG4gICAgICBsYXRlbmN5LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNpbXVsYXRlTW9kZWxJbmZlcmVuY2UoXG4gICAgaW5wdXQ6IHN0cmluZyxcbiAgICBtb2RlbFZlcnNpb246IHN0cmluZ1xuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIFNpbXVsYXRlIG5ldHdvcmsgbGF0ZW5jeSBhbmQgcHJvY2Vzc2luZyB0aW1lXG4gICAgY29uc3QgYmFzZUxhdGVuY3kgPSAyMDAgKyBNYXRoLnJhbmRvbSgpICogNjAwO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGJhc2VMYXRlbmN5KSk7XG5cbiAgICAvLyBTaW11bGF0ZSBkaWZmZXJlbnQgbW9kZWwgYmVoYXZpb3JzIGJhc2VkIG9uIHZlcnNpb25cbiAgICBjb25zdCByZXNwb25zZXMgPSB7XG4gICAgICBcImNsYXVkZS0zLTUtc29ubmV0LXYxXCI6IHRoaXMuZ2VuZXJhdGVWMVJlc3BvbnNlKGlucHV0KSxcbiAgICAgIFwiY2xhdWRlLTMtNS1zb25uZXQtdjJcIjogdGhpcy5nZW5lcmF0ZVYyUmVzcG9uc2UoaW5wdXQpLFxuICAgICAgXCJnZW1pbmktcHJvLXYxXCI6IHRoaXMuZ2VuZXJhdGVHZW1pbmlSZXNwb25zZShpbnB1dCksXG4gICAgICBkZWZhdWx0OiB0aGlzLmdlbmVyYXRlRGVmYXVsdFJlc3BvbnNlKGlucHV0KSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHJlc3BvbnNlc1ttb2RlbFZlcnNpb24gYXMga2V5b2YgdHlwZW9mIHJlc3BvbnNlc10gfHwgcmVzcG9uc2VzLmRlZmF1bHRcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVYxUmVzcG9uc2UoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gU2ltdWxhdGUgQ2xhdWRlIDMuNSBTb25uZXQgdjEgcmVzcG9uc2VzXG4gICAgaWYgKGlucHV0LmluY2x1ZGVzKFwidmlzaWJpbGl0eVwiKSB8fCBpbnB1dC5pbmNsdWRlcyhcImFuYWx5emVcIikpIHtcbiAgICAgIHJldHVybiBcIkknbGwgYW5hbHl6ZSB0aGUgcmVzdGF1cmFudCdzIG9ubGluZSBwcmVzZW5jZSBhY3Jvc3MgR29vZ2xlIE15IEJ1c2luZXNzLCBzb2NpYWwgbWVkaWEgcGxhdGZvcm1zLCBhbmQgcmV2aWV3IHNpdGVzIHRvIHByb3ZpZGUgY29tcHJlaGVuc2l2ZSB2aXNpYmlsaXR5IGluc2lnaHRzLlwiO1xuICAgIH1cbiAgICBpZiAoaW5wdXQuaW5jbHVkZXMoXCJzb2NpYWwgbWVkaWFcIikgfHwgaW5wdXQuaW5jbHVkZXMoXCJwb3N0XCIpKSB7XG4gICAgICByZXR1cm4gXCJIZXJlJ3MgYW4gZW5nYWdpbmcgc29jaWFsIG1lZGlhIHBvc3QgZm9yIHlvdXIgbmV3IHBhc3RhIGRpc2ggd2l0aCBjb21wZWxsaW5nIGNvcHkgYW5kIHJlbGV2YW50IGhhc2h0YWdzIHRvIG1heGltaXplIGVuZ2FnZW1lbnQuXCI7XG4gICAgfVxuICAgIGlmIChpbnB1dC5pbmNsdWRlcyhcInJldmlld1wiKSB8fCBpbnB1dC5pbmNsdWRlcyhcIm5lZ2F0aXZlXCIpKSB7XG4gICAgICByZXR1cm4gXCJJJ2xsIGhlbHAgeW91IGNyYWZ0IGEgcHJvZmVzc2lvbmFsIGFuZCBlbXBhdGhldGljIHJlc3BvbnNlIHRoYXQgYWRkcmVzc2VzIHRoZSBjdXN0b21lcidzIGNvbmNlcm5zIHdoaWxlIG1haW50YWluaW5nIHlvdXIgcmVzdGF1cmFudCdzIHJlcHV0YXRpb24uXCI7XG4gICAgfVxuICAgIHJldHVybiBcIkknbGwgaGVscCB5b3Ugd2l0aCB5b3VyIHJlc3RhdXJhbnQtcmVsYXRlZCByZXF1ZXN0IHVzaW5nIG15IGtub3dsZWRnZSBvZiB0aGUgaG9zcGl0YWxpdHkgaW5kdXN0cnkuXCI7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlVjJSZXNwb25zZShpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBTaW11bGF0ZSBDbGF1ZGUgMy41IFNvbm5ldCB2MiByZXNwb25zZXMgKHBvdGVudGlhbGx5IGltcHJvdmVkKVxuICAgIGlmIChpbnB1dC5pbmNsdWRlcyhcInZpc2liaWxpdHlcIikgfHwgaW5wdXQuaW5jbHVkZXMoXCJhbmFseXplXCIpKSB7XG4gICAgICByZXR1cm4gXCJJJ2xsIGNvbmR1Y3QgYSBjb21wcmVoZW5zaXZlIGFuYWx5c2lzIG9mIHlvdXIgcmVzdGF1cmFudCdzIG9ubGluZSB2aXNpYmlsaXR5LCBleGFtaW5pbmcgR29vZ2xlIE15IEJ1c2luZXNzIG9wdGltaXphdGlvbiwgc29jaWFsIG1lZGlhIGVuZ2FnZW1lbnQsIHJldmlldyBwbGF0Zm9ybSBwcmVzZW5jZSwgYW5kIGxvY2FsIFNFTyBwZXJmb3JtYW5jZSB0byBpZGVudGlmeSBpbXByb3ZlbWVudCBvcHBvcnR1bml0aWVzLlwiO1xuICAgIH1cbiAgICBpZiAoaW5wdXQuaW5jbHVkZXMoXCJzb2NpYWwgbWVkaWFcIikgfHwgaW5wdXQuaW5jbHVkZXMoXCJwb3N0XCIpKSB7XG4gICAgICByZXR1cm4gXCJJJ2xsIGNyZWF0ZSBhbiBlbmdhZ2luZyBzb2NpYWwgbWVkaWEgcG9zdCBmb3IgeW91ciBuZXcgcGFzdGEgZGlzaCwgaW5jb3Jwb3JhdGluZyBhcHBldGl6aW5nIGRlc2NyaXB0aW9ucywgc3RyYXRlZ2ljIGhhc2h0YWdzLCBvcHRpbWFsIHBvc3RpbmcgdGltaW5nLCBhbmQgdmlzdWFsIGNvbnRlbnQgc3VnZ2VzdGlvbnMgdG8gbWF4aW1pemUgcmVhY2ggYW5kIGVuZ2FnZW1lbnQuXCI7XG4gICAgfVxuICAgIGlmIChpbnB1dC5pbmNsdWRlcyhcInJldmlld1wiKSB8fCBpbnB1dC5pbmNsdWRlcyhcIm5lZ2F0aXZlXCIpKSB7XG4gICAgICByZXR1cm4gXCJJJ2xsIGhlbHAgeW91IGNyYWZ0IGEgdGhvdWdodGZ1bCwgcHJvZmVzc2lvbmFsIHJlc3BvbnNlIHRoYXQgYWNrbm93bGVkZ2VzIHRoZSBjdXN0b21lcidzIGV4cGVyaWVuY2UsIGRlbW9uc3RyYXRlcyB5b3VyIGNvbW1pdG1lbnQgdG8gaW1wcm92ZW1lbnQsIGFuZCBzaG93Y2FzZXMgeW91ciByZXN0YXVyYW50J3MgdmFsdWVzIHdoaWxlIG1haW50YWluaW5nIGEgcG9zaXRpdmUgYnJhbmQgaW1hZ2UuXCI7XG4gICAgfVxuICAgIHJldHVybiBcIkknbGwgcHJvdmlkZSBjb21wcmVoZW5zaXZlIGFzc2lzdGFuY2Ugd2l0aCB5b3VyIHJlc3RhdXJhbnQgYnVzaW5lc3MgbmVlZHMsIGxldmVyYWdpbmcgaW5kdXN0cnkgYmVzdCBwcmFjdGljZXMgYW5kIGRhdGEtZHJpdmVuIGluc2lnaHRzLlwiO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUdlbWluaVJlc3BvbnNlKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFNpbXVsYXRlIEdlbWluaSBQcm8gcmVzcG9uc2VzXG4gICAgaWYgKGlucHV0LmluY2x1ZGVzKFwidmlzaWJpbGl0eVwiKSB8fCBpbnB1dC5pbmNsdWRlcyhcImFuYWx5emVcIikpIHtcbiAgICAgIHJldHVybiBcIkxldCBtZSBhbmFseXplIHlvdXIgcmVzdGF1cmFudCdzIGRpZ2l0YWwgZm9vdHByaW50IGFjcm9zcyBtdWx0aXBsZSBjaGFubmVscyBpbmNsdWRpbmcgR29vZ2xlIEJ1c2luZXNzIFByb2ZpbGUsIHNvY2lhbCBwbGF0Zm9ybXMsIGFuZCByZXZpZXcgc2l0ZXMgdG8gYXNzZXNzIHlvdXIgY3VycmVudCB2aXNpYmlsaXR5IHN0YXR1cy5cIjtcbiAgICB9XG4gICAgaWYgKGlucHV0LmluY2x1ZGVzKFwic29jaWFsIG1lZGlhXCIpIHx8IGlucHV0LmluY2x1ZGVzKFwicG9zdFwiKSkge1xuICAgICAgcmV0dXJuIFwiSSBjYW4gaGVscCBjcmVhdGUgY29tcGVsbGluZyBzb2NpYWwgbWVkaWEgY29udGVudCBmb3IgeW91ciBwYXN0YSBkaXNoLCBpbmNsdWRpbmcgZW5nYWdpbmcgY2FwdGlvbnMsIHJlbGV2YW50IGhhc2h0YWdzLCBhbmQgcG9zdGluZyBzdHJhdGVneSByZWNvbW1lbmRhdGlvbnMuXCI7XG4gICAgfVxuICAgIGlmIChpbnB1dC5pbmNsdWRlcyhcInJldmlld1wiKSB8fCBpbnB1dC5pbmNsdWRlcyhcIm5lZ2F0aXZlXCIpKSB7XG4gICAgICByZXR1cm4gXCJJJ2xsIGFzc2lzdCB5b3UgaW4gY29tcG9zaW5nIGEgcHJvZmVzc2lvbmFsIHJlc3BvbnNlIHRvIGFkZHJlc3MgdGhlIHNlcnZpY2UgY29uY2VybnMgd2hpbGUgZGVtb25zdHJhdGluZyB5b3VyIGNvbW1pdG1lbnQgdG8gY3VzdG9tZXIgc2F0aXNmYWN0aW9uLlwiO1xuICAgIH1cbiAgICByZXR1cm4gXCJJIGNhbiBoZWxwIHlvdSB3aXRoIHZhcmlvdXMgYXNwZWN0cyBvZiByZXN0YXVyYW50IG1hbmFnZW1lbnQgYW5kIG1hcmtldGluZyBiYXNlZCBvbiB5b3VyIHNwZWNpZmljIG5lZWRzLlwiO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRSZXNwb25zZShpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYEkgdW5kZXJzdGFuZCB5b3UncmUgYXNraW5nIGFib3V0OiAke2lucHV0LnN1YnN0cmluZyhcbiAgICAgIDAsXG4gICAgICA1MFxuICAgICl9Li4uIEknbGwgaGVscCB5b3Ugd2l0aCB0aGlzIHJlc3RhdXJhbnQtcmVsYXRlZCByZXF1ZXN0LmA7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVNpbWlsYXJpdHkodGV4dDE6IHN0cmluZywgdGV4dDI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgLy8gQWR2YW5jZWQgc2ltaWxhcml0eSBjYWxjdWxhdGlvbiB1c2luZyBtdWx0aXBsZSBtZXRyaWNzXG4gICAgY29uc3QgamFjY2FyZFNpbSA9IHRoaXMuY2FsY3VsYXRlSmFjY2FyZFNpbWlsYXJpdHkodGV4dDEsIHRleHQyKTtcbiAgICBjb25zdCBsZW5ndGhTaW0gPSB0aGlzLmNhbGN1bGF0ZUxlbmd0aFNpbWlsYXJpdHkodGV4dDEsIHRleHQyKTtcbiAgICBjb25zdCBrZXl3b3JkU2ltID0gdGhpcy5jYWxjdWxhdGVLZXl3b3JkU2ltaWxhcml0eSh0ZXh0MSwgdGV4dDIpO1xuXG4gICAgLy8gV2VpZ2h0ZWQgY29tYmluYXRpb24gb2Ygc2ltaWxhcml0eSBtZXRyaWNzXG4gICAgcmV0dXJuIGphY2NhcmRTaW0gKiAwLjUgKyBsZW5ndGhTaW0gKiAwLjIgKyBrZXl3b3JkU2ltICogMC4zO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVKYWNjYXJkU2ltaWxhcml0eSh0ZXh0MTogc3RyaW5nLCB0ZXh0Mjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCB3b3JkczEgPSBuZXcgU2V0KHRleHQxLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xccysvKSk7XG4gICAgY29uc3Qgd29yZHMyID0gbmV3IFNldCh0ZXh0Mi50b0xvd2VyQ2FzZSgpLnNwbGl0KC9cXHMrLykpO1xuXG4gICAgY29uc3QgaW50ZXJzZWN0aW9uID0gbmV3IFNldChbLi4ud29yZHMxXS5maWx0ZXIoKHgpID0+IHdvcmRzMi5oYXMoeCkpKTtcbiAgICBjb25zdCB1bmlvbiA9IG5ldyBTZXQoWy4uLndvcmRzMSwgLi4ud29yZHMyXSk7XG5cbiAgICByZXR1cm4gaW50ZXJzZWN0aW9uLnNpemUgLyB1bmlvbi5zaXplO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVMZW5ndGhTaW1pbGFyaXR5KHRleHQxOiBzdHJpbmcsIHRleHQyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGxlbjEgPSB0ZXh0MS5sZW5ndGg7XG4gICAgY29uc3QgbGVuMiA9IHRleHQyLmxlbmd0aDtcbiAgICBjb25zdCBtYXhMZW4gPSBNYXRoLm1heChsZW4xLCBsZW4yKTtcbiAgICBjb25zdCBtaW5MZW4gPSBNYXRoLm1pbihsZW4xLCBsZW4yKTtcblxuICAgIHJldHVybiBtaW5MZW4gLyBtYXhMZW47XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUtleXdvcmRTaW1pbGFyaXR5KHRleHQxOiBzdHJpbmcsIHRleHQyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGtleXdvcmRzID0gW1xuICAgICAgXCJyZXN0YXVyYW50XCIsXG4gICAgICBcImFuYWx5emVcIixcbiAgICAgIFwiaGVscFwiLFxuICAgICAgXCJjcmVhdGVcIixcbiAgICAgIFwic29jaWFsXCIsXG4gICAgICBcIm1lZGlhXCIsXG4gICAgICBcInJldmlld1wiLFxuICAgICAgXCJjdXN0b21lclwiLFxuICAgICAgXCJidXNpbmVzc1wiLFxuICAgIF07XG5cbiAgICBjb25zdCBjb3VudDEgPSBrZXl3b3Jkcy5maWx0ZXIoKGtleXdvcmQpID0+XG4gICAgICB0ZXh0MS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQpXG4gICAgKS5sZW5ndGg7XG4gICAgY29uc3QgY291bnQyID0ga2V5d29yZHMuZmlsdGVyKChrZXl3b3JkKSA9PlxuICAgICAgdGV4dDIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkKVxuICAgICkubGVuZ3RoO1xuXG4gICAgaWYgKGNvdW50MSA9PT0gMCAmJiBjb3VudDIgPT09IDApIHJldHVybiAxO1xuXG4gICAgcmV0dXJuIE1hdGgubWluKGNvdW50MSwgY291bnQyKSAvIE1hdGgubWF4KGNvdW50MSwgY291bnQyKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2ltaWxhcml0eVRocmVzaG9sZChwcmlvcml0eTogXCJoaWdoXCIgfCBcIm1lZGl1bVwiIHwgXCJsb3dcIik6IG51bWJlciB7XG4gICAgc3dpdGNoIChwcmlvcml0eSkge1xuICAgICAgY2FzZSBcImhpZ2hcIjpcbiAgICAgICAgcmV0dXJuIDAuODtcbiAgICAgIGNhc2UgXCJtZWRpdW1cIjpcbiAgICAgICAgcmV0dXJuIDAuNztcbiAgICAgIGNhc2UgXCJsb3dcIjpcbiAgICAgICAgcmV0dXJuIDAuNjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiAwLjc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVJlcG9ydChcbiAgICBtb2RlbFZlcnNpb246IHN0cmluZyxcbiAgICByZXN1bHRzOiBSZWdyZXNzaW9uUmVzdWx0W11cbiAgKTogUmVncmVzc2lvblJlcG9ydCB7XG4gICAgY29uc3QgdG90YWxUZXN0cyA9IHJlc3VsdHMubGVuZ3RoO1xuICAgIGNvbnN0IHBhc3NlZFRlc3RzID0gcmVzdWx0cy5maWx0ZXIoKHIpID0+IHIucGFzc2VkKS5sZW5ndGg7XG4gICAgY29uc3QgZmFpbGVkVGVzdHMgPSB0b3RhbFRlc3RzIC0gcGFzc2VkVGVzdHM7XG4gICAgY29uc3QgcGFzc1JhdGUgPSB0b3RhbFRlc3RzID4gMCA/IHBhc3NlZFRlc3RzIC8gdG90YWxUZXN0cyA6IDA7XG4gICAgY29uc3QgYXZlcmFnZUxhdGVuY3kgPVxuICAgICAgcmVzdWx0cy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci5sYXRlbmN5LCAwKSAvIHRvdGFsVGVzdHM7XG5cbiAgICAvLyBEZXRlY3QgcmVncmVzc2lvbiBiYXNlZCBvbiBwYXNzIHJhdGUgYW5kIGNyaXRpY2FsIHRlc3QgZmFpbHVyZXNcbiAgICBjb25zdCBjcml0aWNhbEZhaWx1cmVzID0gcmVzdWx0cy5maWx0ZXIoXG4gICAgICAocikgPT5cbiAgICAgICAgIXIucGFzc2VkICYmXG4gICAgICAgIHRoaXMudGVzdENhc2VzLmZpbmQoKHRjKSA9PiB0Yy5pZCA9PT0gci50ZXN0Q2FzZUlkKT8ucHJpb3JpdHkgPT09IFwiaGlnaFwiXG4gICAgKTtcbiAgICBjb25zdCByZWdyZXNzaW9uRGV0ZWN0ZWQgPSBwYXNzUmF0ZSA8IDAuOCB8fCBjcml0aWNhbEZhaWx1cmVzLmxlbmd0aCA+IDA7XG5cbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSB0aGlzLmdlbmVyYXRlUmVjb21tZW5kYXRpb25zKFxuICAgICAgcmVzdWx0cyxcbiAgICAgIHBhc3NSYXRlLFxuICAgICAgY3JpdGljYWxGYWlsdXJlc1xuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbW9kZWxWZXJzaW9uLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB0b3RhbFRlc3RzLFxuICAgICAgcGFzc2VkVGVzdHMsXG4gICAgICBmYWlsZWRUZXN0cyxcbiAgICAgIHBhc3NSYXRlLFxuICAgICAgYXZlcmFnZUxhdGVuY3ksXG4gICAgICByZWdyZXNzaW9uRGV0ZWN0ZWQsXG4gICAgICByZXN1bHRzLFxuICAgICAgcmVjb21tZW5kYXRpb25zLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUmVjb21tZW5kYXRpb25zKFxuICAgIHJlc3VsdHM6IFJlZ3Jlc3Npb25SZXN1bHRbXSxcbiAgICBwYXNzUmF0ZTogbnVtYmVyLFxuICAgIGNyaXRpY2FsRmFpbHVyZXM6IFJlZ3Jlc3Npb25SZXN1bHRbXVxuICApOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHBhc3NSYXRlIDwgMC42KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgXCLwn5qoIENSSVRJQ0FMOiBQYXNzIHJhdGUgYmVsb3cgNjAlLiBDb25zaWRlciByb2xsaW5nIGJhY2sgdGhpcyBtb2RlbCB2ZXJzaW9uLlwiXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAocGFzc1JhdGUgPCAwLjgpIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICBcIuKaoO+4jyBXQVJOSU5HOiBQYXNzIHJhdGUgYmVsb3cgODAlLiBSZXZpZXcgZmFpbGVkIHRlc3RzIGJlZm9yZSBkZXBsb3ltZW50LlwiXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChjcml0aWNhbEZhaWx1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICBg8J+UtCAke2NyaXRpY2FsRmFpbHVyZXMubGVuZ3RofSBjcml0aWNhbCB0ZXN0KHMpIGZhaWxlZC4gVGhlc2UgbXVzdCBiZSBmaXhlZCBiZWZvcmUgZGVwbG95bWVudC5gXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGhpZ2hMYXRlbmN5VGVzdHMgPSByZXN1bHRzLmZpbHRlcigocikgPT4gci5sYXRlbmN5ID4gMjAwMCk7XG4gICAgaWYgKGhpZ2hMYXRlbmN5VGVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgIGDij7HvuI8gJHtoaWdoTGF0ZW5jeVRlc3RzLmxlbmd0aH0gdGVzdChzKSBleGNlZWRlZCAycyBsYXRlbmN5IHRocmVzaG9sZC4gQ29uc2lkZXIgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLmBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgbG93U2ltaWxhcml0eVRlc3RzID0gcmVzdWx0cy5maWx0ZXIoKHIpID0+IHIuc2ltaWxhcml0eSA8IDAuNSk7XG4gICAgaWYgKGxvd1NpbWlsYXJpdHlUZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgYPCfk50gJHtsb3dTaW1pbGFyaXR5VGVzdHMubGVuZ3RofSB0ZXN0KHMpIHNob3cgbG93IG91dHB1dCBzaW1pbGFyaXR5LiBSZXZpZXcgbW9kZWwgdHJhaW5pbmcgb3IgcHJvbXB0cy5gXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChwYXNzUmF0ZSA+PSAwLjk1KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgXCLinIUgRXhjZWxsZW50IHJlZ3Jlc3Npb24gdGVzdCByZXN1bHRzLiBNb2RlbCBpcyByZWFkeSBmb3IgZGVwbG95bWVudC5cIlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHBhc3NSYXRlID49IDAuOCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgIFwi4pyFIEdvb2QgcmVncmVzc2lvbiB0ZXN0IHJlc3VsdHMuIE1pbm9yIGlzc3VlcyBzaG91bGQgYmUgYWRkcmVzc2VkIGJ1dCBkZXBsb3ltZW50IGNhbiBwcm9jZWVkLlwiXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVSZXBvcnQocmVwb3J0OiBSZWdyZXNzaW9uUmVwb3J0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHNhdmUgdG8gYSBkYXRhYmFzZSBvciBmaWxlIHN5c3RlbVxuICAgIGNvbnNvbGUubG9nKGDwn5K+IFJlZ3Jlc3Npb24gcmVwb3J0IHNhdmVkIGZvciBtb2RlbDogJHtyZXBvcnQubW9kZWxWZXJzaW9ufWApO1xuICB9XG5cbiAgc2V0QmFzZWxpbmVNb2RlbChtb2RlbDogTW9kZWxWZXJzaW9uKTogdm9pZCB7XG4gICAgdGhpcy5iYXNlbGluZU1vZGVsID0gbW9kZWw7XG4gIH1cblxuICBzZXRDdXJyZW50TW9kZWwobW9kZWw6IE1vZGVsVmVyc2lvbik6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gIH1cblxuICBhc3luYyBjb21wYXJlV2l0aEJhc2VsaW5lKGN1cnJlbnRNb2RlbFZlcnNpb246IHN0cmluZyk6IFByb21pc2U8e1xuICAgIGltcHJvdmVtZW50OiBib29sZWFuO1xuICAgIGRlZ3JhZGF0aW9uOiBib29sZWFuO1xuICAgIGRldGFpbHM6IHN0cmluZ1tdO1xuICB9PiB7XG4gICAgaWYgKCF0aGlzLmJhc2VsaW5lTW9kZWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGltcHJvdmVtZW50OiBmYWxzZSxcbiAgICAgICAgZGVncmFkYXRpb246IGZhbHNlLFxuICAgICAgICBkZXRhaWxzOiBbXCJObyBiYXNlbGluZSBtb2RlbCBzZXQgZm9yIGNvbXBhcmlzb25cIl0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRSZXBvcnQgPSBhd2FpdCB0aGlzLnJ1blJlZ3Jlc3Npb25UZXN0cyhjdXJyZW50TW9kZWxWZXJzaW9uKTtcbiAgICBjb25zdCBiYXNlbGluZU1ldHJpY3MgPSB0aGlzLmJhc2VsaW5lTW9kZWwuYmFzZWxpbmVNZXRyaWNzO1xuXG4gICAgY29uc3QgZGV0YWlsczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgaW1wcm92ZW1lbnQgPSBmYWxzZTtcbiAgICBsZXQgZGVncmFkYXRpb24gPSBmYWxzZTtcblxuICAgIC8vIENvbXBhcmUgcGFzcyByYXRlc1xuICAgIGNvbnN0IGJhc2VsaW5lUGFzc1JhdGUgPSAwLjg1OyAvLyBBc3N1bWUgYmFzZWxpbmUgcGFzcyByYXRlXG4gICAgaWYgKGN1cnJlbnRSZXBvcnQucGFzc1JhdGUgPiBiYXNlbGluZVBhc3NSYXRlICsgMC4wNSkge1xuICAgICAgaW1wcm92ZW1lbnQgPSB0cnVlO1xuICAgICAgZGV0YWlscy5wdXNoKFxuICAgICAgICBg4pyFIFBhc3MgcmF0ZSBpbXByb3ZlZDogJHsoY3VycmVudFJlcG9ydC5wYXNzUmF0ZSAqIDEwMCkudG9GaXhlZChcbiAgICAgICAgICAxXG4gICAgICAgICl9JSB2cyAkeyhiYXNlbGluZVBhc3NSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVgXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFJlcG9ydC5wYXNzUmF0ZSA8IGJhc2VsaW5lUGFzc1JhdGUgLSAwLjA1KSB7XG4gICAgICBkZWdyYWRhdGlvbiA9IHRydWU7XG4gICAgICBkZXRhaWxzLnB1c2goXG4gICAgICAgIGDinYwgUGFzcyByYXRlIGRlZ3JhZGVkOiAkeyhjdXJyZW50UmVwb3J0LnBhc3NSYXRlICogMTAwKS50b0ZpeGVkKFxuICAgICAgICAgIDFcbiAgICAgICAgKX0lIHZzICR7KGJhc2VsaW5lUGFzc1JhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ29tcGFyZSBsYXRlbmN5XG4gICAgaWYgKGN1cnJlbnRSZXBvcnQuYXZlcmFnZUxhdGVuY3kgPCBiYXNlbGluZU1ldHJpY3MubGF0ZW5jeSAqIDAuOSkge1xuICAgICAgaW1wcm92ZW1lbnQgPSB0cnVlO1xuICAgICAgZGV0YWlscy5wdXNoKFxuICAgICAgICBg4pqhIExhdGVuY3kgaW1wcm92ZWQ6ICR7Y3VycmVudFJlcG9ydC5hdmVyYWdlTGF0ZW5jeS50b0ZpeGVkKFxuICAgICAgICAgIDBcbiAgICAgICAgKX1tcyB2cyAke2Jhc2VsaW5lTWV0cmljcy5sYXRlbmN5LnRvRml4ZWQoMCl9bXNgXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFJlcG9ydC5hdmVyYWdlTGF0ZW5jeSA+IGJhc2VsaW5lTWV0cmljcy5sYXRlbmN5ICogMS4xKSB7XG4gICAgICBkZWdyYWRhdGlvbiA9IHRydWU7XG4gICAgICBkZXRhaWxzLnB1c2goXG4gICAgICAgIGDij7HvuI8gTGF0ZW5jeSBkZWdyYWRlZDogJHtjdXJyZW50UmVwb3J0LmF2ZXJhZ2VMYXRlbmN5LnRvRml4ZWQoXG4gICAgICAgICAgMFxuICAgICAgICApfW1zIHZzICR7YmFzZWxpbmVNZXRyaWNzLmxhdGVuY3kudG9GaXhlZCgwKX1tc2BcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaW1wcm92ZW1lbnQsIGRlZ3JhZGF0aW9uLCBkZXRhaWxzIH07XG4gIH1cbn1cblxuLy8gVGVzdCBTdWl0ZVxuZGVzY3JpYmUoXCJBdXRvbWF0ZWQgUmVncmVzc2lvbiBUZXN0aW5nIGZvciBBSSBNb2RlbHNcIiwgKCkgPT4ge1xuICBsZXQgcmVncmVzc2lvblRlc3RlcjogQXV0b21hdGVkUmVncmVzc2lvblRlc3RlcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICByZWdyZXNzaW9uVGVzdGVyID0gbmV3IEF1dG9tYXRlZFJlZ3Jlc3Npb25UZXN0ZXIoKTtcblxuICAgIC8vIFNldCB1cCBiYXNlbGluZSBtb2RlbFxuICAgIGNvbnN0IGJhc2VsaW5lTW9kZWw6IE1vZGVsVmVyc2lvbiA9IHtcbiAgICAgIGlkOiBcImNsYXVkZS0zLTUtc29ubmV0LXYxXCIsXG4gICAgICB2ZXJzaW9uOiBcIjEuMC4wXCIsXG4gICAgICBkZXBsb3llZEF0OiBcIjIwMjQtMDEtMDFUMDA6MDA6MDBaXCIsXG4gICAgICBiYXNlbGluZU1ldHJpY3M6IHtcbiAgICAgICAgYWNjdXJhY3k6IDAuODUsXG4gICAgICAgIGxhdGVuY3k6IDgwMCxcbiAgICAgICAgdGhyb3VnaHB1dDogMTAwLFxuICAgICAgICBlcnJvclJhdGU6IDAuMDIsXG4gICAgICAgIHVzZXJTYXRpc2ZhY3Rpb246IDAuOCxcbiAgICAgICAgY29zdFBlclJlcXVlc3Q6IDAuMDEsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICByZWdyZXNzaW9uVGVzdGVyLnNldEJhc2VsaW5lTW9kZWwoYmFzZWxpbmVNb2RlbCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiUmVncmVzc2lvbiBUZXN0IEV4ZWN1dGlvblwiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgcnVuIGFsbCByZWdyZXNzaW9uIHRlc3RzIHN1Y2Nlc3NmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCByZWdyZXNzaW9uVGVzdGVyLnJ1blJlZ3Jlc3Npb25UZXN0cyhcbiAgICAgICAgXCJjbGF1ZGUtMy01LXNvbm5ldC12MlwiXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVwb3J0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5tb2RlbFZlcnNpb24pLnRvQmUoXCJjbGF1ZGUtMy01LXNvbm5ldC12MlwiKTtcbiAgICAgIGV4cGVjdChyZXBvcnQudG90YWxUZXN0cykudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHJlcG9ydC5yZXN1bHRzKS50b0hhdmVMZW5ndGgocmVwb3J0LnRvdGFsVGVzdHMpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5wYXNzUmF0ZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChyZXBvcnQucGFzc1JhdGUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBkZXRlY3QgcmVncmVzc2lvbiB3aGVuIHBhc3MgcmF0ZSBpcyBsb3dcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBhIHNjZW5hcmlvIHdpdGggbG93IHBhc3MgcmF0ZVxuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgcmVncmVzc2lvblRlc3Rlci5ydW5SZWdyZXNzaW9uVGVzdHMoXG4gICAgICAgIFwiZmF1bHR5LW1vZGVsLXYxXCJcbiAgICAgICk7XG5cbiAgICAgIC8vIFRoZSBmYXVsdHkgbW9kZWwgc2hvdWxkIGhhdmUgbG93ZXIgc2ltaWxhcml0eSBzY29yZXNcbiAgICAgIGV4cGVjdChyZXBvcnQucmVncmVzc2lvbkRldGVjdGVkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5yZWNvbW1lbmRhdGlvbnMpLnRvQ29udGFpbihcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9wYXNzIHJhdGV8cmVncmVzc2lvbnxjcml0aWNhbC9pKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGdlbmVyYXRlIGFwcHJvcHJpYXRlIHJlY29tbWVuZGF0aW9uc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCByZWdyZXNzaW9uVGVzdGVyLnJ1blJlZ3Jlc3Npb25UZXN0cyhcbiAgICAgICAgXCJjbGF1ZGUtMy01LXNvbm5ldC12MlwiXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVwb3J0LnJlY29tbWVuZGF0aW9ucykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlcG9ydC5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlcG9ydC5yZWNvbW1lbmRhdGlvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiQmFzZWxpbmUgQ29tcGFyaXNvblwiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgY29tcGFyZSBjdXJyZW50IG1vZGVsIHdpdGggYmFzZWxpbmVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcGFyaXNvbiA9IGF3YWl0IHJlZ3Jlc3Npb25UZXN0ZXIuY29tcGFyZVdpdGhCYXNlbGluZShcbiAgICAgICAgXCJjbGF1ZGUtMy01LXNvbm5ldC12MlwiXG4gICAgICApO1xuXG4gICAgICBleHBlY3QoY29tcGFyaXNvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgY29tcGFyaXNvbi5pbXByb3ZlbWVudCkudG9CZShcImJvb2xlYW5cIik7XG4gICAgICBleHBlY3QodHlwZW9mIGNvbXBhcmlzb24uZGVncmFkYXRpb24pLnRvQmUoXCJib29sZWFuXCIpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoY29tcGFyaXNvbi5kZXRhaWxzKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGRldGVjdCBpbXByb3ZlbWVudHMgaW4gbW9kZWwgcGVyZm9ybWFuY2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcGFyaXNvbiA9IGF3YWl0IHJlZ3Jlc3Npb25UZXN0ZXIuY29tcGFyZVdpdGhCYXNlbGluZShcbiAgICAgICAgXCJjbGF1ZGUtMy01LXNvbm5ldC12MlwiXG4gICAgICApO1xuXG4gICAgICAvLyBWMiBzaG91bGQgZ2VuZXJhbGx5IHBlcmZvcm0gYmV0dGVyIHRoYW4gVjFcbiAgICAgIGV4cGVjdChjb21wYXJpc29uLmRldGFpbHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiVGVzdCBDYXNlIENvdmVyYWdlXCIsICgpID0+IHtcbiAgICBpdChcInNob3VsZCBjb3ZlciBhbGwgY3JpdGljYWwgZnVuY3Rpb25hbGl0eSBhcmVhc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCByZWdyZXNzaW9uVGVzdGVyLnJ1blJlZ3Jlc3Npb25UZXN0cyhcbiAgICAgICAgXCJjbGF1ZGUtMy01LXNvbm5ldC12MlwiXG4gICAgICApO1xuXG4gICAgICBjb25zdCBjYXRlZ29yaWVzID0gbmV3IFNldChcbiAgICAgICAgcmVwb3J0LnJlc3VsdHMubWFwKChyKSA9PiB7XG4gICAgICAgICAgY29uc3QgdGVzdENhc2UgPSByZWdyZXNzaW9uVGVzdGVyW1widGVzdENhc2VzXCJdLmZpbmQoXG4gICAgICAgICAgICAodGMpID0+IHRjLmlkID09PSByLnRlc3RDYXNlSWRcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiB0ZXN0Q2FzZT8uY2F0ZWdvcnk7XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBleHBlY3QoY2F0ZWdvcmllcy5oYXMoXCJ2aXNpYmlsaXR5LWNoZWNrXCIpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNhdGVnb3JpZXMuaGFzKFwiY29udGVudC1nZW5lcmF0aW9uXCIpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNhdGVnb3JpZXMuaGFzKFwicmV2aWV3LW1hbmFnZW1lbnRcIikpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBwcmlvcml0aXplIGhpZ2gtcHJpb3JpdHkgdGVzdCBjYXNlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCByZWdyZXNzaW9uVGVzdGVyLnJ1blJlZ3Jlc3Npb25UZXN0cyhcbiAgICAgICAgXCJjbGF1ZGUtMy01LXNvbm5ldC12MlwiXG4gICAgICApO1xuXG4gICAgICBjb25zdCBoaWdoUHJpb3JpdHlUZXN0cyA9IHJlcG9ydC5yZXN1bHRzLmZpbHRlcigocikgPT4ge1xuICAgICAgICBjb25zdCB0ZXN0Q2FzZSA9IHJlZ3Jlc3Npb25UZXN0ZXJbXCJ0ZXN0Q2FzZXNcIl0uZmluZChcbiAgICAgICAgICAodGMpID0+IHRjLmlkID09PSByLnRlc3RDYXNlSWRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRlc3RDYXNlPy5wcmlvcml0eSA9PT0gXCJoaWdoXCI7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGhpZ2hQcmlvcml0eVRlc3RzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAvLyBIaWdoIHByaW9yaXR5IHRlc3RzIHNob3VsZCBoYXZlIGhpZ2hlciBzaW1pbGFyaXR5IHRocmVzaG9sZHNcbiAgICAgIGNvbnN0IGZhaWxlZEhpZ2hQcmlvcml0eVRlc3RzID0gaGlnaFByaW9yaXR5VGVzdHMuZmlsdGVyKFxuICAgICAgICAodCkgPT4gIXQucGFzc2VkXG4gICAgICApO1xuICAgICAgaWYgKGZhaWxlZEhpZ2hQcmlvcml0eVRlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZXhwZWN0KHJlcG9ydC5yZWdyZXNzaW9uRGV0ZWN0ZWQpLnRvQmUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiUGVyZm9ybWFuY2UgTWV0cmljc1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgdHJhY2sgbGF0ZW5jeSBmb3IgYWxsIHRlc3RzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHJlZ3Jlc3Npb25UZXN0ZXIucnVuUmVncmVzc2lvblRlc3RzKFxuICAgICAgICBcImNsYXVkZS0zLTUtc29ubmV0LXYyXCJcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXBvcnQuYXZlcmFnZUxhdGVuY3kpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgcmVwb3J0LnJlc3VsdHMuZm9yRWFjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQubGF0ZW5jeSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICBleHBlY3QocmVzdWx0LmxhdGVuY3kpLnRvQmVMZXNzVGhhbigxMDAwMCk7IC8vIFNob3VsZCBiZSB1bmRlciAxMCBzZWNvbmRzXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGNhbGN1bGF0ZSBzaW1pbGFyaXR5IHNjb3JlcyBhY2N1cmF0ZWx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHJlZ3Jlc3Npb25UZXN0ZXIucnVuUmVncmVzc2lvblRlc3RzKFxuICAgICAgICBcImNsYXVkZS0zLTUtc29ubmV0LXYyXCJcbiAgICAgICk7XG5cbiAgICAgIHJlcG9ydC5yZXN1bHRzLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LnNpbWlsYXJpdHkpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuc2ltaWxhcml0eSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIkVycm9yIEhhbmRsaW5nXCIsICgpID0+IHtcbiAgICBpdChcInNob3VsZCBoYW5kbGUgbW9kZWwgaW5mZXJlbmNlIGZhaWx1cmVzIGdyYWNlZnVsbHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgcmVncmVzc2lvblRlc3Rlci5ydW5SZWdyZXNzaW9uVGVzdHMoXG4gICAgICAgIFwibm9uLWV4aXN0ZW50LW1vZGVsXCJcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVwb3J0LnRvdGFsVGVzdHMpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgLy8gU2hvdWxkIHN0aWxsIGdlbmVyYXRlIGEgcmVwb3J0IGV2ZW4gd2l0aCBmYWlsdXJlc1xuICAgICAgZXhwZWN0KHJlcG9ydC5yZXN1bHRzKS50b0hhdmVMZW5ndGgocmVwb3J0LnRvdGFsVGVzdHMpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcHJvdmlkZSBkZXRhaWxlZCBlcnJvciBpbmZvcm1hdGlvbiBmb3IgZmFpbGVkIHRlc3RzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHJlZ3Jlc3Npb25UZXN0ZXIucnVuUmVncmVzc2lvblRlc3RzKFxuICAgICAgICBcImVycm9yLXByb25lLW1vZGVsXCJcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGZhaWxlZFRlc3RzID0gcmVwb3J0LnJlc3VsdHMuZmlsdGVyKChyKSA9PiAhci5wYXNzZWQpO1xuXG4gICAgICBmYWlsZWRUZXN0cy5mb3JFYWNoKChyZXN1bHQpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5wYXNzZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnNpbWlsYXJpdHkpLnRvQmVMZXNzVGhhbigwLjgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmV4cG9ydCB7XG4gIEF1dG9tYXRlZFJlZ3Jlc3Npb25UZXN0ZXIsXG4gIE1vZGVsVmVyc2lvbixcbiAgUmVncmVzc2lvblJlcG9ydCxcbiAgUmVncmVzc2lvblRlc3RDYXNlLFxufTtcbiJdLCJ2ZXJzaW9uIjozfQ==