3123a1639decfff056d26c277a68897b
"use strict";
/**
 * Unified AI API Test Suite
 *
 * Tests the enterprise-grade multi-provider integration with complete mocks
 */
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const globals_1 = require("@jest/globals");
const test_mocks_1 = require("../test-mocks");
const unified_ai_api_1 = require("../unified-ai-api");
(0, globals_1.describe)("UnifiedAiApi", () => {
    let api;
    let mockConfig;
    let mocks;
    (0, globals_1.beforeEach)(() => {
        // Setup mocks
        mocks = (0, test_mocks_1.setupUnifiedAiMocks)();
        mockConfig = {
            providers: {
                bedrock: {
                    region: "eu-central-1",
                    models: ["anthropic.claude-3-5-sonnet-20241022-v2:0"],
                },
                google: {
                    apiKey: "test-google-key",
                    models: ["gemini-1.5-pro"],
                },
                meta: {
                    endpoint: "https://api.meta.com",
                    apiKey: "test-meta-key",
                    models: ["meta-llama/Llama-3.2-90B-Vision-Instruct"],
                },
            },
            fallbackStrategy: "default",
            enableCaching: true,
            enableMonitoring: true,
            enableFeatureFlags: true,
            maxRetries: 3,
            timeoutMs: 30000,
        };
        api = new unified_ai_api_1.UnifiedAiApi(mockConfig);
        // Inject mocks
        api.monitor = mocks.monitor;
        api.cache = mocks.cache;
        api.circuitBreakers = mocks.circuitBreakers;
        api.featureFlags = mocks.featureFlags;
        api.multiProvider = mocks.multiProvider;
        api.router = mocks.router;
    });
    (0, globals_1.afterEach)(() => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        // Don't call shutdown in afterEach as it causes issues
        globals_1.jest.clearAllMocks();
    }));
    (0, globals_1.describe)("Constructor", () => {
        (0, globals_1.it)("should initialize with all providers", () => {
            (0, globals_1.expect)(api).toBeInstanceOf(unified_ai_api_1.UnifiedAiApi);
        });
        (0, globals_1.it)("should build correct model specifications", () => {
            const models = api.getProviderModels("bedrock");
            (0, globals_1.expect)(models).toContain("anthropic.claude-3-5-sonnet-20241022-v2:0");
        });
        (0, globals_1.it)("should initialize circuit breakers for all providers", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const health = yield api.getProviderHealth();
            (0, globals_1.expect)(health).toHaveLength(3);
            (0, globals_1.expect)(health.map((h) => h.provider)).toEqual([
                "meta",
                "google",
                "bedrock",
            ]);
        }));
    });
    (0, globals_1.describe)("generateResponse", () => {
        const mockRequest = {
            prompt: "Test prompt",
            context: {
                domain: "system", // System task -> Bedrock should be first
                locale: "de-DE",
                budgetTier: "standard",
            },
        };
        (0, globals_1.it)("should generate response with primary provider", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockResponse = {
                content: "Test response",
                provider: "bedrock",
                requestId: "test-request-id",
                processingTime: 500,
                success: true,
            };
            mocks.multiProvider.routeRequest.mockResolvedValueOnce(mockResponse);
            const response = yield api.generateResponse(mockRequest);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("bedrock");
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                prompt: "Test prompt",
                context: mockRequest.context,
            }));
        }));
        (0, globals_1.it)("should fallback to secondary provider on failure", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const successResponse = {
                content: "Fallback response",
                provider: "google",
                requestId: "test-request-id",
                processingTime: 700,
                success: true,
            };
            mocks.multiProvider.routeRequest
                .mockRejectedValueOnce(new Error("Bedrock failed"))
                .mockResolvedValueOnce(successResponse);
            const response = yield api.generateResponse(mockRequest);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("google");
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledTimes(2);
        }));
        (0, globals_1.it)("should return cached response when available", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const cachedResponse = {
                content: "Cached response",
                provider: "bedrock",
                requestId: "cached-request-id",
                processingTime: 50,
                success: true,
            };
            mocks.cache.get.mockResolvedValueOnce(cachedResponse);
            const response = yield api.generateResponse(mockRequest);
            (0, globals_1.expect)(response.content).toBe("Cached response");
            (0, globals_1.expect)(mocks.cache.get).toHaveBeenCalled();
        }));
        (0, globals_1.it)("should handle timeout errors", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock a request that times out
            mocks.multiProvider.routeRequest.mockRejectedValue(new Error("Request timeout after 30000ms"));
            const response = yield api.generateResponse(mockRequest);
            (0, globals_1.expect)(response.success).toBe(false);
            (0, globals_1.expect)(response.error).toContain("timeout");
        }));
        (0, globals_1.it)("should handle all providers failing", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest.mockRejectedValue(new Error("Provider failed"));
            const response = yield api.generateResponse(mockRequest);
            (0, globals_1.expect)(response.success).toBe(false);
            (0, globals_1.expect)(response.error).toContain("All providers failed");
        }));
    });
    (0, globals_1.describe)("Provider Ordering Strategies", () => {
        (0, globals_1.it)("should order providers by cost when cost-optimized", () => {
            const api = new unified_ai_api_1.UnifiedAiApi(Object.assign(Object.assign({}, mockConfig), { fallbackStrategy: "cost-optimized" }));
            // Access private method for testing
            const orderByCost = api.orderByCost.bind(api);
            const providers = ["bedrock", "google", "meta"];
            const ordered = orderByCost(providers);
            (0, globals_1.expect)(ordered[0]).toBe("meta"); // Lowest cost
            (0, globals_1.expect)(ordered[2]).toBe("bedrock"); // Highest cost
        });
        (0, globals_1.it)("should order providers by latency when latency-optimized", () => {
            const api = new unified_ai_api_1.UnifiedAiApi(Object.assign(Object.assign({}, mockConfig), { fallbackStrategy: "latency-optimized" }));
            const orderByLatency = api.orderByLatency.bind(api);
            const providers = ["bedrock", "google", "meta"];
            const ordered = orderByLatency(providers);
            (0, globals_1.expect)(ordered[0]).toBe("bedrock"); // Fastest
            (0, globals_1.expect)(ordered[2]).toBe("meta"); // Slowest
        });
        (0, globals_1.it)("should use round-robin strategy", () => {
            const api = new unified_ai_api_1.UnifiedAiApi(Object.assign(Object.assign({}, mockConfig), { fallbackStrategy: "round-robin" }));
            const orderByRoundRobin = api.orderByRoundRobin.bind(api);
            const providers = ["bedrock", "google", "meta"];
            // First call should start with first provider
            const ordered1 = orderByRoundRobin(providers);
            (0, globals_1.expect)(ordered1[0]).toBe("bedrock");
            // Simulate request count increase
            api.metrics.totalRequests = 1;
            const ordered2 = orderByRoundRobin(providers);
            (0, globals_1.expect)(ordered2[0]).toBe("google");
        });
        (0, globals_1.it)("should use domain-specific routing for target audience analysis", () => {
            const api = new unified_ai_api_1.UnifiedAiApi(Object.assign(Object.assign({}, mockConfig), { fallbackStrategy: "cost-optimized" }));
            const orderByDomain = api.orderByDomain.bind(api);
            const providers = ["bedrock", "google", "meta"];
            // Test audience analysis domain
            const audienceRequest = {
                prompt: "Analyze target audience demographics",
                context: { domain: "audience-analysis" },
            };
            const ordered = orderByDomain(providers, audienceRequest);
            (0, globals_1.expect)(ordered[0]).toBe("meta"); // Meta should be first for audience analysis
        });
        (0, globals_1.it)("should use domain-specific routing for persona analysis", () => {
            const api = new unified_ai_api_1.UnifiedAiApi(Object.assign(Object.assign({}, mockConfig), { fallbackStrategy: "cost-optimized" }));
            const orderByDomain = api.orderByDomain.bind(api);
            const providers = ["bedrock", "google", "meta"];
            // Test persona analysis domain
            const personaRequest = {
                prompt: "Create customer persona for restaurant",
                context: { domain: "persona-analysis" },
            };
            const ordered = orderByDomain(providers, personaRequest);
            (0, globals_1.expect)(ordered[0]).toBe("bedrock"); // Bedrock should be first for persona analysis
            (0, globals_1.expect)(ordered).toContain("meta"); // Meta should be included as fallback
        });
        (0, globals_1.it)("should use smart routing when enabled", () => {
            const api = new unified_ai_api_1.UnifiedAiApi(Object.assign(Object.assign({}, mockConfig), { enableSmartRouting: true }));
            const orderProvidersForDomain = api.orderProvidersForDomain.bind(api);
            const providers = ["bedrock", "google", "meta"];
            // Test system task
            const systemRequest = {
                prompt: "Create agent for restaurant management",
                context: { domain: "system" },
            };
            const systemOrdered = orderProvidersForDomain(systemRequest, providers);
            (0, globals_1.expect)(systemOrdered[0]).toBe("bedrock"); // Bedrock for system tasks
            // Test audience task
            const audienceRequest = {
                prompt: "Analyze target audience demographics",
                context: { domain: "audience" },
            };
            const audienceOrdered = orderProvidersForDomain(audienceRequest, providers);
            (0, globals_1.expect)(audienceOrdered[0]).toBe("meta"); // Meta for audience tasks
            // Test user task (default)
            const userRequest = {
                prompt: "Analyze restaurant visibility",
                context: { domain: "general" },
            };
            const userOrdered = orderProvidersForDomain(userRequest, providers);
            (0, globals_1.expect)(userOrdered[0]).toBe("google"); // Google for user tasks
        });
        (0, globals_1.it)("should detect task type from prompt keywords", () => {
            const api = new unified_ai_api_1.UnifiedAiApi(Object.assign(Object.assign({}, mockConfig), { enableSmartRouting: true }));
            const detectTaskType = api.detectTaskType.bind(api);
            // Test system keywords
            const systemRequest = {
                prompt: "Create agent for managing infrastructure",
                context: { domain: "general" },
            };
            (0, globals_1.expect)(detectTaskType(systemRequest)).toBe("system");
            // Test audience keywords
            const audienceRequest = {
                prompt: "Analyze zielgruppe and market segment",
                context: { domain: "general" },
            };
            (0, globals_1.expect)(detectTaskType(audienceRequest)).toBe("audience");
            // Test user keywords
            const userRequest = {
                prompt: "Restaurant analysis and visibility check",
                context: { domain: "general" },
            };
            (0, globals_1.expect)(detectTaskType(userRequest)).toBe("user");
        });
    });
    (0, globals_1.describe)("Circuit Breaker Integration", () => {
        (0, globals_1.it)("should skip providers with open circuit breakers", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock circuit breaker that's open for bedrock
            const mockCircuitBreaker = {
                getState: globals_1.jest.fn().mockReturnValue("open"),
                isOpen: globals_1.jest.fn().mockReturnValue(true),
                recordSuccess: globals_1.jest.fn(),
                recordFailure: globals_1.jest.fn(),
                reset: globals_1.jest.fn(),
                execute: globals_1.jest.fn(),
            };
            mocks.circuitBreakers.set("bedrock", mockCircuitBreaker);
            const availableProviders = yield api.getAvailableProviders();
            (0, globals_1.expect)(availableProviders).not.toContain("bedrock");
            (0, globals_1.expect)(availableProviders).toContain("meta");
            (0, globals_1.expect)(availableProviders).toContain("google");
        }));
        (0, globals_1.it)("should reset circuit breaker on manual reset", () => {
            const mockCircuitBreaker = {
                reset: globals_1.jest.fn(),
                getState: globals_1.jest.fn().mockReturnValue("closed"),
                recordSuccess: globals_1.jest.fn(),
                recordFailure: globals_1.jest.fn(),
                execute: globals_1.jest.fn(),
            };
            mocks.circuitBreakers.set("bedrock", mockCircuitBreaker);
            api.resetCircuitBreaker("bedrock");
            (0, globals_1.expect)(mockCircuitBreaker.reset).toHaveBeenCalled();
        });
    });
    (0, globals_1.describe)("Health Monitoring", () => {
        (0, globals_1.it)("should return health status for all providers", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const health = yield api.getProviderHealth();
            (0, globals_1.expect)(health).toHaveLength(3);
            (0, globals_1.expect)(health[0]).toMatchObject({
                provider: "meta",
                status: "healthy",
                latency: 0, // No latency data yet
                errorRate: 0, // No errors yet
            });
        }));
        (0, globals_1.it)("should determine correct health status based on metrics", () => {
            const determineHealthStatus = api.determineHealthStatus.bind(api);
            // Test with fresh provider (should be healthy)
            (0, globals_1.expect)(determineHealthStatus("meta")).toBe("healthy");
            // Simulate some latency and errors for testing
            api.providerStats.google = {
                latencies: [3000, 3000, 3000],
                errors: 1,
            };
            (0, globals_1.expect)(determineHealthStatus("google")).toBe("degraded");
            // Simulate high error rate
            api.providerStats.meta = { latencies: [6000, 6000], errors: 2 };
            (0, globals_1.expect)(determineHealthStatus("meta")).toBe("unhealthy");
        });
    });
    (0, globals_1.describe)("Metrics Tracking", () => {
        (0, globals_1.it)("should track successful requests", () => {
            const updateMetrics = api.updateMetrics.bind(api);
            updateMetrics("success", 500, 0.01);
            const metrics = api.getMetrics();
            (0, globals_1.expect)(metrics.totalRequests).toBe(1);
            (0, globals_1.expect)(metrics.successfulRequests).toBe(1);
            (0, globals_1.expect)(metrics.averageLatency).toBe(500);
            (0, globals_1.expect)(metrics.costPerRequest).toBe(0.01);
        });
        (0, globals_1.it)("should track failed requests", () => {
            const updateMetrics = api.updateMetrics.bind(api);
            updateMetrics("error", 1000, 0);
            const metrics = api.getMetrics();
            (0, globals_1.expect)(metrics.totalRequests).toBe(1);
            (0, globals_1.expect)(metrics.failedRequests).toBe(1);
            (0, globals_1.expect)(metrics.successfulRequests).toBe(0);
        });
        (0, globals_1.it)("should track cache hits", () => {
            const updateMetrics = api.updateMetrics.bind(api);
            updateMetrics("cache_hit", 0, 0);
            const metrics = api.getMetrics();
            (0, globals_1.expect)(metrics.cacheHitRate).toBe(1);
        });
    });
    (0, globals_1.describe)("Provider Management", () => {
        (0, globals_1.it)("should test provider connectivity", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest.mockResolvedValue({ success: true });
            const isConnected = yield api.testProvider("bedrock");
            (0, globals_1.expect)(isConnected).toBe(true);
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                prompt: "Test connectivity",
                provider: "bedrock",
            }));
        }));
        (0, globals_1.it)("should handle provider test failures", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest.mockRejectedValue(new Error("Connection failed"));
            const isConnected = yield api.testProvider("google");
            (0, globals_1.expect)(isConnected).toBe(false);
        }));
        (0, globals_1.it)("should enable/disable providers via feature flags", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield api.setProviderEnabled("meta", false);
            (0, globals_1.expect)(mocks.featureFlags.setProviderEnabled).toHaveBeenCalledWith("meta", false);
        }));
    });
    (0, globals_1.describe)("Cache Integration", () => {
        (0, globals_1.it)("should generate consistent cache keys", () => {
            const generateCacheKey = api.generateCacheKey.bind(api);
            const request1 = {
                prompt: "Test prompt",
                context: { domain: "general", locale: "de-DE" },
            };
            const request2 = {
                prompt: "Test prompt",
                context: { domain: "general", locale: "de-DE" },
            };
            const key1 = generateCacheKey(request1);
            const key2 = generateCacheKey(request2);
            (0, globals_1.expect)(key1).toBe(key2);
            (0, globals_1.expect)(key1).toMatch(/^ai_cache:/);
        });
        (0, globals_1.it)("should generate different cache keys for different requests", () => {
            const generateCacheKey = api.generateCacheKey.bind(api);
            const request1 = {
                prompt: "Test prompt 1",
                context: { domain: "general" },
            };
            const request2 = {
                prompt: "Test prompt 2",
                context: { domain: "general" },
            };
            const key1 = generateCacheKey(request1);
            const key2 = generateCacheKey(request2);
            (0, globals_1.expect)(key1).not.toBe(key2);
        });
    });
    (0, globals_1.describe)("Factory Functions", () => {
        (0, globals_1.it)("should create API with default configuration", () => {
            const api = (0, unified_ai_api_1.createUnifiedAiApi)();
            (0, globals_1.expect)(api).toBeInstanceOf(unified_ai_api_1.UnifiedAiApi);
        });
        (0, globals_1.it)("should merge custom configuration with defaults", () => {
            const customConfig = {
                fallbackStrategy: "latency-optimized",
                maxRetries: 5,
            };
            const api = (0, unified_ai_api_1.createUnifiedAiApi)(customConfig);
            (0, globals_1.expect)(api).toBeInstanceOf(unified_ai_api_1.UnifiedAiApi);
        });
    });
    (0, globals_1.describe)("Error Handling", () => {
        (0, globals_1.it)("should handle missing environment variables gracefully", () => {
            const originalEnv = process.env;
            process.env = {};
            (0, globals_1.expect)(() => (0, unified_ai_api_1.createUnifiedAiApi)()).not.toThrow();
            process.env = originalEnv;
        });
        (0, globals_1.it)("should handle malformed responses", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest.mockResolvedValue(null);
            const request = {
                prompt: "Test prompt",
                context: { domain: "general" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.success).toBe(false);
        }));
    });
    (0, globals_1.describe)("Shutdown", () => {
        (0, globals_1.it)("should cleanup resources on shutdown", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield api.shutdown();
            (0, globals_1.expect)(mocks.cache.clear).toHaveBeenCalled();
            (0, globals_1.expect)(mocks.monitor.shutdown).toHaveBeenCalled();
            // Check that circuit breakers were reset
            mocks.circuitBreakers.forEach((breaker) => {
                (0, globals_1.expect)(breaker.reset).toHaveBeenCalled();
            });
        }));
    });
});
(0, globals_1.describe)("Integration Tests", () => {
    (0, globals_1.it)("should handle complete request flow with all providers", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        const mocks = (0, test_mocks_1.setupUnifiedAiMocks)();
        const config = {
            providers: {
                bedrock: {
                    region: "eu-central-1",
                    models: ["anthropic.claude-3-5-sonnet-20241022-v2:0"],
                },
                google: {
                    apiKey: "test-key",
                    models: ["gemini-1.5-pro"],
                },
                meta: {
                    apiKey: "test-key",
                    models: ["meta-llama/Llama-3.2-90B-Vision-Instruct"],
                },
            },
            fallbackStrategy: "cost-optimized",
            enableCaching: true,
            enableMonitoring: true,
            enableFeatureFlags: true,
            maxRetries: 3,
            timeoutMs: 30000,
        };
        const api = new unified_ai_api_1.UnifiedAiApi(config);
        // Inject mocks
        api.featureFlags = mocks.featureFlags;
        api.multiProvider = mocks.multiProvider;
        api.cache = mocks.cache;
        api.monitor = mocks.monitor;
        mocks.multiProvider.routeRequest.mockResolvedValue({
            content: "Integration test response",
            provider: "meta",
            requestId: "integration-test-id",
            processingTime: 400,
            success: true,
        });
        const request = {
            prompt: "Integration test prompt",
            context: {
                domain: "culinary",
                locale: "de-DE",
                budgetTier: "low",
            },
            tools: [
                {
                    name: "get_recipe",
                    description: "Get recipe information",
                    parameters: { dish: { type: "string" } },
                },
            ],
        };
        const response = yield api.generateResponse(request);
        (0, globals_1.expect)(response.success).toBe(true);
        (0, globals_1.expect)(response.provider).toBe("meta"); // Cost-optimized should choose Meta first
        (0, globals_1.expect)(mocks.cache.set).toHaveBeenCalled(); // Should cache successful response
        (0, globals_1.expect)(mocks.monitor.recordLatency).toHaveBeenCalled(); // Should record metrics
        yield api.shutdown();
    }));
});
/**
 * ROUTING & INTEGRATION VALIDATION TESTS
 *
 * These tests specifically validate the requirements from tasks.md:
 * - Mind. 3 Provider angebunden (Bedrock + Google + Meta) über ein API
 * - Policies & Fallback funktional getestet
 * - Tool-Calling einheitlich über alle Provider
 * - Circuit-Breaker und Retry-Logic validiert
 */
(0, globals_1.describe)("Routing & Integration Requirements", () => {
    let api;
    let mocks;
    (0, globals_1.beforeEach)(() => {
        mocks = (0, test_mocks_1.setupUnifiedAiMocks)();
        const config = {
            providers: {
                bedrock: {
                    region: "eu-central-1",
                    models: ["anthropic.claude-3-5-sonnet-20241022-v2:0"],
                },
                google: {
                    apiKey: "test-google-key",
                    models: ["gemini-1.5-pro"],
                },
                meta: {
                    endpoint: "https://api.meta.com",
                    apiKey: "test-meta-key",
                    models: ["meta-llama/Llama-3.2-90B-Vision-Instruct"],
                },
            },
            fallbackStrategy: "cost-optimized",
            enableCaching: true,
            enableMonitoring: true,
            enableFeatureFlags: true,
            maxRetries: 3,
            timeoutMs: 30000,
        };
        api = new unified_ai_api_1.UnifiedAiApi(config);
        // Inject mocks
        api.monitor = mocks.monitor;
        api.cache = mocks.cache;
        api.circuitBreakers = mocks.circuitBreakers;
        api.featureFlags = mocks.featureFlags;
        api.multiProvider = mocks.multiProvider;
        api.router = mocks.router;
    });
    (0, globals_1.describe)("✅ Mind. 3 Provider angebunden (Bedrock + Google + Meta) über ein API", () => {
        (0, globals_1.it)("should have exactly 3 providers configured", () => {
            const providers = api.getAvailableProviders();
            (0, globals_1.expect)(providers).toHaveLength(3);
            (0, globals_1.expect)(providers).toContain("meta");
            (0, globals_1.expect)(providers).toContain("bedrock");
            (0, globals_1.expect)(providers).toContain("google");
        });
        (0, globals_1.it)("should route requests through unified API to Bedrock", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock to return only Bedrock as available
            globals_1.jest.spyOn(api, "getAvailableProviders").mockReturnValue(["bedrock"]);
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Bedrock response",
                provider: "bedrock",
                requestId: "bedrock-test",
                processingTime: 600,
                success: true,
            });
            const request = {
                prompt: "Test Bedrock integration",
                context: { domain: "general", budgetTier: "premium" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("bedrock");
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                prompt: "Test Bedrock integration",
                context: globals_1.expect.objectContaining({ budgetTier: "premium" }),
            }));
        }));
        (0, globals_1.it)("should route requests through unified API to Google", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock to return only Google as available
            globals_1.jest.spyOn(api, "getAvailableProviders").mockReturnValue(["google"]);
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Google response",
                provider: "google",
                requestId: "google-test",
                processingTime: 700,
                success: true,
            });
            const request = {
                prompt: "Test Google integration",
                context: { domain: "general", budgetTier: "standard" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("google");
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                prompt: "Test Google integration",
                context: globals_1.expect.objectContaining({ budgetTier: "standard" }),
            }));
        }));
        (0, globals_1.it)("should route requests through unified API to Meta", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Meta response",
                provider: "meta",
                requestId: "meta-test",
                processingTime: 800,
                success: true,
            });
            const request = {
                prompt: "Test Meta integration",
                context: { domain: "general", budgetTier: "low" }, // Should route to Meta for cost optimization
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("meta");
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                prompt: "Test Meta integration",
                context: globals_1.expect.objectContaining({ budgetTier: "low" }),
            }));
        }));
        (0, globals_1.it)("should provide unified API interface for all providers", () => {
            // Verify all providers have the same interface
            (0, globals_1.expect)(api.testProvider).toBeDefined();
            (0, globals_1.expect)(api.generateResponse).toBeDefined();
            (0, globals_1.expect)(api.getProviderHealth).toBeDefined();
            (0, globals_1.expect)(api.getProviderModels).toBeDefined();
            // Test that all providers can be tested through the same interface
            (0, globals_1.expect)(() => api.testProvider("bedrock")).not.toThrow();
            (0, globals_1.expect)(() => api.testProvider("google")).not.toThrow();
            (0, globals_1.expect)(() => api.testProvider("meta")).not.toThrow();
        });
    });
    (0, globals_1.describe)("✅ Policies & Fallback funktional getestet", () => {
        (0, globals_1.it)("should implement cost-optimized routing policy", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const api = new unified_ai_api_1.UnifiedAiApi({
                providers: {
                    bedrock: { region: "eu-central-1", models: ["claude-3-5-sonnet"] },
                    google: { apiKey: "test", models: ["gemini-1.5-pro"] },
                    meta: { apiKey: "test", models: ["llama-3.2-90b"] },
                },
                fallbackStrategy: "cost-optimized",
            });
            // Inject mocks
            api.multiProvider = mocks.multiProvider;
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Cost-optimized response",
                provider: "meta", // Should choose Meta first (lowest cost)
                requestId: "cost-test",
                processingTime: 800,
                success: true,
            });
            const request = {
                prompt: "Test cost optimization",
                context: { domain: "general" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.provider).toBe("meta");
        }));
        (0, globals_1.it)("should implement latency-optimized routing policy", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const api = new unified_ai_api_1.UnifiedAiApi({
                providers: {
                    bedrock: { region: "eu-central-1", models: ["claude-3-5-sonnet"] },
                    google: { apiKey: "test", models: ["gemini-1.5-pro"] },
                    meta: { apiKey: "test", models: ["llama-3.2-90b"] },
                },
                fallbackStrategy: "latency-optimized",
            });
            // Inject mocks
            api.multiProvider = mocks.multiProvider;
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Latency-optimized response",
                provider: "bedrock", // Should choose Bedrock first (lowest latency)
                requestId: "latency-test",
                processingTime: 600,
                success: true,
            });
            const request = {
                prompt: "Test latency optimization",
                context: { domain: "general" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.provider).toBe("bedrock");
        }));
        (0, globals_1.it)("should fallback from Bedrock to Google to Meta on failures", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest
                .mockRejectedValueOnce(new Error("Bedrock failed"))
                .mockRejectedValueOnce(new Error("Google failed"))
                .mockResolvedValueOnce({
                content: "Meta fallback response",
                provider: "meta",
                requestId: "fallback-test",
                processingTime: 800,
                success: true,
            });
            const request = {
                prompt: "Test fallback chain",
                context: { domain: "general" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("meta");
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledTimes(3);
        }));
        (0, globals_1.it)("should respect provider availability from feature flags", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock feature flags to disable Bedrock
            mocks.featureFlags.isProviderEnabled.mockImplementation((provider) => {
                return provider !== "bedrock"; // Disable Bedrock
            });
            const availableProviders = yield api.getAvailableProviders();
            (0, globals_1.expect)(availableProviders).not.toContain("bedrock");
            (0, globals_1.expect)(availableProviders).toContain("google");
            (0, globals_1.expect)(availableProviders).toContain("meta");
        }));
        (0, globals_1.it)("should handle budget-based routing policies", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Budget-aware response",
                provider: "meta", // Should choose Meta for low budget
                requestId: "budget-test",
                processingTime: 800,
                success: true,
            });
            const request = {
                prompt: "Test budget routing",
                context: {
                    domain: "general",
                    budgetTier: "low", // Should trigger cost-optimized routing
                },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.provider).toBe("meta");
        }));
    });
    (0, globals_1.describe)("✅ Tool-Calling einheitlich über alle Provider", () => {
        const toolRequest = {
            prompt: "Get weather information for Berlin",
            context: { domain: "general" },
            tools: [
                {
                    name: "get_weather",
                    description: "Get current weather for a location",
                    parameters: {
                        location: { type: "string", description: "City name" },
                        units: { type: "string", enum: ["celsius", "fahrenheit"] },
                    },
                },
            ],
        };
        (0, globals_1.it)("should support tool calling with Bedrock", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Weather in Berlin: 15°C, cloudy",
                provider: "bedrock",
                requestId: "bedrock-tool-test",
                processingTime: 600,
                success: true,
                toolCalls: [
                    {
                        name: "get_weather",
                        arguments: { location: "Berlin", units: "celsius" },
                        result: "15°C, cloudy",
                    },
                ],
            });
            const response = yield api.generateResponse(toolRequest);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("bedrock");
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                tools: globals_1.expect.arrayContaining([
                    globals_1.expect.objectContaining({
                        name: "get_weather",
                        description: "Get current weather for a location",
                    }),
                ]),
            }));
        }));
        (0, globals_1.it)("should support tool calling with Google", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock Bedrock to fail, so Google is used as fallback
            mocks.multiProvider.routeRequest
                .mockRejectedValueOnce(new Error("Bedrock failed"))
                .mockResolvedValueOnce({
                content: "Weather in Berlin: 15°C, cloudy",
                provider: "google",
                requestId: "google-tool-test",
                processingTime: 700,
                success: true,
                toolCalls: [
                    {
                        name: "get_weather",
                        arguments: { location: "Berlin", units: "celsius" },
                        result: "15°C, cloudy",
                    },
                ],
            });
            const response = yield api.generateResponse(toolRequest);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("google");
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledTimes(2);
        }));
        (0, globals_1.it)("should support tool calling with Meta", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Weather in Berlin: 15°C, cloudy",
                provider: "meta",
                requestId: "meta-tool-test",
                processingTime: 800,
                success: true,
                toolCalls: [
                    {
                        name: "get_weather",
                        arguments: { location: "Berlin", units: "celsius" },
                        result: "15°C, cloudy",
                    },
                ],
            });
            const response = yield api.generateResponse(toolRequest);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("meta");
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                tools: globals_1.expect.arrayContaining([
                    globals_1.expect.objectContaining({
                        name: "get_weather",
                        description: "Get current weather for a location",
                    }),
                ]),
            }));
        }));
        (0, globals_1.it)("should normalize tool schemas across providers", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const complexToolRequest = {
                prompt: "Process restaurant data",
                context: { domain: "culinary" },
                tools: [
                    {
                        name: "analyze_menu",
                        description: "Analyze restaurant menu items",
                        parameters: {
                            menu_items: {
                                type: "array",
                                items: {
                                    type: "object",
                                    properties: {
                                        name: { type: "string" },
                                        price: { type: "number" },
                                        category: {
                                            type: "string",
                                            enum: ["appetizer", "main", "dessert"],
                                        },
                                    },
                                    required: ["name", "price"],
                                },
                            },
                            analysis_type: {
                                type: "string",
                                enum: ["pricing", "popularity", "nutrition"],
                            },
                        },
                    },
                ],
            };
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Menu analysis complete",
                provider: "bedrock",
                requestId: "complex-tool-test",
                processingTime: 1200,
                success: true,
            });
            const response = yield api.generateResponse(complexToolRequest);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                tools: globals_1.expect.arrayContaining([
                    globals_1.expect.objectContaining({
                        name: "analyze_menu",
                        parameters: globals_1.expect.objectContaining({
                            menu_items: globals_1.expect.objectContaining({
                                type: "array",
                                items: globals_1.expect.objectContaining({
                                    properties: globals_1.expect.objectContaining({
                                        name: { type: "string" },
                                        price: { type: "number" },
                                    }),
                                }),
                            }),
                        }),
                    }),
                ]),
            }));
        }));
        (0, globals_1.it)("should handle tool calling failures gracefully", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Tool call failed, providing text response instead",
                provider: "bedrock",
                requestId: "tool-fail-test",
                processingTime: 600,
                success: true,
                toolCalls: [],
                error: "Tool execution failed",
            });
            const response = yield api.generateResponse(toolRequest);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.text).toContain("Tool call failed");
        }));
    });
    (0, globals_1.describe)("✅ Circuit-Breaker und Retry-Logic validiert", () => {
        (0, globals_1.it)("should open circuit breaker after consecutive failures", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockCircuitBreaker = {
                getState: globals_1.jest.fn().mockReturnValue("closed"),
                recordSuccess: globals_1.jest.fn(),
                recordFailure: globals_1.jest.fn(),
                reset: globals_1.jest.fn(),
                execute: globals_1.jest.fn(),
            };
            mocks.circuitBreakers.set("bedrock", mockCircuitBreaker);
            // Simulate multiple failures
            mocks.multiProvider.routeRequest.mockRejectedValue(new Error("Provider failed"));
            const request = {
                prompt: "Test circuit breaker",
                context: { domain: "general" },
            };
            // This should trigger circuit breaker logic
            yield api.generateResponse(request);
            (0, globals_1.expect)(mockCircuitBreaker.recordFailure).toHaveBeenCalled();
        }));
        (0, globals_1.it)("should skip providers with open circuit breakers", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const openCircuitBreaker = {
                getState: globals_1.jest.fn().mockReturnValue("open"),
                recordSuccess: globals_1.jest.fn(),
                recordFailure: globals_1.jest.fn(),
                reset: globals_1.jest.fn(),
                execute: globals_1.jest.fn(),
            };
            const closedCircuitBreaker = {
                getState: globals_1.jest.fn().mockReturnValue("closed"),
                recordSuccess: globals_1.jest.fn(),
                recordFailure: globals_1.jest.fn(),
                reset: globals_1.jest.fn(),
                execute: globals_1.jest.fn(),
            };
            mocks.circuitBreakers.set("bedrock", openCircuitBreaker);
            mocks.circuitBreakers.set("google", closedCircuitBreaker);
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Fallback response",
                provider: "meta",
                requestId: "circuit-skip-test",
                processingTime: 800,
                success: true,
            });
            const request = {
                prompt: "Test circuit breaker skip",
                context: { domain: "general" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(response.provider).toBe("meta"); // Should skip Bedrock due to open circuit, meta is cheapest
        }));
        (0, globals_1.it)("should implement exponential backoff retry logic", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            let attemptCount = 0;
            mocks.multiProvider.routeRequest.mockImplementation(() => {
                attemptCount++;
                if (attemptCount < 3) {
                    return Promise.reject(new Error("Temporary failure"));
                }
                return Promise.resolve({
                    content: "Success after retries",
                    provider: "bedrock",
                    requestId: "retry-test",
                    processingTime: 600,
                    success: true,
                });
            });
            const request = {
                prompt: "Test retry logic",
                context: { domain: "general" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(attemptCount).toBe(3); // Should have retried 2 times before success
            (0, globals_1.expect)(mocks.multiProvider.routeRequest).toHaveBeenCalledTimes(3);
        }));
        (0, globals_1.it)("should respect maximum retry limits", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const api = new unified_ai_api_1.UnifiedAiApi({
                providers: {
                    bedrock: { region: "eu-central-1", models: ["claude-3-5-sonnet"] },
                    google: { apiKey: "x", models: ["gemini-1.5-pro"] },
                    meta: { apiKey: "x", models: ["llama-3.2-11b"] },
                },
                fallbackStrategy: "round-robin",
                enableCaching: false,
                enableMonitoring: false,
                enableFeatureFlags: false,
                maxRetries: 2, // Initial + 2 retries = 3 Versuche total
                timeoutMs: 2000,
                // @ts-ignore
                backoffBaseMs: 5,
            });
            // Nur Bedrock zurückgeben → kein Fallback möglich
            globals_1.jest
                .spyOn(api, "getAvailableProviders")
                .mockReturnValue(["bedrock"]);
            // Multi-Provider Routing mocken: 3 Aufrufe -> 3x Fehler
            const routeSpy = globals_1.jest
                .spyOn(api.multiProvider, "routeRequest")
                .mockRejectedValue(new Error("Persistent failure"));
            // Test Expectations:
            const req = {
                prompt: "ping",
                context: { domain: "test", locale: "de-DE" },
            };
            const res = yield api.generateResponse(req);
            (0, globals_1.expect)(res.success).toBe(false);
            // Initial (attempt=0) + 2 Retries (attempt=1..2) = 3 Calls
            (0, globals_1.expect)(routeSpy).toHaveBeenCalledTimes(3);
        }));
        (0, globals_1.it)("should reset circuit breaker on successful requests", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockCircuitBreaker = {
                getState: globals_1.jest.fn().mockReturnValue("half-open"),
                isOpen: globals_1.jest.fn().mockReturnValue(false),
                recordSuccess: globals_1.jest.fn(),
                recordFailure: globals_1.jest.fn(),
                reset: globals_1.jest.fn(),
                execute: globals_1.jest.fn(),
            };
            // Inject the mock circuit breaker into the existing api instance
            api.circuitBreakers.set("bedrock", mockCircuitBreaker);
            // Mock getAvailableProviders to ensure bedrock is available
            globals_1.jest
                .spyOn(api, "getAvailableProviders")
                .mockResolvedValue(["bedrock"]);
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Success after circuit breaker recovery",
                provider: "bedrock",
                requestId: "circuit-recovery-test",
                latencyMs: 600,
                success: true,
            });
            const request = {
                prompt: "Test circuit breaker recovery",
                context: { domain: "general" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.success).toBe(true);
            (0, globals_1.expect)(mockCircuitBreaker.recordSuccess).toHaveBeenCalled();
        }));
        (0, globals_1.it)("should handle timeout scenarios with circuit breaker", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockCircuitBreaker = {
                getState: globals_1.jest.fn().mockReturnValue("closed"),
                recordSuccess: globals_1.jest.fn(),
                recordFailure: globals_1.jest.fn(),
                reset: globals_1.jest.fn(),
                execute: globals_1.jest.fn(),
            };
            mocks.circuitBreakers.set("bedrock", mockCircuitBreaker);
            // Simulate timeout
            mocks.multiProvider.routeRequest.mockRejectedValue(new Error("Request timeout after 30000ms"));
            const request = {
                prompt: "Test timeout handling",
                context: { domain: "general" },
            };
            const response = yield api.generateResponse(request);
            (0, globals_1.expect)(response.success).toBe(false);
            (0, globals_1.expect)(response.error).toContain("timeout");
            (0, globals_1.expect)(mockCircuitBreaker.recordFailure).toHaveBeenCalled();
        }));
    });
    (0, globals_1.describe)("Integration Validation Summary", () => {
        (0, globals_1.it)("should validate all routing & integration requirements are met", () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // This test serves as a comprehensive validation that all requirements are implemented
            // ✅ 3 Provider angebunden
            const providers = api.getAvailableProviders();
            (0, globals_1.expect)(providers).toEqual(globals_1.expect.arrayContaining(["bedrock", "google", "meta"]));
            (0, globals_1.expect)(providers).toHaveLength(3);
            // ✅ Policies & Fallback funktional
            (0, globals_1.expect)(api.generateResponse).toBeDefined();
            (0, globals_1.expect)(typeof api.orderByCost).toBe("function");
            (0, globals_1.expect)(typeof api.orderByLatency).toBe("function");
            (0, globals_1.expect)(typeof api.orderByRoundRobin).toBe("function");
            // ✅ Tool-Calling einheitlich
            const toolRequest = {
                prompt: "Test unified tool calling",
                context: { domain: "general" },
                tools: [{ name: "test_tool", description: "Test", parameters: {} }],
            };
            mocks.multiProvider.routeRequest.mockResolvedValue({
                content: "Tool calling works",
                provider: "bedrock",
                requestId: "validation-test",
                processingTime: 600,
                success: true,
            });
            const response = yield api.generateResponse(toolRequest);
            (0, globals_1.expect)(response.success).toBe(true);
            // ✅ Circuit-Breaker und Retry-Logic
            (0, globals_1.expect)(mocks.circuitBreakers.size).toBeGreaterThan(0);
            (0, globals_1.expect)(api.resetCircuitBreaker).toBeDefined();
            (0, globals_1.expect)(typeof api.getAvailableProviders).toBe("function");
            // All requirements validated ✅
            console.log("✅ All Routing & Integration requirements validated successfully!");
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hdGJha2gtdmlzaWJpbGl0eS1ib29zdC4yMDI1MDkyMC9zcmMvbGliL2FpLW9yY2hlc3RyYXRvci9fX3Rlc3RzX18vdW5pZmllZC1haS1hcGkudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7O0FBRUgsMkNBT3VCO0FBQ3ZCLDhDQUFvRDtBQUVwRCxzREFJMkI7QUFFM0IsSUFBQSxrQkFBUSxFQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7SUFDNUIsSUFBSSxHQUFpQixDQUFDO0lBQ3RCLElBQUksVUFBOEIsQ0FBQztJQUNuQyxJQUFJLEtBQTZDLENBQUM7SUFFbEQsSUFBQSxvQkFBVSxFQUFDLEdBQUcsRUFBRTtRQUNkLGNBQWM7UUFDZCxLQUFLLEdBQUcsSUFBQSxnQ0FBbUIsR0FBRSxDQUFDO1FBRTlCLFVBQVUsR0FBRztZQUNYLFNBQVMsRUFBRTtnQkFDVCxPQUFPLEVBQUU7b0JBQ1AsTUFBTSxFQUFFLGNBQWM7b0JBQ3RCLE1BQU0sRUFBRSxDQUFDLDJDQUEyQyxDQUFDO2lCQUN0RDtnQkFDRCxNQUFNLEVBQUU7b0JBQ04sTUFBTSxFQUFFLGlCQUFpQjtvQkFDekIsTUFBTSxFQUFFLENBQUMsZ0JBQWdCLENBQUM7aUJBQzNCO2dCQUNELElBQUksRUFBRTtvQkFDSixRQUFRLEVBQUUsc0JBQXNCO29CQUNoQyxNQUFNLEVBQUUsZUFBZTtvQkFDdkIsTUFBTSxFQUFFLENBQUMsMENBQTBDLENBQUM7aUJBQ3JEO2FBQ0Y7WUFDRCxnQkFBZ0IsRUFBRSxTQUFTO1lBQzNCLGFBQWEsRUFBRSxJQUFJO1lBQ25CLGdCQUFnQixFQUFFLElBQUk7WUFDdEIsa0JBQWtCLEVBQUUsSUFBSTtZQUN4QixVQUFVLEVBQUUsQ0FBQztZQUNiLFNBQVMsRUFBRSxLQUFLO1NBQ2pCLENBQUM7UUFFRixHQUFHLEdBQUcsSUFBSSw2QkFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRW5DLGVBQWU7UUFDZCxHQUFXLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7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c2Vycy9tYXRiYWtoLXZpc2liaWxpdHktYm9vc3QuMjAyNTA5MjAvc3JjL2xpYi9haS1vcmNoZXN0cmF0b3IvX190ZXN0c19fL3VuaWZpZWQtYWktYXBpLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbmlmaWVkIEFJIEFQSSBUZXN0IFN1aXRlXG4gKlxuICogVGVzdHMgdGhlIGVudGVycHJpc2UtZ3JhZGUgbXVsdGktcHJvdmlkZXIgaW50ZWdyYXRpb24gd2l0aCBjb21wbGV0ZSBtb2Nrc1xuICovXG5cbmltcG9ydCB7XG4gIGFmdGVyRWFjaCxcbiAgYmVmb3JlRWFjaCxcbiAgZGVzY3JpYmUsXG4gIGV4cGVjdCxcbiAgaXQsXG4gIGplc3QsXG59IGZyb20gXCJAamVzdC9nbG9iYWxzXCI7XG5pbXBvcnQgeyBzZXR1cFVuaWZpZWRBaU1vY2tzIH0gZnJvbSBcIi4uL3Rlc3QtbW9ja3NcIjtcbmltcG9ydCB7IEFpUmVxdWVzdCwgUHJvdmlkZXIgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVVuaWZpZWRBaUFwaSxcbiAgVW5pZmllZEFpQXBpLFxuICBVbmlmaWVkQWlBcGlDb25maWcsXG59IGZyb20gXCIuLi91bmlmaWVkLWFpLWFwaVwiO1xuXG5kZXNjcmliZShcIlVuaWZpZWRBaUFwaVwiLCAoKSA9PiB7XG4gIGxldCBhcGk6IFVuaWZpZWRBaUFwaTtcbiAgbGV0IG1vY2tDb25maWc6IFVuaWZpZWRBaUFwaUNvbmZpZztcbiAgbGV0IG1vY2tzOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXR1cFVuaWZpZWRBaU1vY2tzPjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBTZXR1cCBtb2Nrc1xuICAgIG1vY2tzID0gc2V0dXBVbmlmaWVkQWlNb2NrcygpO1xuXG4gICAgbW9ja0NvbmZpZyA9IHtcbiAgICAgIHByb3ZpZGVyczoge1xuICAgICAgICBiZWRyb2NrOiB7XG4gICAgICAgICAgcmVnaW9uOiBcImV1LWNlbnRyYWwtMVwiLFxuICAgICAgICAgIG1vZGVsczogW1wiYW50aHJvcGljLmNsYXVkZS0zLTUtc29ubmV0LTIwMjQxMDIyLXYyOjBcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIGdvb2dsZToge1xuICAgICAgICAgIGFwaUtleTogXCJ0ZXN0LWdvb2dsZS1rZXlcIixcbiAgICAgICAgICBtb2RlbHM6IFtcImdlbWluaS0xLjUtcHJvXCJdLFxuICAgICAgICB9LFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgZW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGkubWV0YS5jb21cIixcbiAgICAgICAgICBhcGlLZXk6IFwidGVzdC1tZXRhLWtleVwiLFxuICAgICAgICAgIG1vZGVsczogW1wibWV0YS1sbGFtYS9MbGFtYS0zLjItOTBCLVZpc2lvbi1JbnN0cnVjdFwiXSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBmYWxsYmFja1N0cmF0ZWd5OiBcImRlZmF1bHRcIixcbiAgICAgIGVuYWJsZUNhY2hpbmc6IHRydWUsXG4gICAgICBlbmFibGVNb25pdG9yaW5nOiB0cnVlLFxuICAgICAgZW5hYmxlRmVhdHVyZUZsYWdzOiB0cnVlLFxuICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgIHRpbWVvdXRNczogMzAwMDAsXG4gICAgfTtcblxuICAgIGFwaSA9IG5ldyBVbmlmaWVkQWlBcGkobW9ja0NvbmZpZyk7XG5cbiAgICAvLyBJbmplY3QgbW9ja3NcbiAgICAoYXBpIGFzIGFueSkubW9uaXRvciA9IG1vY2tzLm1vbml0b3I7XG4gICAgKGFwaSBhcyBhbnkpLmNhY2hlID0gbW9ja3MuY2FjaGU7XG4gICAgKGFwaSBhcyBhbnkpLmNpcmN1aXRCcmVha2VycyA9IG1vY2tzLmNpcmN1aXRCcmVha2VycztcbiAgICAoYXBpIGFzIGFueSkuZmVhdHVyZUZsYWdzID0gbW9ja3MuZmVhdHVyZUZsYWdzO1xuICAgIChhcGkgYXMgYW55KS5tdWx0aVByb3ZpZGVyID0gbW9ja3MubXVsdGlQcm92aWRlcjtcbiAgICAoYXBpIGFzIGFueSkucm91dGVyID0gbW9ja3Mucm91dGVyO1xuICB9KTtcblxuICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgIC8vIERvbid0IGNhbGwgc2h1dGRvd24gaW4gYWZ0ZXJFYWNoIGFzIGl0IGNhdXNlcyBpc3N1ZXNcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJDb25zdHJ1Y3RvclwiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGFsbCBwcm92aWRlcnNcIiwgKCkgPT4ge1xuICAgICAgZXhwZWN0KGFwaSkudG9CZUluc3RhbmNlT2YoVW5pZmllZEFpQXBpKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGJ1aWxkIGNvcnJlY3QgbW9kZWwgc3BlY2lmaWNhdGlvbnNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgbW9kZWxzID0gYXBpLmdldFByb3ZpZGVyTW9kZWxzKFwiYmVkcm9ja1wiKTtcbiAgICAgIGV4cGVjdChtb2RlbHMpLnRvQ29udGFpbihcImFudGhyb3BpYy5jbGF1ZGUtMy01LXNvbm5ldC0yMDI0MTAyMi12MjowXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaW5pdGlhbGl6ZSBjaXJjdWl0IGJyZWFrZXJzIGZvciBhbGwgcHJvdmlkZXJzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IGFwaS5nZXRQcm92aWRlckhlYWx0aCgpO1xuICAgICAgZXhwZWN0KGhlYWx0aCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KGhlYWx0aC5tYXAoKGgpID0+IGgucHJvdmlkZXIpKS50b0VxdWFsKFtcbiAgICAgICAgXCJtZXRhXCIsXG4gICAgICAgIFwiZ29vZ2xlXCIsXG4gICAgICAgIFwiYmVkcm9ja1wiLFxuICAgICAgXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiZ2VuZXJhdGVSZXNwb25zZVwiLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1JlcXVlc3Q6IEFpUmVxdWVzdCA9IHtcbiAgICAgIHByb21wdDogXCJUZXN0IHByb21wdFwiLFxuICAgICAgY29udGV4dDoge1xuICAgICAgICBkb21haW46IFwic3lzdGVtXCIsIC8vIFN5c3RlbSB0YXNrIC0+IEJlZHJvY2sgc2hvdWxkIGJlIGZpcnN0XG4gICAgICAgIGxvY2FsZTogXCJkZS1ERVwiLFxuICAgICAgICBidWRnZXRUaWVyOiBcInN0YW5kYXJkXCIsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICBpdChcInNob3VsZCBnZW5lcmF0ZSByZXNwb25zZSB3aXRoIHByaW1hcnkgcHJvdmlkZXJcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBjb250ZW50OiBcIlRlc3QgcmVzcG9uc2VcIixcbiAgICAgICAgcHJvdmlkZXI6IFwiYmVkcm9ja1wiIGFzIFByb3ZpZGVyLFxuICAgICAgICByZXF1ZXN0SWQ6IFwidGVzdC1yZXF1ZXN0LWlkXCIsXG4gICAgICAgIHByb2Nlc3NpbmdUaW1lOiA1MDAsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2VuZXJhdGVSZXNwb25zZShtb2NrUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnByb3ZpZGVyKS50b0JlKFwiYmVkcm9ja1wiKTtcbiAgICAgIGV4cGVjdChtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBwcm9tcHQ6IFwiVGVzdCBwcm9tcHRcIixcbiAgICAgICAgICBjb250ZXh0OiBtb2NrUmVxdWVzdC5jb250ZXh0LFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGZhbGxiYWNrIHRvIHNlY29uZGFyeSBwcm92aWRlciBvbiBmYWlsdXJlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3NSZXNwb25zZSA9IHtcbiAgICAgICAgY29udGVudDogXCJGYWxsYmFjayByZXNwb25zZVwiLFxuICAgICAgICBwcm92aWRlcjogXCJnb29nbGVcIiBhcyBQcm92aWRlcixcbiAgICAgICAgcmVxdWVzdElkOiBcInRlc3QtcmVxdWVzdC1pZFwiLFxuICAgICAgICBwcm9jZXNzaW5nVGltZTogNzAwLFxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgbW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoXCJCZWRyb2NrIGZhaWxlZFwiKSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShzdWNjZXNzUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKG1vY2tSZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UucHJvdmlkZXIpLnRvQmUoXCJnb29nbGVcIik7XG4gICAgICBleHBlY3QobW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHJldHVybiBjYWNoZWQgcmVzcG9uc2Ugd2hlbiBhdmFpbGFibGVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2FjaGVkUmVzcG9uc2UgPSB7XG4gICAgICAgIGNvbnRlbnQ6IFwiQ2FjaGVkIHJlc3BvbnNlXCIsXG4gICAgICAgIHByb3ZpZGVyOiBcImJlZHJvY2tcIiBhcyBQcm92aWRlcixcbiAgICAgICAgcmVxdWVzdElkOiBcImNhY2hlZC1yZXF1ZXN0LWlkXCIsXG4gICAgICAgIHByb2Nlc3NpbmdUaW1lOiA1MCxcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tzLmNhY2hlLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoY2FjaGVkUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKG1vY2tSZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbnRlbnQpLnRvQmUoXCJDYWNoZWQgcmVzcG9uc2VcIik7XG4gICAgICBleHBlY3QobW9ja3MuY2FjaGUuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYW5kbGUgdGltZW91dCBlcnJvcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBhIHJlcXVlc3QgdGhhdCB0aW1lcyBvdXRcbiAgICAgIG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0Lm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoXCJSZXF1ZXN0IHRpbWVvdXQgYWZ0ZXIgMzAwMDBtc1wiKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2VuZXJhdGVSZXNwb25zZShtb2NrUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9Db250YWluKFwidGltZW91dFwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBhbGwgcHJvdmlkZXJzIGZhaWxpbmdcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcihcIlByb3ZpZGVyIGZhaWxlZFwiKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2VuZXJhdGVSZXNwb25zZShtb2NrUmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9Db250YWluKFwiQWxsIHByb3ZpZGVycyBmYWlsZWRcIik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiUHJvdmlkZXIgT3JkZXJpbmcgU3RyYXRlZ2llc1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgb3JkZXIgcHJvdmlkZXJzIGJ5IGNvc3Qgd2hlbiBjb3N0LW9wdGltaXplZFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBhcGkgPSBuZXcgVW5pZmllZEFpQXBpKHtcbiAgICAgICAgLi4ubW9ja0NvbmZpZyxcbiAgICAgICAgZmFsbGJhY2tTdHJhdGVneTogXCJjb3N0LW9wdGltaXplZFwiLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjY2VzcyBwcml2YXRlIG1ldGhvZCBmb3IgdGVzdGluZ1xuICAgICAgY29uc3Qgb3JkZXJCeUNvc3QgPSAoYXBpIGFzIGFueSkub3JkZXJCeUNvc3QuYmluZChhcGkpO1xuICAgICAgY29uc3QgcHJvdmlkZXJzOiBQcm92aWRlcltdID0gW1wiYmVkcm9ja1wiLCBcImdvb2dsZVwiLCBcIm1ldGFcIl07XG4gICAgICBjb25zdCBvcmRlcmVkID0gb3JkZXJCeUNvc3QocHJvdmlkZXJzKTtcblxuICAgICAgZXhwZWN0KG9yZGVyZWRbMF0pLnRvQmUoXCJtZXRhXCIpOyAvLyBMb3dlc3QgY29zdFxuICAgICAgZXhwZWN0KG9yZGVyZWRbMl0pLnRvQmUoXCJiZWRyb2NrXCIpOyAvLyBIaWdoZXN0IGNvc3RcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIG9yZGVyIHByb3ZpZGVycyBieSBsYXRlbmN5IHdoZW4gbGF0ZW5jeS1vcHRpbWl6ZWRcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgYXBpID0gbmV3IFVuaWZpZWRBaUFwaSh7XG4gICAgICAgIC4uLm1vY2tDb25maWcsXG4gICAgICAgIGZhbGxiYWNrU3RyYXRlZ3k6IFwibGF0ZW5jeS1vcHRpbWl6ZWRcIixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvcmRlckJ5TGF0ZW5jeSA9IChhcGkgYXMgYW55KS5vcmRlckJ5TGF0ZW5jeS5iaW5kKGFwaSk7XG4gICAgICBjb25zdCBwcm92aWRlcnM6IFByb3ZpZGVyW10gPSBbXCJiZWRyb2NrXCIsIFwiZ29vZ2xlXCIsIFwibWV0YVwiXTtcbiAgICAgIGNvbnN0IG9yZGVyZWQgPSBvcmRlckJ5TGF0ZW5jeShwcm92aWRlcnMpO1xuXG4gICAgICBleHBlY3Qob3JkZXJlZFswXSkudG9CZShcImJlZHJvY2tcIik7IC8vIEZhc3Rlc3RcbiAgICAgIGV4cGVjdChvcmRlcmVkWzJdKS50b0JlKFwibWV0YVwiKTsgLy8gU2xvd2VzdFxuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgdXNlIHJvdW5kLXJvYmluIHN0cmF0ZWd5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaSA9IG5ldyBVbmlmaWVkQWlBcGkoe1xuICAgICAgICAuLi5tb2NrQ29uZmlnLFxuICAgICAgICBmYWxsYmFja1N0cmF0ZWd5OiBcInJvdW5kLXJvYmluXCIsXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb3JkZXJCeVJvdW5kUm9iaW4gPSAoYXBpIGFzIGFueSkub3JkZXJCeVJvdW5kUm9iaW4uYmluZChhcGkpO1xuICAgICAgY29uc3QgcHJvdmlkZXJzOiBQcm92aWRlcltdID0gW1wiYmVkcm9ja1wiLCBcImdvb2dsZVwiLCBcIm1ldGFcIl07XG5cbiAgICAgIC8vIEZpcnN0IGNhbGwgc2hvdWxkIHN0YXJ0IHdpdGggZmlyc3QgcHJvdmlkZXJcbiAgICAgIGNvbnN0IG9yZGVyZWQxID0gb3JkZXJCeVJvdW5kUm9iaW4ocHJvdmlkZXJzKTtcbiAgICAgIGV4cGVjdChvcmRlcmVkMVswXSkudG9CZShcImJlZHJvY2tcIik7XG5cbiAgICAgIC8vIFNpbXVsYXRlIHJlcXVlc3QgY291bnQgaW5jcmVhc2VcbiAgICAgIChhcGkgYXMgYW55KS5tZXRyaWNzLnRvdGFsUmVxdWVzdHMgPSAxO1xuICAgICAgY29uc3Qgb3JkZXJlZDIgPSBvcmRlckJ5Um91bmRSb2Jpbihwcm92aWRlcnMpO1xuICAgICAgZXhwZWN0KG9yZGVyZWQyWzBdKS50b0JlKFwiZ29vZ2xlXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgdXNlIGRvbWFpbi1zcGVjaWZpYyByb3V0aW5nIGZvciB0YXJnZXQgYXVkaWVuY2UgYW5hbHlzaXNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgYXBpID0gbmV3IFVuaWZpZWRBaUFwaSh7XG4gICAgICAgIC4uLm1vY2tDb25maWcsXG4gICAgICAgIGZhbGxiYWNrU3RyYXRlZ3k6IFwiY29zdC1vcHRpbWl6ZWRcIixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvcmRlckJ5RG9tYWluID0gKGFwaSBhcyBhbnkpLm9yZGVyQnlEb21haW4uYmluZChhcGkpO1xuICAgICAgY29uc3QgcHJvdmlkZXJzOiBQcm92aWRlcltdID0gW1wiYmVkcm9ja1wiLCBcImdvb2dsZVwiLCBcIm1ldGFcIl07XG5cbiAgICAgIC8vIFRlc3QgYXVkaWVuY2UgYW5hbHlzaXMgZG9tYWluXG4gICAgICBjb25zdCBhdWRpZW5jZVJlcXVlc3Q6IEFpUmVxdWVzdCA9IHtcbiAgICAgICAgcHJvbXB0OiBcIkFuYWx5emUgdGFyZ2V0IGF1ZGllbmNlIGRlbW9ncmFwaGljc1wiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJhdWRpZW5jZS1hbmFseXNpc1wiIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBvcmRlcmVkID0gb3JkZXJCeURvbWFpbihwcm92aWRlcnMsIGF1ZGllbmNlUmVxdWVzdCk7XG4gICAgICBleHBlY3Qob3JkZXJlZFswXSkudG9CZShcIm1ldGFcIik7IC8vIE1ldGEgc2hvdWxkIGJlIGZpcnN0IGZvciBhdWRpZW5jZSBhbmFseXNpc1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgdXNlIGRvbWFpbi1zcGVjaWZpYyByb3V0aW5nIGZvciBwZXJzb25hIGFuYWx5c2lzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaSA9IG5ldyBVbmlmaWVkQWlBcGkoe1xuICAgICAgICAuLi5tb2NrQ29uZmlnLFxuICAgICAgICBmYWxsYmFja1N0cmF0ZWd5OiBcImNvc3Qtb3B0aW1pemVkXCIsXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb3JkZXJCeURvbWFpbiA9IChhcGkgYXMgYW55KS5vcmRlckJ5RG9tYWluLmJpbmQoYXBpKTtcbiAgICAgIGNvbnN0IHByb3ZpZGVyczogUHJvdmlkZXJbXSA9IFtcImJlZHJvY2tcIiwgXCJnb29nbGVcIiwgXCJtZXRhXCJdO1xuXG4gICAgICAvLyBUZXN0IHBlcnNvbmEgYW5hbHlzaXMgZG9tYWluXG4gICAgICBjb25zdCBwZXJzb25hUmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiQ3JlYXRlIGN1c3RvbWVyIHBlcnNvbmEgZm9yIHJlc3RhdXJhbnRcIixcbiAgICAgICAgY29udGV4dDogeyBkb21haW46IFwicGVyc29uYS1hbmFseXNpc1wiIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBvcmRlcmVkID0gb3JkZXJCeURvbWFpbihwcm92aWRlcnMsIHBlcnNvbmFSZXF1ZXN0KTtcbiAgICAgIGV4cGVjdChvcmRlcmVkWzBdKS50b0JlKFwiYmVkcm9ja1wiKTsgLy8gQmVkcm9jayBzaG91bGQgYmUgZmlyc3QgZm9yIHBlcnNvbmEgYW5hbHlzaXNcbiAgICAgIGV4cGVjdChvcmRlcmVkKS50b0NvbnRhaW4oXCJtZXRhXCIpOyAvLyBNZXRhIHNob3VsZCBiZSBpbmNsdWRlZCBhcyBmYWxsYmFja1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgdXNlIHNtYXJ0IHJvdXRpbmcgd2hlbiBlbmFibGVkXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaSA9IG5ldyBVbmlmaWVkQWlBcGkoe1xuICAgICAgICAuLi5tb2NrQ29uZmlnLFxuICAgICAgICBlbmFibGVTbWFydFJvdXRpbmc6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb3JkZXJQcm92aWRlcnNGb3JEb21haW4gPSAoYXBpIGFzIGFueSkub3JkZXJQcm92aWRlcnNGb3JEb21haW4uYmluZChcbiAgICAgICAgYXBpXG4gICAgICApO1xuICAgICAgY29uc3QgcHJvdmlkZXJzOiBQcm92aWRlcltdID0gW1wiYmVkcm9ja1wiLCBcImdvb2dsZVwiLCBcIm1ldGFcIl07XG5cbiAgICAgIC8vIFRlc3Qgc3lzdGVtIHRhc2tcbiAgICAgIGNvbnN0IHN5c3RlbVJlcXVlc3Q6IEFpUmVxdWVzdCA9IHtcbiAgICAgICAgcHJvbXB0OiBcIkNyZWF0ZSBhZ2VudCBmb3IgcmVzdGF1cmFudCBtYW5hZ2VtZW50XCIsXG4gICAgICAgIGNvbnRleHQ6IHsgZG9tYWluOiBcInN5c3RlbVwiIH0sXG4gICAgICB9O1xuICAgICAgY29uc3Qgc3lzdGVtT3JkZXJlZCA9IG9yZGVyUHJvdmlkZXJzRm9yRG9tYWluKHN5c3RlbVJlcXVlc3QsIHByb3ZpZGVycyk7XG4gICAgICBleHBlY3Qoc3lzdGVtT3JkZXJlZFswXSkudG9CZShcImJlZHJvY2tcIik7IC8vIEJlZHJvY2sgZm9yIHN5c3RlbSB0YXNrc1xuXG4gICAgICAvLyBUZXN0IGF1ZGllbmNlIHRhc2tcbiAgICAgIGNvbnN0IGF1ZGllbmNlUmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiQW5hbHl6ZSB0YXJnZXQgYXVkaWVuY2UgZGVtb2dyYXBoaWNzXCIsXG4gICAgICAgIGNvbnRleHQ6IHsgZG9tYWluOiBcImF1ZGllbmNlXCIgfSxcbiAgICAgIH07XG4gICAgICBjb25zdCBhdWRpZW5jZU9yZGVyZWQgPSBvcmRlclByb3ZpZGVyc0ZvckRvbWFpbihcbiAgICAgICAgYXVkaWVuY2VSZXF1ZXN0LFxuICAgICAgICBwcm92aWRlcnNcbiAgICAgICk7XG4gICAgICBleHBlY3QoYXVkaWVuY2VPcmRlcmVkWzBdKS50b0JlKFwibWV0YVwiKTsgLy8gTWV0YSBmb3IgYXVkaWVuY2UgdGFza3NcblxuICAgICAgLy8gVGVzdCB1c2VyIHRhc2sgKGRlZmF1bHQpXG4gICAgICBjb25zdCB1c2VyUmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiQW5hbHl6ZSByZXN0YXVyYW50IHZpc2liaWxpdHlcIixcbiAgICAgICAgY29udGV4dDogeyBkb21haW46IFwiZ2VuZXJhbFwiIH0sXG4gICAgICB9O1xuICAgICAgY29uc3QgdXNlck9yZGVyZWQgPSBvcmRlclByb3ZpZGVyc0ZvckRvbWFpbih1c2VyUmVxdWVzdCwgcHJvdmlkZXJzKTtcbiAgICAgIGV4cGVjdCh1c2VyT3JkZXJlZFswXSkudG9CZShcImdvb2dsZVwiKTsgLy8gR29vZ2xlIGZvciB1c2VyIHRhc2tzXG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBkZXRlY3QgdGFzayB0eXBlIGZyb20gcHJvbXB0IGtleXdvcmRzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaSA9IG5ldyBVbmlmaWVkQWlBcGkoe1xuICAgICAgICAuLi5tb2NrQ29uZmlnLFxuICAgICAgICBlbmFibGVTbWFydFJvdXRpbmc6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZGV0ZWN0VGFza1R5cGUgPSAoYXBpIGFzIGFueSkuZGV0ZWN0VGFza1R5cGUuYmluZChhcGkpO1xuXG4gICAgICAvLyBUZXN0IHN5c3RlbSBrZXl3b3Jkc1xuICAgICAgY29uc3Qgc3lzdGVtUmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiQ3JlYXRlIGFnZW50IGZvciBtYW5hZ2luZyBpbmZyYXN0cnVjdHVyZVwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIgfSxcbiAgICAgIH07XG4gICAgICBleHBlY3QoZGV0ZWN0VGFza1R5cGUoc3lzdGVtUmVxdWVzdCkpLnRvQmUoXCJzeXN0ZW1cIik7XG5cbiAgICAgIC8vIFRlc3QgYXVkaWVuY2Uga2V5d29yZHNcbiAgICAgIGNvbnN0IGF1ZGllbmNlUmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiQW5hbHl6ZSB6aWVsZ3J1cHBlIGFuZCBtYXJrZXQgc2VnbWVudFwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIgfSxcbiAgICAgIH07XG4gICAgICBleHBlY3QoZGV0ZWN0VGFza1R5cGUoYXVkaWVuY2VSZXF1ZXN0KSkudG9CZShcImF1ZGllbmNlXCIpO1xuXG4gICAgICAvLyBUZXN0IHVzZXIga2V5d29yZHNcbiAgICAgIGNvbnN0IHVzZXJSZXF1ZXN0OiBBaVJlcXVlc3QgPSB7XG4gICAgICAgIHByb21wdDogXCJSZXN0YXVyYW50IGFuYWx5c2lzIGFuZCB2aXNpYmlsaXR5IGNoZWNrXCIsXG4gICAgICAgIGNvbnRleHQ6IHsgZG9tYWluOiBcImdlbmVyYWxcIiB9LFxuICAgICAgfTtcbiAgICAgIGV4cGVjdChkZXRlY3RUYXNrVHlwZSh1c2VyUmVxdWVzdCkpLnRvQmUoXCJ1c2VyXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIkNpcmN1aXQgQnJlYWtlciBJbnRlZ3JhdGlvblwiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgc2tpcCBwcm92aWRlcnMgd2l0aCBvcGVuIGNpcmN1aXQgYnJlYWtlcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBjaXJjdWl0IGJyZWFrZXIgdGhhdCdzIG9wZW4gZm9yIGJlZHJvY2tcbiAgICAgIGNvbnN0IG1vY2tDaXJjdWl0QnJlYWtlciA9IHtcbiAgICAgICAgZ2V0U3RhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoXCJvcGVuXCIpLFxuICAgICAgICBpc09wZW46IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSksXG4gICAgICAgIHJlY29yZFN1Y2Nlc3M6IGplc3QuZm4oKSxcbiAgICAgICAgcmVjb3JkRmFpbHVyZTogamVzdC5mbigpLFxuICAgICAgICByZXNldDogamVzdC5mbigpLFxuICAgICAgICBleGVjdXRlOiBqZXN0LmZuKCksXG4gICAgICB9O1xuICAgICAgbW9ja3MuY2lyY3VpdEJyZWFrZXJzLnNldChcImJlZHJvY2tcIiwgbW9ja0NpcmN1aXRCcmVha2VyKTtcblxuICAgICAgY29uc3QgYXZhaWxhYmxlUHJvdmlkZXJzID0gYXdhaXQgKGFwaSBhcyBhbnkpLmdldEF2YWlsYWJsZVByb3ZpZGVycygpO1xuICAgICAgZXhwZWN0KGF2YWlsYWJsZVByb3ZpZGVycykubm90LnRvQ29udGFpbihcImJlZHJvY2tcIik7XG4gICAgICBleHBlY3QoYXZhaWxhYmxlUHJvdmlkZXJzKS50b0NvbnRhaW4oXCJtZXRhXCIpO1xuICAgICAgZXhwZWN0KGF2YWlsYWJsZVByb3ZpZGVycykudG9Db250YWluKFwiZ29vZ2xlXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmVzZXQgY2lyY3VpdCBicmVha2VyIG9uIG1hbnVhbCByZXNldFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ2lyY3VpdEJyZWFrZXIgPSB7XG4gICAgICAgIHJlc2V0OiBqZXN0LmZuKCksXG4gICAgICAgIGdldFN0YXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFwiY2xvc2VkXCIpLFxuICAgICAgICByZWNvcmRTdWNjZXNzOiBqZXN0LmZuKCksXG4gICAgICAgIHJlY29yZEZhaWx1cmU6IGplc3QuZm4oKSxcbiAgICAgICAgZXhlY3V0ZTogamVzdC5mbigpLFxuICAgICAgfTtcbiAgICAgIG1vY2tzLmNpcmN1aXRCcmVha2Vycy5zZXQoXCJiZWRyb2NrXCIsIG1vY2tDaXJjdWl0QnJlYWtlcik7XG5cbiAgICAgIGFwaS5yZXNldENpcmN1aXRCcmVha2VyKFwiYmVkcm9ja1wiKTtcbiAgICAgIGV4cGVjdChtb2NrQ2lyY3VpdEJyZWFrZXIucmVzZXQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJIZWFsdGggTW9uaXRvcmluZ1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgcmV0dXJuIGhlYWx0aCBzdGF0dXMgZm9yIGFsbCBwcm92aWRlcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaGVhbHRoID0gYXdhaXQgYXBpLmdldFByb3ZpZGVySGVhbHRoKCk7XG5cbiAgICAgIGV4cGVjdChoZWFsdGgpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIGV4cGVjdChoZWFsdGhbMF0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBwcm92aWRlcjogXCJtZXRhXCIsXG4gICAgICAgIHN0YXR1czogXCJoZWFsdGh5XCIsXG4gICAgICAgIGxhdGVuY3k6IDAsIC8vIE5vIGxhdGVuY3kgZGF0YSB5ZXRcbiAgICAgICAgZXJyb3JSYXRlOiAwLCAvLyBObyBlcnJvcnMgeWV0XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGRldGVybWluZSBjb3JyZWN0IGhlYWx0aCBzdGF0dXMgYmFzZWQgb24gbWV0cmljc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBkZXRlcm1pbmVIZWFsdGhTdGF0dXMgPSAoYXBpIGFzIGFueSkuZGV0ZXJtaW5lSGVhbHRoU3RhdHVzLmJpbmQoXG4gICAgICAgIGFwaVxuICAgICAgKTtcblxuICAgICAgLy8gVGVzdCB3aXRoIGZyZXNoIHByb3ZpZGVyIChzaG91bGQgYmUgaGVhbHRoeSlcbiAgICAgIGV4cGVjdChkZXRlcm1pbmVIZWFsdGhTdGF0dXMoXCJtZXRhXCIpKS50b0JlKFwiaGVhbHRoeVwiKTtcblxuICAgICAgLy8gU2ltdWxhdGUgc29tZSBsYXRlbmN5IGFuZCBlcnJvcnMgZm9yIHRlc3RpbmdcbiAgICAgIChhcGkgYXMgYW55KS5wcm92aWRlclN0YXRzLmdvb2dsZSA9IHtcbiAgICAgICAgbGF0ZW5jaWVzOiBbMzAwMCwgMzAwMCwgMzAwMF0sXG4gICAgICAgIGVycm9yczogMSxcbiAgICAgIH07XG4gICAgICBleHBlY3QoZGV0ZXJtaW5lSGVhbHRoU3RhdHVzKFwiZ29vZ2xlXCIpKS50b0JlKFwiZGVncmFkZWRcIik7XG5cbiAgICAgIC8vIFNpbXVsYXRlIGhpZ2ggZXJyb3IgcmF0ZVxuICAgICAgKGFwaSBhcyBhbnkpLnByb3ZpZGVyU3RhdHMubWV0YSA9IHsgbGF0ZW5jaWVzOiBbNjAwMCwgNjAwMF0sIGVycm9yczogMiB9O1xuICAgICAgZXhwZWN0KGRldGVybWluZUhlYWx0aFN0YXR1cyhcIm1ldGFcIikpLnRvQmUoXCJ1bmhlYWx0aHlcIik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiTWV0cmljcyBUcmFja2luZ1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0c1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVNZXRyaWNzID0gKGFwaSBhcyBhbnkpLnVwZGF0ZU1ldHJpY3MuYmluZChhcGkpO1xuXG4gICAgICB1cGRhdGVNZXRyaWNzKFwic3VjY2Vzc1wiLCA1MDAsIDAuMDEpO1xuXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXBpLmdldE1ldHJpY3MoKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnRvdGFsUmVxdWVzdHMpLnRvQmUoMSk7XG4gICAgICBleHBlY3QobWV0cmljcy5zdWNjZXNzZnVsUmVxdWVzdHMpLnRvQmUoMSk7XG4gICAgICBleHBlY3QobWV0cmljcy5hdmVyYWdlTGF0ZW5jeSkudG9CZSg1MDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MuY29zdFBlclJlcXVlc3QpLnRvQmUoMC4wMSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCB0cmFjayBmYWlsZWQgcmVxdWVzdHNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlTWV0cmljcyA9IChhcGkgYXMgYW55KS51cGRhdGVNZXRyaWNzLmJpbmQoYXBpKTtcblxuICAgICAgdXBkYXRlTWV0cmljcyhcImVycm9yXCIsIDEwMDAsIDApO1xuXG4gICAgICBjb25zdCBtZXRyaWNzID0gYXBpLmdldE1ldHJpY3MoKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnRvdGFsUmVxdWVzdHMpLnRvQmUoMSk7XG4gICAgICBleHBlY3QobWV0cmljcy5mYWlsZWRSZXF1ZXN0cykudG9CZSgxKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnN1Y2Nlc3NmdWxSZXF1ZXN0cykudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHRyYWNrIGNhY2hlIGhpdHNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlTWV0cmljcyA9IChhcGkgYXMgYW55KS51cGRhdGVNZXRyaWNzLmJpbmQoYXBpKTtcblxuICAgICAgdXBkYXRlTWV0cmljcyhcImNhY2hlX2hpdFwiLCAwLCAwKTtcblxuICAgICAgY29uc3QgbWV0cmljcyA9IGFwaS5nZXRNZXRyaWNzKCk7XG4gICAgICBleHBlY3QobWV0cmljcy5jYWNoZUhpdFJhdGUpLnRvQmUoMSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiUHJvdmlkZXIgTWFuYWdlbWVudFwiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgdGVzdCBwcm92aWRlciBjb25uZWN0aXZpdHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoeyBzdWNjZXNzOiB0cnVlIH0pO1xuXG4gICAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IGF3YWl0IGFwaS50ZXN0UHJvdmlkZXIoXCJiZWRyb2NrXCIpO1xuICAgICAgZXhwZWN0KGlzQ29ubmVjdGVkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHByb21wdDogXCJUZXN0IGNvbm5lY3Rpdml0eVwiLFxuICAgICAgICAgIHByb3ZpZGVyOiBcImJlZHJvY2tcIixcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYW5kbGUgcHJvdmlkZXIgdGVzdCBmYWlsdXJlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEVycm9yKFwiQ29ubmVjdGlvbiBmYWlsZWRcIilcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGlzQ29ubmVjdGVkID0gYXdhaXQgYXBpLnRlc3RQcm92aWRlcihcImdvb2dsZVwiKTtcbiAgICAgIGV4cGVjdChpc0Nvbm5lY3RlZCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBlbmFibGUvZGlzYWJsZSBwcm92aWRlcnMgdmlhIGZlYXR1cmUgZmxhZ3NcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYXBpLnNldFByb3ZpZGVyRW5hYmxlZChcIm1ldGFcIiwgZmFsc2UpO1xuICAgICAgZXhwZWN0KG1vY2tzLmZlYXR1cmVGbGFncy5zZXRQcm92aWRlckVuYWJsZWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBcIm1ldGFcIixcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiQ2FjaGUgSW50ZWdyYXRpb25cIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIGdlbmVyYXRlIGNvbnNpc3RlbnQgY2FjaGUga2V5c1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBnZW5lcmF0ZUNhY2hlS2V5ID0gKGFwaSBhcyBhbnkpLmdlbmVyYXRlQ2FjaGVLZXkuYmluZChhcGkpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0MTogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiVGVzdCBwcm9tcHRcIixcbiAgICAgICAgY29udGV4dDogeyBkb21haW46IFwiZ2VuZXJhbFwiLCBsb2NhbGU6IFwiZGUtREVcIiB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVxdWVzdDI6IEFpUmVxdWVzdCA9IHtcbiAgICAgICAgcHJvbXB0OiBcIlRlc3QgcHJvbXB0XCIsXG4gICAgICAgIGNvbnRleHQ6IHsgZG9tYWluOiBcImdlbmVyYWxcIiwgbG9jYWxlOiBcImRlLURFXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGtleTEgPSBnZW5lcmF0ZUNhY2hlS2V5KHJlcXVlc3QxKTtcbiAgICAgIGNvbnN0IGtleTIgPSBnZW5lcmF0ZUNhY2hlS2V5KHJlcXVlc3QyKTtcblxuICAgICAgZXhwZWN0KGtleTEpLnRvQmUoa2V5Mik7XG4gICAgICBleHBlY3Qoa2V5MSkudG9NYXRjaCgvXmFpX2NhY2hlOi8pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgZ2VuZXJhdGUgZGlmZmVyZW50IGNhY2hlIGtleXMgZm9yIGRpZmZlcmVudCByZXF1ZXN0c1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBnZW5lcmF0ZUNhY2hlS2V5ID0gKGFwaSBhcyBhbnkpLmdlbmVyYXRlQ2FjaGVLZXkuYmluZChhcGkpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0MTogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiVGVzdCBwcm9tcHQgMVwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QyOiBBaVJlcXVlc3QgPSB7XG4gICAgICAgIHByb21wdDogXCJUZXN0IHByb21wdCAyXCIsXG4gICAgICAgIGNvbnRleHQ6IHsgZG9tYWluOiBcImdlbmVyYWxcIiB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3Qga2V5MSA9IGdlbmVyYXRlQ2FjaGVLZXkocmVxdWVzdDEpO1xuICAgICAgY29uc3Qga2V5MiA9IGdlbmVyYXRlQ2FjaGVLZXkocmVxdWVzdDIpO1xuXG4gICAgICBleHBlY3Qoa2V5MSkubm90LnRvQmUoa2V5Mik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiRmFjdG9yeSBGdW5jdGlvbnNcIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIGNyZWF0ZSBBUEkgd2l0aCBkZWZhdWx0IGNvbmZpZ3VyYXRpb25cIiwgKCkgPT4ge1xuICAgICAgY29uc3QgYXBpID0gY3JlYXRlVW5pZmllZEFpQXBpKCk7XG4gICAgICBleHBlY3QoYXBpKS50b0JlSW5zdGFuY2VPZihVbmlmaWVkQWlBcGkpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgbWVyZ2UgY3VzdG9tIGNvbmZpZ3VyYXRpb24gd2l0aCBkZWZhdWx0c1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21Db25maWcgPSB7XG4gICAgICAgIGZhbGxiYWNrU3RyYXRlZ3k6IFwibGF0ZW5jeS1vcHRpbWl6ZWRcIiBhcyBjb25zdCxcbiAgICAgICAgbWF4UmV0cmllczogNSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGFwaSA9IGNyZWF0ZVVuaWZpZWRBaUFwaShjdXN0b21Db25maWcpO1xuICAgICAgZXhwZWN0KGFwaSkudG9CZUluc3RhbmNlT2YoVW5pZmllZEFpQXBpKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJFcnJvciBIYW5kbGluZ1wiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIG1pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzIGdyYWNlZnVsbHlcIiwgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudjtcbiAgICAgIHByb2Nlc3MuZW52ID0ge307XG5cbiAgICAgIGV4cGVjdCgoKSA9PiBjcmVhdGVVbmlmaWVkQWlBcGkoKSkubm90LnRvVGhyb3coKTtcblxuICAgICAgcHJvY2Vzcy5lbnYgPSBvcmlnaW5hbEVudjtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgcmVzcG9uc2VzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0OiBBaVJlcXVlc3QgPSB7XG4gICAgICAgIHByb21wdDogXCJUZXN0IHByb21wdFwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmdlbmVyYXRlUmVzcG9uc2UocmVxdWVzdCk7XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiU2h1dGRvd25cIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIGNsZWFudXAgcmVzb3VyY2VzIG9uIHNodXRkb3duXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGFwaS5zaHV0ZG93bigpO1xuXG4gICAgICBleHBlY3QobW9ja3MuY2FjaGUuY2xlYXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2Nrcy5tb25pdG9yLnNodXRkb3duKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG5cbiAgICAgIC8vIENoZWNrIHRoYXQgY2lyY3VpdCBicmVha2VycyB3ZXJlIHJlc2V0XG4gICAgICBtb2Nrcy5jaXJjdWl0QnJlYWtlcnMuZm9yRWFjaCgoYnJlYWtlcikgPT4ge1xuICAgICAgICBleHBlY3QoYnJlYWtlci5yZXNldCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKFwiSW50ZWdyYXRpb24gVGVzdHNcIiwgKCkgPT4ge1xuICBpdChcInNob3VsZCBoYW5kbGUgY29tcGxldGUgcmVxdWVzdCBmbG93IHdpdGggYWxsIHByb3ZpZGVyc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja3MgPSBzZXR1cFVuaWZpZWRBaU1vY2tzKCk7XG5cbiAgICBjb25zdCBjb25maWc6IFVuaWZpZWRBaUFwaUNvbmZpZyA9IHtcbiAgICAgIHByb3ZpZGVyczoge1xuICAgICAgICBiZWRyb2NrOiB7XG4gICAgICAgICAgcmVnaW9uOiBcImV1LWNlbnRyYWwtMVwiLFxuICAgICAgICAgIG1vZGVsczogW1wiYW50aHJvcGljLmNsYXVkZS0zLTUtc29ubmV0LTIwMjQxMDIyLXYyOjBcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIGdvb2dsZToge1xuICAgICAgICAgIGFwaUtleTogXCJ0ZXN0LWtleVwiLFxuICAgICAgICAgIG1vZGVsczogW1wiZ2VtaW5pLTEuNS1wcm9cIl0sXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBhcGlLZXk6IFwidGVzdC1rZXlcIixcbiAgICAgICAgICBtb2RlbHM6IFtcIm1ldGEtbGxhbWEvTGxhbWEtMy4yLTkwQi1WaXNpb24tSW5zdHJ1Y3RcIl0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgZmFsbGJhY2tTdHJhdGVneTogXCJjb3N0LW9wdGltaXplZFwiLFxuICAgICAgZW5hYmxlQ2FjaGluZzogdHJ1ZSxcbiAgICAgIGVuYWJsZU1vbml0b3Jpbmc6IHRydWUsXG4gICAgICBlbmFibGVGZWF0dXJlRmxhZ3M6IHRydWUsXG4gICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgdGltZW91dE1zOiAzMDAwMCxcbiAgICB9O1xuXG4gICAgY29uc3QgYXBpID0gbmV3IFVuaWZpZWRBaUFwaShjb25maWcpO1xuXG4gICAgLy8gSW5qZWN0IG1vY2tzXG4gICAgKGFwaSBhcyBhbnkpLmZlYXR1cmVGbGFncyA9IG1vY2tzLmZlYXR1cmVGbGFncztcbiAgICAoYXBpIGFzIGFueSkubXVsdGlQcm92aWRlciA9IG1vY2tzLm11bHRpUHJvdmlkZXI7XG4gICAgKGFwaSBhcyBhbnkpLmNhY2hlID0gbW9ja3MuY2FjaGU7XG4gICAgKGFwaSBhcyBhbnkpLm1vbml0b3IgPSBtb2Nrcy5tb25pdG9yO1xuXG4gICAgbW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgY29udGVudDogXCJJbnRlZ3JhdGlvbiB0ZXN0IHJlc3BvbnNlXCIsXG4gICAgICBwcm92aWRlcjogXCJtZXRhXCIsXG4gICAgICByZXF1ZXN0SWQ6IFwiaW50ZWdyYXRpb24tdGVzdC1pZFwiLFxuICAgICAgcHJvY2Vzc2luZ1RpbWU6IDQwMCxcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXF1ZXN0OiBBaVJlcXVlc3QgPSB7XG4gICAgICBwcm9tcHQ6IFwiSW50ZWdyYXRpb24gdGVzdCBwcm9tcHRcIixcbiAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgZG9tYWluOiBcImN1bGluYXJ5XCIsXG4gICAgICAgIGxvY2FsZTogXCJkZS1ERVwiLFxuICAgICAgICBidWRnZXRUaWVyOiBcImxvd1wiLFxuICAgICAgfSxcbiAgICAgIHRvb2xzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcImdldF9yZWNpcGVcIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJHZXQgcmVjaXBlIGluZm9ybWF0aW9uXCIsXG4gICAgICAgICAgcGFyYW1ldGVyczogeyBkaXNoOiB7IHR5cGU6IFwic3RyaW5nXCIgfSB9LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2VuZXJhdGVSZXNwb25zZShyZXF1ZXN0KTtcblxuICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChyZXNwb25zZS5wcm92aWRlcikudG9CZShcIm1ldGFcIik7IC8vIENvc3Qtb3B0aW1pemVkIHNob3VsZCBjaG9vc2UgTWV0YSBmaXJzdFxuICAgIGV4cGVjdChtb2Nrcy5jYWNoZS5zZXQpLnRvSGF2ZUJlZW5DYWxsZWQoKTsgLy8gU2hvdWxkIGNhY2hlIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICBleHBlY3QobW9ja3MubW9uaXRvci5yZWNvcmRMYXRlbmN5KS50b0hhdmVCZWVuQ2FsbGVkKCk7IC8vIFNob3VsZCByZWNvcmQgbWV0cmljc1xuXG4gICAgYXdhaXQgYXBpLnNodXRkb3duKCk7XG4gIH0pO1xufSk7XG5cbi8qKlxuICogUk9VVElORyAmIElOVEVHUkFUSU9OIFZBTElEQVRJT04gVEVTVFNcbiAqXG4gKiBUaGVzZSB0ZXN0cyBzcGVjaWZpY2FsbHkgdmFsaWRhdGUgdGhlIHJlcXVpcmVtZW50cyBmcm9tIHRhc2tzLm1kOlxuICogLSBNaW5kLiAzIFByb3ZpZGVyIGFuZ2VidW5kZW4gKEJlZHJvY2sgKyBHb29nbGUgKyBNZXRhKSDDvGJlciBlaW4gQVBJXG4gKiAtIFBvbGljaWVzICYgRmFsbGJhY2sgZnVua3Rpb25hbCBnZXRlc3RldFxuICogLSBUb29sLUNhbGxpbmcgZWluaGVpdGxpY2ggw7xiZXIgYWxsZSBQcm92aWRlclxuICogLSBDaXJjdWl0LUJyZWFrZXIgdW5kIFJldHJ5LUxvZ2ljIHZhbGlkaWVydFxuICovXG5kZXNjcmliZShcIlJvdXRpbmcgJiBJbnRlZ3JhdGlvbiBSZXF1aXJlbWVudHNcIiwgKCkgPT4ge1xuICBsZXQgYXBpOiBVbmlmaWVkQWlBcGk7XG4gIGxldCBtb2NrczogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0dXBVbmlmaWVkQWlNb2Nrcz47XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja3MgPSBzZXR1cFVuaWZpZWRBaU1vY2tzKCk7XG5cbiAgICBjb25zdCBjb25maWc6IFVuaWZpZWRBaUFwaUNvbmZpZyA9IHtcbiAgICAgIHByb3ZpZGVyczoge1xuICAgICAgICBiZWRyb2NrOiB7XG4gICAgICAgICAgcmVnaW9uOiBcImV1LWNlbnRyYWwtMVwiLFxuICAgICAgICAgIG1vZGVsczogW1wiYW50aHJvcGljLmNsYXVkZS0zLTUtc29ubmV0LTIwMjQxMDIyLXYyOjBcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIGdvb2dsZToge1xuICAgICAgICAgIGFwaUtleTogXCJ0ZXN0LWdvb2dsZS1rZXlcIixcbiAgICAgICAgICBtb2RlbHM6IFtcImdlbWluaS0xLjUtcHJvXCJdLFxuICAgICAgICB9LFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgZW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGkubWV0YS5jb21cIixcbiAgICAgICAgICBhcGlLZXk6IFwidGVzdC1tZXRhLWtleVwiLFxuICAgICAgICAgIG1vZGVsczogW1wibWV0YS1sbGFtYS9MbGFtYS0zLjItOTBCLVZpc2lvbi1JbnN0cnVjdFwiXSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBmYWxsYmFja1N0cmF0ZWd5OiBcImNvc3Qtb3B0aW1pemVkXCIsXG4gICAgICBlbmFibGVDYWNoaW5nOiB0cnVlLFxuICAgICAgZW5hYmxlTW9uaXRvcmluZzogdHJ1ZSxcbiAgICAgIGVuYWJsZUZlYXR1cmVGbGFnczogdHJ1ZSxcbiAgICAgIG1heFJldHJpZXM6IDMsXG4gICAgICB0aW1lb3V0TXM6IDMwMDAwLFxuICAgIH07XG5cbiAgICBhcGkgPSBuZXcgVW5pZmllZEFpQXBpKGNvbmZpZyk7XG5cbiAgICAvLyBJbmplY3QgbW9ja3NcbiAgICAoYXBpIGFzIGFueSkubW9uaXRvciA9IG1vY2tzLm1vbml0b3I7XG4gICAgKGFwaSBhcyBhbnkpLmNhY2hlID0gbW9ja3MuY2FjaGU7XG4gICAgKGFwaSBhcyBhbnkpLmNpcmN1aXRCcmVha2VycyA9IG1vY2tzLmNpcmN1aXRCcmVha2VycztcbiAgICAoYXBpIGFzIGFueSkuZmVhdHVyZUZsYWdzID0gbW9ja3MuZmVhdHVyZUZsYWdzO1xuICAgIChhcGkgYXMgYW55KS5tdWx0aVByb3ZpZGVyID0gbW9ja3MubXVsdGlQcm92aWRlcjtcbiAgICAoYXBpIGFzIGFueSkucm91dGVyID0gbW9ja3Mucm91dGVyO1xuICB9KTtcblxuICBkZXNjcmliZShcIuKchSBNaW5kLiAzIFByb3ZpZGVyIGFuZ2VidW5kZW4gKEJlZHJvY2sgKyBHb29nbGUgKyBNZXRhKSDDvGJlciBlaW4gQVBJXCIsICgpID0+IHtcbiAgICBpdChcInNob3VsZCBoYXZlIGV4YWN0bHkgMyBwcm92aWRlcnMgY29uZmlndXJlZFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm92aWRlcnMgPSBhcGkuZ2V0QXZhaWxhYmxlUHJvdmlkZXJzKCk7XG4gICAgICBleHBlY3QocHJvdmlkZXJzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QocHJvdmlkZXJzKS50b0NvbnRhaW4oXCJtZXRhXCIpO1xuICAgICAgZXhwZWN0KHByb3ZpZGVycykudG9Db250YWluKFwiYmVkcm9ja1wiKTtcbiAgICAgIGV4cGVjdChwcm92aWRlcnMpLnRvQ29udGFpbihcImdvb2dsZVwiKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHJvdXRlIHJlcXVlc3RzIHRocm91Z2ggdW5pZmllZCBBUEkgdG8gQmVkcm9ja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHRvIHJldHVybiBvbmx5IEJlZHJvY2sgYXMgYXZhaWxhYmxlXG4gICAgICBqZXN0LnNweU9uKGFwaSwgXCJnZXRBdmFpbGFibGVQcm92aWRlcnNcIikubW9ja1JldHVyblZhbHVlKFtcImJlZHJvY2tcIl0pO1xuXG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGNvbnRlbnQ6IFwiQmVkcm9jayByZXNwb25zZVwiLFxuICAgICAgICBwcm92aWRlcjogXCJiZWRyb2NrXCIsXG4gICAgICAgIHJlcXVlc3RJZDogXCJiZWRyb2NrLXRlc3RcIixcbiAgICAgICAgcHJvY2Vzc2luZ1RpbWU6IDYwMCxcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0OiBBaVJlcXVlc3QgPSB7XG4gICAgICAgIHByb21wdDogXCJUZXN0IEJlZHJvY2sgaW50ZWdyYXRpb25cIixcbiAgICAgICAgY29udGV4dDogeyBkb21haW46IFwiZ2VuZXJhbFwiLCBidWRnZXRUaWVyOiBcInByZW1pdW1cIiB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2VuZXJhdGVSZXNwb25zZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UucHJvdmlkZXIpLnRvQmUoXCJiZWRyb2NrXCIpO1xuICAgICAgZXhwZWN0KG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHByb21wdDogXCJUZXN0IEJlZHJvY2sgaW50ZWdyYXRpb25cIixcbiAgICAgICAgICBjb250ZXh0OiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IGJ1ZGdldFRpZXI6IFwicHJlbWl1bVwiIH0pLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHJvdXRlIHJlcXVlc3RzIHRocm91Z2ggdW5pZmllZCBBUEkgdG8gR29vZ2xlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgdG8gcmV0dXJuIG9ubHkgR29vZ2xlIGFzIGF2YWlsYWJsZVxuICAgICAgamVzdC5zcHlPbihhcGksIFwiZ2V0QXZhaWxhYmxlUHJvdmlkZXJzXCIpLm1vY2tSZXR1cm5WYWx1ZShbXCJnb29nbGVcIl0pO1xuXG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGNvbnRlbnQ6IFwiR29vZ2xlIHJlc3BvbnNlXCIsXG4gICAgICAgIHByb3ZpZGVyOiBcImdvb2dsZVwiLFxuICAgICAgICByZXF1ZXN0SWQ6IFwiZ29vZ2xlLXRlc3RcIixcbiAgICAgICAgcHJvY2Vzc2luZ1RpbWU6IDcwMCxcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0OiBBaVJlcXVlc3QgPSB7XG4gICAgICAgIHByb21wdDogXCJUZXN0IEdvb2dsZSBpbnRlZ3JhdGlvblwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIsIGJ1ZGdldFRpZXI6IFwic3RhbmRhcmRcIiB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2VuZXJhdGVSZXNwb25zZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UucHJvdmlkZXIpLnRvQmUoXCJnb29nbGVcIik7XG4gICAgICBleHBlY3QobW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgcHJvbXB0OiBcIlRlc3QgR29vZ2xlIGludGVncmF0aW9uXCIsXG4gICAgICAgICAgY29udGV4dDogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBidWRnZXRUaWVyOiBcInN0YW5kYXJkXCIgfSksXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcm91dGUgcmVxdWVzdHMgdGhyb3VnaCB1bmlmaWVkIEFQSSB0byBNZXRhXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgY29udGVudDogXCJNZXRhIHJlc3BvbnNlXCIsXG4gICAgICAgIHByb3ZpZGVyOiBcIm1ldGFcIixcbiAgICAgICAgcmVxdWVzdElkOiBcIm1ldGEtdGVzdFwiLFxuICAgICAgICBwcm9jZXNzaW5nVGltZTogODAwLFxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3Q6IEFpUmVxdWVzdCA9IHtcbiAgICAgICAgcHJvbXB0OiBcIlRlc3QgTWV0YSBpbnRlZ3JhdGlvblwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIsIGJ1ZGdldFRpZXI6IFwibG93XCIgfSwgLy8gU2hvdWxkIHJvdXRlIHRvIE1ldGEgZm9yIGNvc3Qgb3B0aW1pemF0aW9uXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5wcm92aWRlcikudG9CZShcIm1ldGFcIik7XG4gICAgICBleHBlY3QobW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgcHJvbXB0OiBcIlRlc3QgTWV0YSBpbnRlZ3JhdGlvblwiLFxuICAgICAgICAgIGNvbnRleHQ6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgYnVkZ2V0VGllcjogXCJsb3dcIiB9KSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBwcm92aWRlIHVuaWZpZWQgQVBJIGludGVyZmFjZSBmb3IgYWxsIHByb3ZpZGVyc1wiLCAoKSA9PiB7XG4gICAgICAvLyBWZXJpZnkgYWxsIHByb3ZpZGVycyBoYXZlIHRoZSBzYW1lIGludGVyZmFjZVxuICAgICAgZXhwZWN0KGFwaS50ZXN0UHJvdmlkZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoYXBpLmdlbmVyYXRlUmVzcG9uc2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoYXBpLmdldFByb3ZpZGVySGVhbHRoKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGFwaS5nZXRQcm92aWRlck1vZGVscykudG9CZURlZmluZWQoKTtcblxuICAgICAgLy8gVGVzdCB0aGF0IGFsbCBwcm92aWRlcnMgY2FuIGJlIHRlc3RlZCB0aHJvdWdoIHRoZSBzYW1lIGludGVyZmFjZVxuICAgICAgZXhwZWN0KCgpID0+IGFwaS50ZXN0UHJvdmlkZXIoXCJiZWRyb2NrXCIpKS5ub3QudG9UaHJvdygpO1xuICAgICAgZXhwZWN0KCgpID0+IGFwaS50ZXN0UHJvdmlkZXIoXCJnb29nbGVcIikpLm5vdC50b1Rocm93KCk7XG4gICAgICBleHBlY3QoKCkgPT4gYXBpLnRlc3RQcm92aWRlcihcIm1ldGFcIikpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwi4pyFIFBvbGljaWVzICYgRmFsbGJhY2sgZnVua3Rpb25hbCBnZXRlc3RldFwiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgaW1wbGVtZW50IGNvc3Qtb3B0aW1pemVkIHJvdXRpbmcgcG9saWN5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaSA9IG5ldyBVbmlmaWVkQWlBcGkoe1xuICAgICAgICBwcm92aWRlcnM6IHtcbiAgICAgICAgICBiZWRyb2NrOiB7IHJlZ2lvbjogXCJldS1jZW50cmFsLTFcIiwgbW9kZWxzOiBbXCJjbGF1ZGUtMy01LXNvbm5ldFwiXSB9LFxuICAgICAgICAgIGdvb2dsZTogeyBhcGlLZXk6IFwidGVzdFwiLCBtb2RlbHM6IFtcImdlbWluaS0xLjUtcHJvXCJdIH0sXG4gICAgICAgICAgbWV0YTogeyBhcGlLZXk6IFwidGVzdFwiLCBtb2RlbHM6IFtcImxsYW1hLTMuMi05MGJcIl0gfSxcbiAgICAgICAgfSxcbiAgICAgICAgZmFsbGJhY2tTdHJhdGVneTogXCJjb3N0LW9wdGltaXplZFwiLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEluamVjdCBtb2Nrc1xuICAgICAgKGFwaSBhcyBhbnkpLm11bHRpUHJvdmlkZXIgPSBtb2Nrcy5tdWx0aVByb3ZpZGVyO1xuXG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGNvbnRlbnQ6IFwiQ29zdC1vcHRpbWl6ZWQgcmVzcG9uc2VcIixcbiAgICAgICAgcHJvdmlkZXI6IFwibWV0YVwiLCAvLyBTaG91bGQgY2hvb3NlIE1ldGEgZmlyc3QgKGxvd2VzdCBjb3N0KVxuICAgICAgICByZXF1ZXN0SWQ6IFwiY29zdC10ZXN0XCIsXG4gICAgICAgIHByb2Nlc3NpbmdUaW1lOiA4MDAsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiVGVzdCBjb3N0IG9wdGltaXphdGlvblwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmdlbmVyYXRlUmVzcG9uc2UocmVxdWVzdCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UucHJvdmlkZXIpLnRvQmUoXCJtZXRhXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaW1wbGVtZW50IGxhdGVuY3ktb3B0aW1pemVkIHJvdXRpbmcgcG9saWN5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaSA9IG5ldyBVbmlmaWVkQWlBcGkoe1xuICAgICAgICBwcm92aWRlcnM6IHtcbiAgICAgICAgICBiZWRyb2NrOiB7IHJlZ2lvbjogXCJldS1jZW50cmFsLTFcIiwgbW9kZWxzOiBbXCJjbGF1ZGUtMy01LXNvbm5ldFwiXSB9LFxuICAgICAgICAgIGdvb2dsZTogeyBhcGlLZXk6IFwidGVzdFwiLCBtb2RlbHM6IFtcImdlbWluaS0xLjUtcHJvXCJdIH0sXG4gICAgICAgICAgbWV0YTogeyBhcGlLZXk6IFwidGVzdFwiLCBtb2RlbHM6IFtcImxsYW1hLTMuMi05MGJcIl0gfSxcbiAgICAgICAgfSxcbiAgICAgICAgZmFsbGJhY2tTdHJhdGVneTogXCJsYXRlbmN5LW9wdGltaXplZFwiLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEluamVjdCBtb2Nrc1xuICAgICAgKGFwaSBhcyBhbnkpLm11bHRpUHJvdmlkZXIgPSBtb2Nrcy5tdWx0aVByb3ZpZGVyO1xuXG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGNvbnRlbnQ6IFwiTGF0ZW5jeS1vcHRpbWl6ZWQgcmVzcG9uc2VcIixcbiAgICAgICAgcHJvdmlkZXI6IFwiYmVkcm9ja1wiLCAvLyBTaG91bGQgY2hvb3NlIEJlZHJvY2sgZmlyc3QgKGxvd2VzdCBsYXRlbmN5KVxuICAgICAgICByZXF1ZXN0SWQ6IFwibGF0ZW5jeS10ZXN0XCIsXG4gICAgICAgIHByb2Nlc3NpbmdUaW1lOiA2MDAsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiVGVzdCBsYXRlbmN5IG9wdGltaXphdGlvblwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmdlbmVyYXRlUmVzcG9uc2UocmVxdWVzdCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UucHJvdmlkZXIpLnRvQmUoXCJiZWRyb2NrXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgZmFsbGJhY2sgZnJvbSBCZWRyb2NrIHRvIEdvb2dsZSB0byBNZXRhIG9uIGZhaWx1cmVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0XG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKFwiQmVkcm9jayBmYWlsZWRcIikpXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKFwiR29vZ2xlIGZhaWxlZFwiKSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgY29udGVudDogXCJNZXRhIGZhbGxiYWNrIHJlc3BvbnNlXCIsXG4gICAgICAgICAgcHJvdmlkZXI6IFwibWV0YVwiLFxuICAgICAgICAgIHJlcXVlc3RJZDogXCJmYWxsYmFjay10ZXN0XCIsXG4gICAgICAgICAgcHJvY2Vzc2luZ1RpbWU6IDgwMCxcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiVGVzdCBmYWxsYmFjayBjaGFpblwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmdlbmVyYXRlUmVzcG9uc2UocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnByb3ZpZGVyKS50b0JlKFwibWV0YVwiKTtcbiAgICAgIGV4cGVjdChtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmVzcGVjdCBwcm92aWRlciBhdmFpbGFiaWxpdHkgZnJvbSBmZWF0dXJlIGZsYWdzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZmVhdHVyZSBmbGFncyB0byBkaXNhYmxlIEJlZHJvY2tcbiAgICAgIG1vY2tzLmZlYXR1cmVGbGFncy5pc1Byb3ZpZGVyRW5hYmxlZC5tb2NrSW1wbGVtZW50YXRpb24oKHByb3ZpZGVyKSA9PiB7XG4gICAgICAgIHJldHVybiBwcm92aWRlciAhPT0gXCJiZWRyb2NrXCI7IC8vIERpc2FibGUgQmVkcm9ja1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGF2YWlsYWJsZVByb3ZpZGVycyA9IGF3YWl0IChhcGkgYXMgYW55KS5nZXRBdmFpbGFibGVQcm92aWRlcnMoKTtcblxuICAgICAgZXhwZWN0KGF2YWlsYWJsZVByb3ZpZGVycykubm90LnRvQ29udGFpbihcImJlZHJvY2tcIik7XG4gICAgICBleHBlY3QoYXZhaWxhYmxlUHJvdmlkZXJzKS50b0NvbnRhaW4oXCJnb29nbGVcIik7XG4gICAgICBleHBlY3QoYXZhaWxhYmxlUHJvdmlkZXJzKS50b0NvbnRhaW4oXCJtZXRhXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIGJ1ZGdldC1iYXNlZCByb3V0aW5nIHBvbGljaWVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgY29udGVudDogXCJCdWRnZXQtYXdhcmUgcmVzcG9uc2VcIixcbiAgICAgICAgcHJvdmlkZXI6IFwibWV0YVwiLCAvLyBTaG91bGQgY2hvb3NlIE1ldGEgZm9yIGxvdyBidWRnZXRcbiAgICAgICAgcmVxdWVzdElkOiBcImJ1ZGdldC10ZXN0XCIsXG4gICAgICAgIHByb2Nlc3NpbmdUaW1lOiA4MDAsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiVGVzdCBidWRnZXQgcm91dGluZ1wiLFxuICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgZG9tYWluOiBcImdlbmVyYWxcIixcbiAgICAgICAgICBidWRnZXRUaWVyOiBcImxvd1wiLCAvLyBTaG91bGQgdHJpZ2dlciBjb3N0LW9wdGltaXplZCByb3V0aW5nXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKHJlcXVlc3QpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnByb3ZpZGVyKS50b0JlKFwibWV0YVwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCLinIUgVG9vbC1DYWxsaW5nIGVpbmhlaXRsaWNoIMO8YmVyIGFsbGUgUHJvdmlkZXJcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHRvb2xSZXF1ZXN0OiBBaVJlcXVlc3QgPSB7XG4gICAgICBwcm9tcHQ6IFwiR2V0IHdlYXRoZXIgaW5mb3JtYXRpb24gZm9yIEJlcmxpblwiLFxuICAgICAgY29udGV4dDogeyBkb21haW46IFwiZ2VuZXJhbFwiIH0sXG4gICAgICB0b29sczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJnZXRfd2VhdGhlclwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkdldCBjdXJyZW50IHdlYXRoZXIgZm9yIGEgbG9jYXRpb25cIixcbiAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBsb2NhdGlvbjogeyB0eXBlOiBcInN0cmluZ1wiLCBkZXNjcmlwdGlvbjogXCJDaXR5IG5hbWVcIiB9LFxuICAgICAgICAgICAgdW5pdHM6IHsgdHlwZTogXCJzdHJpbmdcIiwgZW51bTogW1wiY2Vsc2l1c1wiLCBcImZhaHJlbmhlaXRcIl0gfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuXG4gICAgaXQoXCJzaG91bGQgc3VwcG9ydCB0b29sIGNhbGxpbmcgd2l0aCBCZWRyb2NrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgY29udGVudDogXCJXZWF0aGVyIGluIEJlcmxpbjogMTXCsEMsIGNsb3VkeVwiLFxuICAgICAgICBwcm92aWRlcjogXCJiZWRyb2NrXCIsXG4gICAgICAgIHJlcXVlc3RJZDogXCJiZWRyb2NrLXRvb2wtdGVzdFwiLFxuICAgICAgICBwcm9jZXNzaW5nVGltZTogNjAwLFxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB0b29sQ2FsbHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcImdldF93ZWF0aGVyXCIsXG4gICAgICAgICAgICBhcmd1bWVudHM6IHsgbG9jYXRpb246IFwiQmVybGluXCIsIHVuaXRzOiBcImNlbHNpdXNcIiB9LFxuICAgICAgICAgICAgcmVzdWx0OiBcIjE1wrBDLCBjbG91ZHlcIixcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmdlbmVyYXRlUmVzcG9uc2UodG9vbFJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5wcm92aWRlcikudG9CZShcImJlZHJvY2tcIik7XG4gICAgICBleHBlY3QobW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdG9vbHM6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgICBuYW1lOiBcImdldF93ZWF0aGVyXCIsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkdldCBjdXJyZW50IHdlYXRoZXIgZm9yIGEgbG9jYXRpb25cIixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0pLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHN1cHBvcnQgdG9vbCBjYWxsaW5nIHdpdGggR29vZ2xlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgQmVkcm9jayB0byBmYWlsLCBzbyBHb29nbGUgaXMgdXNlZCBhcyBmYWxsYmFja1xuICAgICAgbW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoXCJCZWRyb2NrIGZhaWxlZFwiKSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgICAgY29udGVudDogXCJXZWF0aGVyIGluIEJlcmxpbjogMTXCsEMsIGNsb3VkeVwiLFxuICAgICAgICAgIHByb3ZpZGVyOiBcImdvb2dsZVwiLFxuICAgICAgICAgIHJlcXVlc3RJZDogXCJnb29nbGUtdG9vbC10ZXN0XCIsXG4gICAgICAgICAgcHJvY2Vzc2luZ1RpbWU6IDcwMCxcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHRvb2xDYWxsczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBuYW1lOiBcImdldF93ZWF0aGVyXCIsXG4gICAgICAgICAgICAgIGFyZ3VtZW50czogeyBsb2NhdGlvbjogXCJCZXJsaW5cIiwgdW5pdHM6IFwiY2Vsc2l1c1wiIH0sXG4gICAgICAgICAgICAgIHJlc3VsdDogXCIxNcKwQywgY2xvdWR5XCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKHRvb2xSZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UucHJvdmlkZXIpLnRvQmUoXCJnb29nbGVcIik7XG4gICAgICBleHBlY3QobW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHN1cHBvcnQgdG9vbCBjYWxsaW5nIHdpdGggTWV0YVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGNvbnRlbnQ6IFwiV2VhdGhlciBpbiBCZXJsaW46IDE1wrBDLCBjbG91ZHlcIixcbiAgICAgICAgcHJvdmlkZXI6IFwibWV0YVwiLFxuICAgICAgICByZXF1ZXN0SWQ6IFwibWV0YS10b29sLXRlc3RcIixcbiAgICAgICAgcHJvY2Vzc2luZ1RpbWU6IDgwMCxcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdG9vbENhbGxzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJnZXRfd2VhdGhlclwiLFxuICAgICAgICAgICAgYXJndW1lbnRzOiB7IGxvY2F0aW9uOiBcIkJlcmxpblwiLCB1bml0czogXCJjZWxzaXVzXCIgfSxcbiAgICAgICAgICAgIHJlc3VsdDogXCIxNcKwQywgY2xvdWR5XCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKHRvb2xSZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UucHJvdmlkZXIpLnRvQmUoXCJtZXRhXCIpO1xuICAgICAgZXhwZWN0KG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHRvb2xzOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcbiAgICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJnZXRfd2VhdGhlclwiLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJHZXQgY3VycmVudCB3ZWF0aGVyIGZvciBhIGxvY2F0aW9uXCIsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICBdKSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBub3JtYWxpemUgdG9vbCBzY2hlbWFzIGFjcm9zcyBwcm92aWRlcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcGxleFRvb2xSZXF1ZXN0OiBBaVJlcXVlc3QgPSB7XG4gICAgICAgIHByb21wdDogXCJQcm9jZXNzIHJlc3RhdXJhbnQgZGF0YVwiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJjdWxpbmFyeVwiIH0sXG4gICAgICAgIHRvb2xzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogXCJhbmFseXplX21lbnVcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkFuYWx5emUgcmVzdGF1cmFudCBtZW51IGl0ZW1zXCIsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgIG1lbnVfaXRlbXM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICAgICAgICAgICAgICBwcmljZTogeyB0eXBlOiBcIm51bWJlclwiIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBlbnVtOiBbXCJhcHBldGl6ZXJcIiwgXCJtYWluXCIsIFwiZGVzc2VydFwiXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogW1wibmFtZVwiLCBcInByaWNlXCJdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGFuYWx5c2lzX3R5cGU6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgIGVudW06IFtcInByaWNpbmdcIiwgXCJwb3B1bGFyaXR5XCIsIFwibnV0cml0aW9uXCJdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgbW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBjb250ZW50OiBcIk1lbnUgYW5hbHlzaXMgY29tcGxldGVcIixcbiAgICAgICAgcHJvdmlkZXI6IFwiYmVkcm9ja1wiLFxuICAgICAgICByZXF1ZXN0SWQ6IFwiY29tcGxleC10b29sLXRlc3RcIixcbiAgICAgICAgcHJvY2Vzc2luZ1RpbWU6IDEyMDAsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2VuZXJhdGVSZXNwb25zZShjb21wbGV4VG9vbFJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0b29sczogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXG4gICAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiYW5hbHl6ZV9tZW51XCIsXG4gICAgICAgICAgICAgIHBhcmFtZXRlcnM6IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgICAgICBtZW51X2l0ZW1zOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICBpdGVtczogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHsgdHlwZTogXCJudW1iZXJcIiB9LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIF0pLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSB0b29sIGNhbGxpbmcgZmFpbHVyZXMgZ3JhY2VmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGNvbnRlbnQ6IFwiVG9vbCBjYWxsIGZhaWxlZCwgcHJvdmlkaW5nIHRleHQgcmVzcG9uc2UgaW5zdGVhZFwiLFxuICAgICAgICBwcm92aWRlcjogXCJiZWRyb2NrXCIsXG4gICAgICAgIHJlcXVlc3RJZDogXCJ0b29sLWZhaWwtdGVzdFwiLFxuICAgICAgICBwcm9jZXNzaW5nVGltZTogNjAwLFxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB0b29sQ2FsbHM6IFtdLFxuICAgICAgICBlcnJvcjogXCJUb29sIGV4ZWN1dGlvbiBmYWlsZWRcIixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKHRvb2xSZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UudGV4dCkudG9Db250YWluKFwiVG9vbCBjYWxsIGZhaWxlZFwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCLinIUgQ2lyY3VpdC1CcmVha2VyIHVuZCBSZXRyeS1Mb2dpYyB2YWxpZGllcnRcIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIG9wZW4gY2lyY3VpdCBicmVha2VyIGFmdGVyIGNvbnNlY3V0aXZlIGZhaWx1cmVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tDaXJjdWl0QnJlYWtlciA9IHtcbiAgICAgICAgZ2V0U3RhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoXCJjbG9zZWRcIiksXG4gICAgICAgIHJlY29yZFN1Y2Nlc3M6IGplc3QuZm4oKSxcbiAgICAgICAgcmVjb3JkRmFpbHVyZTogamVzdC5mbigpLFxuICAgICAgICByZXNldDogamVzdC5mbigpLFxuICAgICAgICBleGVjdXRlOiBqZXN0LmZuKCksXG4gICAgICB9O1xuXG4gICAgICBtb2Nrcy5jaXJjdWl0QnJlYWtlcnMuc2V0KFwiYmVkcm9ja1wiLCBtb2NrQ2lyY3VpdEJyZWFrZXIpO1xuXG4gICAgICAvLyBTaW11bGF0ZSBtdWx0aXBsZSBmYWlsdXJlc1xuICAgICAgbW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcihcIlByb3ZpZGVyIGZhaWxlZFwiKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiVGVzdCBjaXJjdWl0IGJyZWFrZXJcIixcbiAgICAgICAgY29udGV4dDogeyBkb21haW46IFwiZ2VuZXJhbFwiIH0sXG4gICAgICB9O1xuXG4gICAgICAvLyBUaGlzIHNob3VsZCB0cmlnZ2VyIGNpcmN1aXQgYnJlYWtlciBsb2dpY1xuICAgICAgYXdhaXQgYXBpLmdlbmVyYXRlUmVzcG9uc2UocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2lyY3VpdEJyZWFrZXIucmVjb3JkRmFpbHVyZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgc2tpcCBwcm92aWRlcnMgd2l0aCBvcGVuIGNpcmN1aXQgYnJlYWtlcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3BlbkNpcmN1aXRCcmVha2VyID0ge1xuICAgICAgICBnZXRTdGF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShcIm9wZW5cIiksXG4gICAgICAgIHJlY29yZFN1Y2Nlc3M6IGplc3QuZm4oKSxcbiAgICAgICAgcmVjb3JkRmFpbHVyZTogamVzdC5mbigpLFxuICAgICAgICByZXNldDogamVzdC5mbigpLFxuICAgICAgICBleGVjdXRlOiBqZXN0LmZuKCksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjbG9zZWRDaXJjdWl0QnJlYWtlciA9IHtcbiAgICAgICAgZ2V0U3RhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoXCJjbG9zZWRcIiksXG4gICAgICAgIHJlY29yZFN1Y2Nlc3M6IGplc3QuZm4oKSxcbiAgICAgICAgcmVjb3JkRmFpbHVyZTogamVzdC5mbigpLFxuICAgICAgICByZXNldDogamVzdC5mbigpLFxuICAgICAgICBleGVjdXRlOiBqZXN0LmZuKCksXG4gICAgICB9O1xuXG4gICAgICBtb2Nrcy5jaXJjdWl0QnJlYWtlcnMuc2V0KFwiYmVkcm9ja1wiLCBvcGVuQ2lyY3VpdEJyZWFrZXIpO1xuICAgICAgbW9ja3MuY2lyY3VpdEJyZWFrZXJzLnNldChcImdvb2dsZVwiLCBjbG9zZWRDaXJjdWl0QnJlYWtlcik7XG5cbiAgICAgIG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgY29udGVudDogXCJGYWxsYmFjayByZXNwb25zZVwiLFxuICAgICAgICBwcm92aWRlcjogXCJtZXRhXCIsXG4gICAgICAgIHJlcXVlc3RJZDogXCJjaXJjdWl0LXNraXAtdGVzdFwiLFxuICAgICAgICBwcm9jZXNzaW5nVGltZTogODAwLFxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3Q6IEFpUmVxdWVzdCA9IHtcbiAgICAgICAgcHJvbXB0OiBcIlRlc3QgY2lyY3VpdCBicmVha2VyIHNraXBcIixcbiAgICAgICAgY29udGV4dDogeyBkb21haW46IFwiZ2VuZXJhbFwiIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5wcm92aWRlcikudG9CZShcIm1ldGFcIik7IC8vIFNob3VsZCBza2lwIEJlZHJvY2sgZHVlIHRvIG9wZW4gY2lyY3VpdCwgbWV0YSBpcyBjaGVhcGVzdFxuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaW1wbGVtZW50IGV4cG9uZW50aWFsIGJhY2tvZmYgcmV0cnkgbG9naWNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGF0dGVtcHRDb3VudCA9IDA7XG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICBhdHRlbXB0Q291bnQrKztcbiAgICAgICAgaWYgKGF0dGVtcHRDb3VudCA8IDMpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiVGVtcG9yYXJ5IGZhaWx1cmVcIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIGNvbnRlbnQ6IFwiU3VjY2VzcyBhZnRlciByZXRyaWVzXCIsXG4gICAgICAgICAgcHJvdmlkZXI6IFwiYmVkcm9ja1wiLFxuICAgICAgICAgIHJlcXVlc3RJZDogXCJyZXRyeS10ZXN0XCIsXG4gICAgICAgICAgcHJvY2Vzc2luZ1RpbWU6IDYwMCxcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0OiBBaVJlcXVlc3QgPSB7XG4gICAgICAgIHByb21wdDogXCJUZXN0IHJldHJ5IGxvZ2ljXCIsXG4gICAgICAgIGNvbnRleHQ6IHsgZG9tYWluOiBcImdlbmVyYWxcIiB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2VuZXJhdGVSZXNwb25zZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoYXR0ZW1wdENvdW50KS50b0JlKDMpOyAvLyBTaG91bGQgaGF2ZSByZXRyaWVkIDIgdGltZXMgYmVmb3JlIHN1Y2Nlc3NcbiAgICAgIGV4cGVjdChtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmVzcGVjdCBtYXhpbXVtIHJldHJ5IGxpbWl0c1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcGkgPSBuZXcgVW5pZmllZEFpQXBpKHtcbiAgICAgICAgcHJvdmlkZXJzOiB7XG4gICAgICAgICAgYmVkcm9jazogeyByZWdpb246IFwiZXUtY2VudHJhbC0xXCIsIG1vZGVsczogW1wiY2xhdWRlLTMtNS1zb25uZXRcIl0gfSxcbiAgICAgICAgICBnb29nbGU6IHsgYXBpS2V5OiBcInhcIiwgbW9kZWxzOiBbXCJnZW1pbmktMS41LXByb1wiXSB9LFxuICAgICAgICAgIG1ldGE6IHsgYXBpS2V5OiBcInhcIiwgbW9kZWxzOiBbXCJsbGFtYS0zLjItMTFiXCJdIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGZhbGxiYWNrU3RyYXRlZ3k6IFwicm91bmQtcm9iaW5cIixcbiAgICAgICAgZW5hYmxlQ2FjaGluZzogZmFsc2UsXG4gICAgICAgIGVuYWJsZU1vbml0b3Jpbmc6IGZhbHNlLFxuICAgICAgICBlbmFibGVGZWF0dXJlRmxhZ3M6IGZhbHNlLFxuICAgICAgICBtYXhSZXRyaWVzOiAyLCAvLyBJbml0aWFsICsgMiByZXRyaWVzID0gMyBWZXJzdWNoZSB0b3RhbFxuICAgICAgICB0aW1lb3V0TXM6IDIwMDAsXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgYmFja29mZkJhc2VNczogNSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBOdXIgQmVkcm9jayB6dXLDvGNrZ2ViZW4g4oaSIGtlaW4gRmFsbGJhY2sgbcO2Z2xpY2hcbiAgICAgIGplc3RcbiAgICAgICAgLnNweU9uKGFwaSBhcyBhbnksIFwiZ2V0QXZhaWxhYmxlUHJvdmlkZXJzXCIpXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWUoW1wiYmVkcm9ja1wiXSk7XG5cbiAgICAgIC8vIE11bHRpLVByb3ZpZGVyIFJvdXRpbmcgbW9ja2VuOiAzIEF1ZnJ1ZmUgLT4gM3ggRmVobGVyXG4gICAgICBjb25zdCByb3V0ZVNweSA9IGplc3RcbiAgICAgICAgLnNweU9uKChhcGkgYXMgYW55KS5tdWx0aVByb3ZpZGVyLCBcInJvdXRlUmVxdWVzdFwiKVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKFwiUGVyc2lzdGVudCBmYWlsdXJlXCIpKTtcblxuICAgICAgLy8gVGVzdCBFeHBlY3RhdGlvbnM6XG4gICAgICBjb25zdCByZXEgPSB7XG4gICAgICAgIHByb21wdDogXCJwaW5nXCIsXG4gICAgICAgIGNvbnRleHQ6IHsgZG9tYWluOiBcInRlc3RcIiwgbG9jYWxlOiBcImRlLURFXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKHJlcSBhcyBhbnkpO1xuICAgICAgZXhwZWN0KHJlcy5zdWNjZXNzKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gSW5pdGlhbCAoYXR0ZW1wdD0wKSArIDIgUmV0cmllcyAoYXR0ZW1wdD0xLi4yKSA9IDMgQ2FsbHNcbiAgICAgIGV4cGVjdChyb3V0ZVNweSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgcmVzZXQgY2lyY3VpdCBicmVha2VyIG9uIHN1Y2Nlc3NmdWwgcmVxdWVzdHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NpcmN1aXRCcmVha2VyID0ge1xuICAgICAgICBnZXRTdGF0ZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShcImhhbGYtb3BlblwiKSxcbiAgICAgICAgaXNPcGVuOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKGZhbHNlKSxcbiAgICAgICAgcmVjb3JkU3VjY2VzczogamVzdC5mbigpLFxuICAgICAgICByZWNvcmRGYWlsdXJlOiBqZXN0LmZuKCksXG4gICAgICAgIHJlc2V0OiBqZXN0LmZuKCksXG4gICAgICAgIGV4ZWN1dGU6IGplc3QuZm4oKSxcbiAgICAgIH07XG5cbiAgICAgIC8vIEluamVjdCB0aGUgbW9jayBjaXJjdWl0IGJyZWFrZXIgaW50byB0aGUgZXhpc3RpbmcgYXBpIGluc3RhbmNlXG4gICAgICAoYXBpIGFzIGFueSkuY2lyY3VpdEJyZWFrZXJzLnNldChcImJlZHJvY2tcIiwgbW9ja0NpcmN1aXRCcmVha2VyKTtcblxuICAgICAgLy8gTW9jayBnZXRBdmFpbGFibGVQcm92aWRlcnMgdG8gZW5zdXJlIGJlZHJvY2sgaXMgYXZhaWxhYmxlXG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihhcGkgYXMgYW55LCBcImdldEF2YWlsYWJsZVByb3ZpZGVyc1wiKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWUoW1wiYmVkcm9ja1wiXSk7XG5cbiAgICAgIG1vY2tzLm11bHRpUHJvdmlkZXIucm91dGVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgY29udGVudDogXCJTdWNjZXNzIGFmdGVyIGNpcmN1aXQgYnJlYWtlciByZWNvdmVyeVwiLFxuICAgICAgICBwcm92aWRlcjogXCJiZWRyb2NrXCIsXG4gICAgICAgIHJlcXVlc3RJZDogXCJjaXJjdWl0LXJlY292ZXJ5LXRlc3RcIixcbiAgICAgICAgbGF0ZW5jeU1zOiA2MDAsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogQWlSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IFwiVGVzdCBjaXJjdWl0IGJyZWFrZXIgcmVjb3ZlcnlcIixcbiAgICAgICAgY29udGV4dDogeyBkb21haW46IFwiZ2VuZXJhbFwiIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrQ2lyY3VpdEJyZWFrZXIucmVjb3JkU3VjY2VzcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgaGFuZGxlIHRpbWVvdXQgc2NlbmFyaW9zIHdpdGggY2lyY3VpdCBicmVha2VyXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tDaXJjdWl0QnJlYWtlciA9IHtcbiAgICAgICAgZ2V0U3RhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoXCJjbG9zZWRcIiksXG4gICAgICAgIHJlY29yZFN1Y2Nlc3M6IGplc3QuZm4oKSxcbiAgICAgICAgcmVjb3JkRmFpbHVyZTogamVzdC5mbigpLFxuICAgICAgICByZXNldDogamVzdC5mbigpLFxuICAgICAgICBleGVjdXRlOiBqZXN0LmZuKCksXG4gICAgICB9O1xuXG4gICAgICBtb2Nrcy5jaXJjdWl0QnJlYWtlcnMuc2V0KFwiYmVkcm9ja1wiLCBtb2NrQ2lyY3VpdEJyZWFrZXIpO1xuXG4gICAgICAvLyBTaW11bGF0ZSB0aW1lb3V0XG4gICAgICBtb2Nrcy5tdWx0aVByb3ZpZGVyLnJvdXRlUmVxdWVzdC5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEVycm9yKFwiUmVxdWVzdCB0aW1lb3V0IGFmdGVyIDMwMDAwbXNcIilcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3Q6IEFpUmVxdWVzdCA9IHtcbiAgICAgICAgcHJvbXB0OiBcIlRlc3QgdGltZW91dCBoYW5kbGluZ1wiLFxuICAgICAgICBjb250ZXh0OiB7IGRvbWFpbjogXCJnZW5lcmFsXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmdlbmVyYXRlUmVzcG9uc2UocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9Db250YWluKFwidGltZW91dFwiKTtcbiAgICAgIGV4cGVjdChtb2NrQ2lyY3VpdEJyZWFrZXIucmVjb3JkRmFpbHVyZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIkludGVncmF0aW9uIFZhbGlkYXRpb24gU3VtbWFyeVwiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgdmFsaWRhdGUgYWxsIHJvdXRpbmcgJiBpbnRlZ3JhdGlvbiByZXF1aXJlbWVudHMgYXJlIG1ldFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUaGlzIHRlc3Qgc2VydmVzIGFzIGEgY29tcHJlaGVuc2l2ZSB2YWxpZGF0aW9uIHRoYXQgYWxsIHJlcXVpcmVtZW50cyBhcmUgaW1wbGVtZW50ZWRcblxuICAgICAgLy8g4pyFIDMgUHJvdmlkZXIgYW5nZWJ1bmRlblxuICAgICAgY29uc3QgcHJvdmlkZXJzID0gYXBpLmdldEF2YWlsYWJsZVByb3ZpZGVycygpO1xuICAgICAgZXhwZWN0KHByb3ZpZGVycykudG9FcXVhbChcbiAgICAgICAgZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXCJiZWRyb2NrXCIsIFwiZ29vZ2xlXCIsIFwibWV0YVwiXSlcbiAgICAgICk7XG4gICAgICBleHBlY3QocHJvdmlkZXJzKS50b0hhdmVMZW5ndGgoMyk7XG5cbiAgICAgIC8vIOKchSBQb2xpY2llcyAmIEZhbGxiYWNrIGZ1bmt0aW9uYWxcbiAgICAgIGV4cGVjdChhcGkuZ2VuZXJhdGVSZXNwb25zZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgKGFwaSBhcyBhbnkpLm9yZGVyQnlDb3N0KS50b0JlKFwiZnVuY3Rpb25cIik7XG4gICAgICBleHBlY3QodHlwZW9mIChhcGkgYXMgYW55KS5vcmRlckJ5TGF0ZW5jeSkudG9CZShcImZ1bmN0aW9uXCIpO1xuICAgICAgZXhwZWN0KHR5cGVvZiAoYXBpIGFzIGFueSkub3JkZXJCeVJvdW5kUm9iaW4pLnRvQmUoXCJmdW5jdGlvblwiKTtcblxuICAgICAgLy8g4pyFIFRvb2wtQ2FsbGluZyBlaW5oZWl0bGljaFxuICAgICAgY29uc3QgdG9vbFJlcXVlc3Q6IEFpUmVxdWVzdCA9IHtcbiAgICAgICAgcHJvbXB0OiBcIlRlc3QgdW5pZmllZCB0b29sIGNhbGxpbmdcIixcbiAgICAgICAgY29udGV4dDogeyBkb21haW46IFwiZ2VuZXJhbFwiIH0sXG4gICAgICAgIHRvb2xzOiBbeyBuYW1lOiBcInRlc3RfdG9vbFwiLCBkZXNjcmlwdGlvbjogXCJUZXN0XCIsIHBhcmFtZXRlcnM6IHt9IH1dLFxuICAgICAgfTtcblxuICAgICAgbW9ja3MubXVsdGlQcm92aWRlci5yb3V0ZVJlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBjb250ZW50OiBcIlRvb2wgY2FsbGluZyB3b3Jrc1wiLFxuICAgICAgICBwcm92aWRlcjogXCJiZWRyb2NrXCIsXG4gICAgICAgIHJlcXVlc3RJZDogXCJ2YWxpZGF0aW9uLXRlc3RcIixcbiAgICAgICAgcHJvY2Vzc2luZ1RpbWU6IDYwMCxcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZW5lcmF0ZVJlc3BvbnNlKHRvb2xSZXF1ZXN0KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyDinIUgQ2lyY3VpdC1CcmVha2VyIHVuZCBSZXRyeS1Mb2dpY1xuICAgICAgZXhwZWN0KG1vY2tzLmNpcmN1aXRCcmVha2Vycy5zaXplKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoYXBpLnJlc2V0Q2lyY3VpdEJyZWFrZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodHlwZW9mIChhcGkgYXMgYW55KS5nZXRBdmFpbGFibGVQcm92aWRlcnMpLnRvQmUoXCJmdW5jdGlvblwiKTtcblxuICAgICAgLy8gQWxsIHJlcXVpcmVtZW50cyB2YWxpZGF0ZWQg4pyFXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCLinIUgQWxsIFJvdXRpbmcgJiBJbnRlZ3JhdGlvbiByZXF1aXJlbWVudHMgdmFsaWRhdGVkIHN1Y2Nlc3NmdWxseSFcIlxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==