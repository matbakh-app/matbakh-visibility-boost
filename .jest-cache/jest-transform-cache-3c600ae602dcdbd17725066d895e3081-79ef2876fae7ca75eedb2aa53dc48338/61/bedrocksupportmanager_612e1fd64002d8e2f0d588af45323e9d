fa8b62d5814059d83582ffd281b6a1a9
"use strict";
/**
 * Bedrock Support Manager - Core orchestrator for support operations
 *
 * This module implements the central Bedrock Support Manager that coordinates
 * infrastructure validation, meta-monitoring, and implementation support using
 * a hybrid routing approach (direct Bedrock + MCP integration).
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.BedrockSupportManager = void 0;
exports.createBedrockSupportManager = createBedrockSupportManager;
const bedrock_adapter_1 = require("./adapters/bedrock-adapter");
const ai_feature_flags_1 = require("./ai-feature-flags");
const audit_trail_system_1 = require("./audit-trail-system");
const circuit_breaker_1 = require("./circuit-breaker");
const compliance_integration_1 = require("./compliance-integration");
const cost_performance_optimizer_1 = require("./cost-performance-optimizer");
const direct_bedrock_client_1 = require("./direct-bedrock-client");
const emergency_shutdown_manager_1 = require("./emergency-shutdown-manager");
const gdpr_hybrid_compliance_validator_1 = require("./gdpr-hybrid-compliance-validator");
const hybrid_health_monitor_1 = require("./hybrid-health-monitor");
const implementation_support_1 = require("./implementation-support");
const infrastructure_auditor_1 = require("./infrastructure-auditor");
const intelligent_router_1 = require("./intelligent-router");
const kiro_bridge_1 = require("./kiro-bridge");
const mcp_router_1 = require("./mcp-router");
const meta_monitor_1 = require("./meta-monitor");
const provider_agreement_compliance_1 = require("./provider-agreement-compliance");
const red_team_evaluator_1 = require("./red-team-evaluator");
const security_posture_monitor_1 = require("./security-posture-monitor");
const system_resource_monitor_1 = require("./system-resource-monitor");
/**
 * Bedrock Support Manager Implementation
 *
 * Central orchestrator for Bedrock support operations with hybrid routing
 */
class BedrockSupportManager {
    isActivated = false;
    config;
    featureFlags;
    bedrockAdapter;
    logger;
    providerCompliance;
    complianceIntegration;
    gdprHybridValidator;
    // Circuit Breaker Integration for Hybrid Routing
    circuitBreaker;
    directBedrockClient;
    mcpRouter;
    intelligentRouter;
    auditTrail;
    // Support Operation Components
    infrastructureAuditor;
    metaMonitor;
    implementationSupport;
    hybridHealthMonitor;
    kiroBridge;
    securityPostureMonitor;
    // Cost & Performance Management (using existing system)
    costPerformanceOptimizer;
    emergencyShutdownManager;
    // System Resource Monitoring for 5% overhead requirement
    systemResourceMonitor;
    constructor(config, featureFlags, bedrockAdapter, providerCompliance, complianceIntegration, gdprHybridValidator) {
        this.config = this.getDefaultConfig(config);
        this.featureFlags = featureFlags || new ai_feature_flags_1.AiFeatureFlags();
        this.bedrockAdapter = bedrockAdapter || new bedrock_adapter_1.BedrockAdapter();
        this.logger = console;
        this.providerCompliance =
            providerCompliance || new provider_agreement_compliance_1.ProviderAgreementCompliance();
        this.complianceIntegration =
            complianceIntegration || new compliance_integration_1.ComplianceIntegration();
        this.gdprHybridValidator =
            gdprHybridValidator || new gdpr_hybrid_compliance_validator_1.GDPRHybridComplianceValidator();
        // Initialize Circuit Breaker with support-specific configuration
        this.circuitBreaker = new circuit_breaker_1.CircuitBreaker({
            failureThreshold: 3, // More sensitive for support operations
            recoveryTimeout: 30000, // 30 seconds recovery for support
            halfOpenMaxCalls: 2, // Conservative half-open testing
            healthCheckInterval: 15000, // 15 second health checks
        });
        // Initialize Audit Trail System
        this.auditTrail = new audit_trail_system_1.AuditTrailSystem({
            complianceMode: "strict",
            enableIntegrityChecking: true,
            retentionDays: 2555, // 7 years for GDPR compliance
        });
        // Initialize Direct Bedrock Client for critical operations
        this.directBedrockClient = new direct_bedrock_client_1.DirectBedrockClient({
            region: process.env.AWS_REGION || "eu-central-1",
            emergencyTimeout: 5000, // < 5s for emergency operations
            criticalTimeout: 10000, // < 10s for critical operations
            enableCircuitBreaker: true,
            enableHealthMonitoring: true,
            enableComplianceChecks: true,
        });
        // Initialize MCP Router for standard operations
        this.mcpRouter = new mcp_router_1.MCPRouter({
            timeout: 30000,
            maxRetries: 3,
            healthCheckInterval: 30000,
        });
        // Initialize Intelligent Router for routing decisions
        this.intelligentRouter = new intelligent_router_1.IntelligentRouter(this.directBedrockClient, this.mcpRouter, this.featureFlags, this.circuitBreaker, this.gdprHybridValidator, this.auditTrail);
        // Initialize Support Operation Components
        this.infrastructureAuditor = new infrastructure_auditor_1.InfrastructureAuditor(this.featureFlags, this.auditTrail);
        this.metaMonitor = new meta_monitor_1.MetaMonitor(this.intelligentRouter, this.auditTrail, this.featureFlags);
        this.implementationSupport = new implementation_support_1.ImplementationSupport(this.intelligentRouter, this.auditTrail, this.featureFlags);
        this.hybridHealthMonitor = new hybrid_health_monitor_1.HybridHealthMonitor(this.mcpRouter, this.directBedrockClient, this.featureFlags);
        this.kiroBridge = new kiro_bridge_1.KiroBridge(this.mcpRouter, this.auditTrail, this.featureFlags);
        this.securityPostureMonitor = new security_posture_monitor_1.SecurityPostureMonitor(undefined, this.featureFlags, this.auditTrail, this.circuitBreaker, this.gdprHybridValidator, this.providerCompliance, this.directBedrockClient, this.mcpRouter);
        // Initialize System Resource Monitor for 5% overhead requirement
        this.systemResourceMonitor = new system_resource_monitor_1.SystemResourceMonitor(this.featureFlags, this.auditTrail, {
            enabled: true,
            monitoringIntervalMs: 10000, // 10 seconds
            alertCheckIntervalMs: 30000, // 30 seconds
            thresholds: {
                cpuWarningPercent: 0.8, // 0.8% CPU warning
                cpuCriticalPercent: 1.0, // 1% CPU critical (well under 5%)
                memoryWarningMB: 40, // 40MB memory warning
                memoryCriticalMB: 50, // 50MB memory critical (reasonable for 5% overhead)
            },
        });
        // Initialize Cost Performance Optimizer (using existing system)
        const costBudget = {
            dailyLimit: 10.0, // €10 per day
            monthlyLimit: 300.0, // €300 per month
            alertThresholds: [50, 75, 90], // Alert at 50%, 75%, 90%
            hardStop: true, // Enable hard stop on budget exceeded
        };
        this.costPerformanceOptimizer = new cost_performance_optimizer_1.CostPerformanceOptimizer(costBudget, process.env.AWS_REGION || "eu-central-1");
        // Initialize Emergency Shutdown Manager
        this.emergencyShutdownManager = new emergency_shutdown_manager_1.EmergencyShutdownManager({
            enableAutoShutdown: true,
            shutdownThresholds: {
                errorRate: 0.1, // 10% error rate
                latencyMs: 5000, // 5 seconds
                costEuroPerHour: 50.0, // €50 per hour
                consecutiveFailures: 5,
            },
            notificationChannels: {
            // Configure notification channels as needed
            },
            recoveryConfig: {
                autoRecoveryEnabled: true,
                recoveryDelayMs: 300000, // 5 minutes
                healthCheckIntervalMs: 60000, // 1 minute
                maxRecoveryAttempts: 3,
            },
        }, this.featureFlags, this.auditTrail, this.circuitBreaker);
    }
    /**
     * Activate Bedrock Support Mode
     */
    async activate() {
        try {
            this.log("bedrock-activation", "Attempting to activate Bedrock Support Mode");
            // Check if feature flag is enabled
            const supportModeEnabled = await this.featureFlags.isBedrockSupportModeEnabled();
            if (!supportModeEnabled) {
                const message = "Bedrock Support Mode is disabled via feature flag";
                this.log("bedrock-activation", message);
                return {
                    success: false,
                    message,
                    timestamp: new Date(),
                    configuration: this.config,
                };
            }
            // Validate feature flag configuration
            const validation = await this.featureFlags.validateBedrockSupportModeFlags();
            if (!validation.isValid) {
                const message = `Feature flag validation failed: ${validation.errors.join(", ")}`;
                this.log("bedrock-activation", message);
                return {
                    success: false,
                    message,
                    timestamp: new Date(),
                    configuration: this.config,
                    validationResults: validation,
                };
            }
            // Check Bedrock adapter availability
            const bedrockEnabled = await this.featureFlags.isProviderEnabled("bedrock");
            if (!bedrockEnabled) {
                const message = "Bedrock provider is not enabled";
                this.log("bedrock-activation", message);
                return {
                    success: false,
                    message,
                    timestamp: new Date(),
                    configuration: this.config,
                };
            }
            // Perform initial infrastructure audit
            this.log("bedrock-activation", "Running initial infrastructure audit");
            const auditResult = await this.runInfrastructureAudit();
            if (auditResult.overallHealth === "critical") {
                const message = "Cannot activate support mode: critical infrastructure issues detected";
                this.log("bedrock-activation", message);
                return {
                    success: false,
                    message,
                    timestamp: new Date(),
                    configuration: this.config,
                };
            }
            // Activate support mode
            this.isActivated = true;
            this.config.enabled = true;
            // Start system resource monitoring to ensure < 5% overhead
            await this.systemResourceMonitor.startMonitoring();
            this.log("bedrock-activation", "System resource monitoring started");
            const message = "Bedrock Support Mode activated successfully";
            this.log("bedrock-activation", message);
            return {
                success: true,
                message,
                timestamp: new Date(),
                configuration: this.config,
                validationResults: validation,
            };
        }
        catch (error) {
            const message = `Failed to activate Bedrock Support Mode: ${error instanceof Error ? error.message : "Unknown error"}`;
            this.log("bedrock-activation", message);
            // Ensure we don't leave the system in an inconsistent state
            this.isActivated = false;
            this.config.enabled = false;
            return {
                success: false,
                message,
                timestamp: new Date(),
                configuration: this.config,
            };
        }
    }
    /**
     * Deactivate Bedrock Support Mode
     */
    async deactivate() {
        try {
            this.log("bedrock-activation", "Deactivating Bedrock Support Mode");
            // Stop system resource monitoring
            await this.systemResourceMonitor.stopMonitoring();
            this.log("bedrock-activation", "System resource monitoring stopped");
            this.isActivated = false;
            this.config.enabled = false;
            // Safely disable feature flags
            await this.featureFlags.disableBedrockSupportModeSafely();
            this.log("bedrock-activation", "Bedrock Support Mode deactivated successfully");
        }
        catch (error) {
            this.log("bedrock-activation", `Error during deactivation: ${error instanceof Error ? error.message : "Unknown error"}`);
            throw error;
        }
    }
    /**
     * Get support mode status
     */
    getSupportModeStatus() {
        return {
            isActive: this.isActivated,
            config: this.config,
        };
    }
    /**
     * Check if support mode is active
     */
    isActive() {
        return this.isActivated && this.config.enabled;
    }
    /**
     * Run infrastructure audit with circuit breaker protection
     */
    async runInfrastructureAudit() {
        this.log("bedrock-activation", "Starting infrastructure audit with circuit breaker protection");
        // Validate compliance before running audit
        await this.validateComplianceForSupportOperation("infrastructure", "direct_bedrock", "critical");
        try {
            // Check circuit breaker status before proceeding
            const circuitBreakerStatus = await this.getCircuitBreakerStatus();
            if (circuitBreakerStatus.overallHealth === "critical") {
                this.log("bedrock-activation", "Infrastructure audit aborted - both routing paths unavailable");
                return {
                    timestamp: new Date(),
                    overallHealth: "critical",
                    detectedIssues: [
                        {
                            id: "circuit-breaker-critical",
                            severity: "critical",
                            category: "availability",
                            description: "Both routing paths (direct Bedrock and MCP) are unavailable due to circuit breaker protection",
                            affectedComponents: ["direct-bedrock-client", "mcp-router"],
                            detectedAt: new Date(),
                        },
                    ],
                    implementationGaps: [],
                    recommendations: [
                        {
                            id: "restore-routing-paths",
                            type: "immediate",
                            description: "Investigate and restore routing path availability",
                            expectedImpact: "Restore Bedrock Support Mode functionality",
                            implementationSteps: [
                                "Check direct Bedrock client health",
                                "Verify MCP router connectivity",
                                "Reset circuit breakers if appropriate",
                                "Monitor system recovery",
                            ],
                        },
                    ],
                    complianceStatus: {
                        gdprCompliant: true,
                        dataResidencyCompliant: true,
                        auditTrailComplete: true,
                        issues: [
                            "Circuit breaker protection active - limited audit capability",
                        ],
                    },
                };
            }
            // Execute infrastructure audit through intelligent router with circuit breaker protection
            const auditResult = await this.circuitBreaker.execute("bedrock", // Use bedrock provider for infrastructure audit
            async () => {
                return await this.infrastructureAuditor.performSystemHealthCheck();
            });
            this.log("bedrock-activation", "Infrastructure audit completed successfully through circuit breaker");
            // Simulate infrastructure audit - in real implementation this would
            // check actual system health, database connections, API endpoints, etc.
            const issues = [];
            const gaps = [];
            const recommendations = [];
            // Check feature flag consistency
            const flagValidation = await this.featureFlags.validateAllFlags();
            if (!flagValidation.isValid) {
                // Determine severity based on error content
                const hasCriticalErrors = flagValidation.errors.some((error) => error.toLowerCase().includes("critical") ||
                    error.toLowerCase().includes("system error"));
                issues.push({
                    id: "feature-flags-inconsistent",
                    severity: hasCriticalErrors ? "critical" : "medium",
                    category: "compliance",
                    description: "Feature flag configuration has validation errors",
                    affectedComponents: ["feature-flags"],
                    detectedAt: new Date(),
                });
            }
            // Check provider availability
            const providers = ["bedrock", "google", "meta"];
            for (const provider of providers) {
                const enabled = await this.featureFlags.isProviderEnabled(provider);
                if (!enabled && provider === "bedrock") {
                    issues.push({
                        id: `provider-${provider}-disabled`,
                        severity: "high",
                        category: "availability",
                        description: `Critical provider ${provider} is disabled`,
                        affectedComponents: [`${provider}-adapter`],
                        detectedAt: new Date(),
                    });
                }
            }
            // Determine overall health
            const criticalIssues = issues.filter((i) => i.severity === "critical");
            const highIssues = issues.filter((i) => i.severity === "high");
            const mediumIssues = issues.filter((i) => i.severity === "medium");
            let overallHealth;
            if (criticalIssues.length > 0) {
                overallHealth = "critical";
            }
            else if (highIssues.length > 0 || mediumIssues.length > 0) {
                overallHealth = "warning";
            }
            else {
                overallHealth = "healthy";
            }
            // Generate recommendations based on issues
            if (issues.length > 0) {
                recommendations.push({
                    id: "resolve-configuration-issues",
                    type: "immediate",
                    description: "Resolve feature flag and provider configuration issues",
                    expectedImpact: "Improved system stability and reliability",
                    implementationSteps: [
                        "Review feature flag validation errors",
                        "Enable required providers",
                        "Validate configuration consistency",
                    ],
                });
            }
            const result = {
                timestamp: new Date(),
                overallHealth,
                detectedIssues: issues,
                implementationGaps: gaps,
                recommendations,
                complianceStatus: {
                    gdprCompliant: true, // Assume compliant for now
                    dataResidencyCompliant: true,
                    auditTrailComplete: true,
                    issues: [],
                },
            };
            this.log("bedrock-activation", `Infrastructure audit completed: ${overallHealth} (${issues.length} issues)`);
            return result;
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : "Unknown error";
            this.log("bedrock-activation", `Infrastructure audit failed: ${errorMessage}`);
            // Check if this is a circuit breaker failure
            const isCircuitBreakerError = errorMessage.includes("circuit breaker is OPEN");
            if (isCircuitBreakerError) {
                // Handle circuit breaker failure
                await this.handleCircuitBreakerFailure("direct", // Assuming direct path failed
                "infrastructure_audit", { error: errorMessage, timestamp: new Date() });
                // Try fallback through MCP if available
                try {
                    this.log("bedrock-activation", "Attempting infrastructure audit through MCP fallback");
                    const fallbackResult = await this.circuitBreaker.execute("google", // Use google as MCP proxy
                    async () => {
                        return await this.infrastructureAuditor.performSystemHealthCheck();
                    });
                    this.log("bedrock-activation", "Infrastructure audit completed successfully through MCP fallback");
                    // Return successful result with fallback note
                    return {
                        ...fallbackResult,
                        detectedIssues: [
                            ...fallbackResult.detectedIssues,
                            {
                                id: "direct-path-circuit-breaker-open",
                                severity: "high",
                                category: "availability",
                                description: "Direct Bedrock path unavailable - using MCP fallback",
                                affectedComponents: ["direct-bedrock-client"],
                                detectedAt: new Date(),
                            },
                        ],
                        recommendations: [
                            ...fallbackResult.recommendations,
                            {
                                id: "restore-direct-path",
                                type: "short_term",
                                description: "Investigate and restore direct Bedrock path",
                                expectedImpact: "Improved performance for critical operations",
                                implementationSteps: [
                                    "Check direct Bedrock client health",
                                    "Verify AWS connectivity",
                                    "Reset circuit breaker if appropriate",
                                ],
                            },
                        ],
                    };
                }
                catch (fallbackError) {
                    this.log("bedrock-activation", `MCP fallback also failed: ${fallbackError}`);
                    // Both paths failed - trigger emergency procedures
                    await this.triggerEmergencyProcedures("infrastructure_audit", {
                        primaryError: errorMessage,
                        fallbackError: String(fallbackError),
                    });
                }
            }
            // Log audit failure to audit trail
            await this.auditTrail.logSupportModeEvent("infrastructure_audit_failed", {
                timestamp: new Date(),
                error: errorMessage,
                isCircuitBreakerError,
                operation: "infrastructure_audit",
            }, "system");
            // Return a critical result if audit fails
            return {
                timestamp: new Date(),
                overallHealth: "critical",
                detectedIssues: [
                    {
                        id: "audit-failure",
                        severity: "critical",
                        category: "availability",
                        description: `Infrastructure audit failed: ${errorMessage}`,
                        affectedComponents: ["audit-system"],
                        detectedAt: new Date(),
                    },
                ],
                implementationGaps: [],
                recommendations: [
                    {
                        id: "fix-audit-system",
                        type: "immediate",
                        description: "Fix infrastructure audit system",
                        expectedImpact: "Restore monitoring capabilities",
                        implementationSteps: [
                            "Investigate audit failure",
                            "Check circuit breaker status",
                            "Verify routing path health",
                            "Fix underlying issues",
                            "Re-run audit",
                        ],
                    },
                ],
                complianceStatus: {
                    gdprCompliant: false,
                    dataResidencyCompliant: false,
                    auditTrailComplete: false,
                    issues: ["Audit system failure prevents compliance verification"],
                },
            };
        }
    }
    /**
     * Enable meta-monitoring of Kiro execution
     */
    async enableMetaMonitoring() {
        this.log("bedrock-activation", "Enabling meta-monitoring");
        if (!this.isActive()) {
            throw new Error("Cannot enable meta-monitoring: Support mode is not active");
        }
        // Validate compliance before enabling meta-monitoring
        await this.validateComplianceForSupportOperation("meta_monitor", "direct_bedrock", "critical");
        // In a real implementation, this would set up monitoring hooks
        // For now, we'll just log the activation
        this.log("bedrock-activation", "Meta-monitoring enabled successfully");
    }
    /**
     * Provide fallback support for failed operations with circuit breaker protection
     */
    async provideFallbackSupport(context) {
        // Handle null or invalid context
        if (!context || !context.operation) {
            this.log("bedrock-activation", "Providing fallback support for: invalid context");
            return {
                success: false,
                supportType: "infrastructure",
                actionsPerformed: [
                    {
                        action: "validate_context",
                        timestamp: new Date(),
                        result: "failure",
                        details: "Invalid or null failure context provided",
                    },
                ],
                diagnostics: {
                    systemHealth: {},
                    performanceMetrics: {
                        responseTime: 0,
                        memoryUsage: 0,
                        cpuUsage: 0,
                        networkLatency: 0,
                    },
                    errorLogs: ["Invalid failure context"],
                    recommendations: ["Provide valid failure context"],
                },
                nextSteps: [
                    "Manual intervention required",
                    "Contact system administrator",
                ],
            };
        }
        this.log("bedrock-activation", `Providing fallback support for: ${context.operation} with circuit breaker protection`);
        // Check circuit breaker status before proceeding
        const circuitBreakerStatus = await this.getCircuitBreakerStatus();
        // Validate compliance before providing fallback support
        await this.validateComplianceForSupportOperation("emergency", "direct_bedrock", "critical");
        try {
            // Execute fallback support through circuit breaker with intelligent routing
            const supportResult = await this.executeWithCircuitBreakerProtection(context.operation, "emergency", async () => {
                return await this.performFallbackSupport(context);
            });
            // Log successful fallback support
            await this.auditTrail.logSupportModeEvent("fallback_support_provided", {
                timestamp: new Date(),
                operation: context.operation,
                severity: context.severity,
                circuitBreakerStatus,
                supportResult,
            }, "system");
            return supportResult;
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Fallback support failed: ${errorMessage}`);
            // Handle circuit breaker failures
            if (errorMessage.includes("circuit breaker is OPEN")) {
                await this.handleCircuitBreakerFailure("direct", // Assuming direct path failed first
                context.operation, { ...context, fallbackError: errorMessage });
            }
            // Log failure to audit trail
            await this.auditTrail.logSupportModeEvent("fallback_support_failed", {
                timestamp: new Date(),
                operation: context.operation,
                error: errorMessage,
                context,
            }, "system");
            // Return failure result
            return {
                success: false,
                supportType: "infrastructure",
                actionsPerformed: [
                    {
                        action: "fallback_support_attempt",
                        timestamp: new Date(),
                        result: "failure",
                        details: `Fallback support failed: ${errorMessage}`,
                    },
                ],
                diagnostics: {
                    systemHealth: { circuitBreakerStatus },
                    performanceMetrics: {
                        responseTime: 0,
                        memoryUsage: 0,
                        cpuUsage: 0,
                        networkLatency: 0,
                    },
                    errorLogs: [context.errorMessage, errorMessage],
                    recommendations: [
                        "Check circuit breaker status",
                        "Verify routing path health",
                        "Consider manual intervention",
                    ],
                },
                nextSteps: [
                    "Manual intervention required",
                    "Check system health",
                    "Contact system administrator",
                ],
            };
        }
    }
    /**
     * Execute operation with circuit breaker protection and intelligent routing
     */
    async executeWithCircuitBreakerProtection(operation, priority, operationFn) {
        try {
            // Use intelligent router to determine best path
            if (this.intelligentRouter) {
                const routingDecision = await this.intelligentRouter.makeRoutingDecision({
                    operation: operation,
                    priority: priority,
                    context: { timestamp: new Date() },
                });
                this.log("bedrock-activation", `Routing decision: ${routingDecision.selectedRoute} (${routingDecision.reason})`);
                // Execute through selected route with circuit breaker protection
                const provider = routingDecision.selectedRoute === "direct" ? "bedrock" : "google";
                return await this.circuitBreaker.execute(provider, operationFn);
            }
            else {
                // Fallback to direct circuit breaker execution
                return await this.circuitBreaker.execute("bedrock", operationFn);
            }
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Circuit breaker protected operation failed: ${errorMessage}`);
            throw error;
        }
    }
    /**
     * Perform the actual fallback support logic
     */
    async performFallbackSupport(context) {
        try {
            const actions = [];
            const diagnostics = {
                systemHealth: {},
                performanceMetrics: {
                    responseTime: 0,
                    memoryUsage: 0,
                    cpuUsage: 0,
                    networkLatency: 0,
                },
                errorLogs: [context.errorMessage],
                recommendations: [],
            };
            // Analyze the failure context
            actions.push({
                action: "analyze_failure_context",
                timestamp: new Date(),
                result: "success",
                details: `Analyzed failure: ${context.errorType} in ${context.operation}`,
            });
            // Determine support type based on failure
            let supportType;
            if (context.affectedSystems.includes("infrastructure")) {
                supportType = "infrastructure";
            }
            else if (context.operation.includes("execution")) {
                supportType = "execution";
            }
            else {
                supportType = "implementation";
            }
            // Generate recommendations based on failure type
            const nextSteps = [];
            if (context.severity === "critical") {
                nextSteps.push("Escalate to on-call team");
                nextSteps.push("Activate emergency procedures");
            }
            else {
                nextSteps.push("Monitor for recurring issues");
                nextSteps.push("Schedule remediation during maintenance window");
            }
            diagnostics.recommendations = nextSteps;
            return {
                success: true,
                supportType,
                actionsPerformed: actions,
                diagnostics,
                nextSteps,
            };
        }
        catch (error) {
            this.log("bedrock-activation", `Fallback support failed: ${error instanceof Error ? error.message : "Unknown error"}`);
            return {
                success: false,
                supportType: "infrastructure",
                actionsPerformed: [
                    {
                        action: "fallback_support_attempt",
                        timestamp: new Date(),
                        result: "failure",
                        details: `Failed to provide fallback support: ${error instanceof Error ? error.message : "Unknown error"}`,
                    },
                ],
                diagnostics: {
                    systemHealth: {},
                    performanceMetrics: {
                        responseTime: 0,
                        memoryUsage: 0,
                        cpuUsage: 0,
                        networkLatency: 0,
                    },
                    errorLogs: [context.errorMessage],
                    recommendations: ["Manual intervention required"],
                },
                nextSteps: [
                    "Manual intervention required",
                    "Contact system administrator",
                ],
            };
        }
    }
    /**
     * Send diagnostics to Kiro
     */
    async sendDiagnosticsToKiro(diagnostics) {
        this.log("bedrock-activation", "Sending diagnostics to Kiro");
        // In a real implementation, this would send data through MCP or direct communication
        // For now, we'll just log the action
        this.log("bedrock-activation", `Diagnostics sent: ${diagnostics.recommendations.length} recommendations`);
    }
    /**
     * Receive execution data from Kiro
     */
    async receiveKiroExecutionData(executionData) {
        this.log("bedrock-activation", `Received execution data: ${executionData.operation}`);
        // In a real implementation, this would analyze the execution data
        // and potentially trigger support actions
        if (!executionData.success) {
            this.log("bedrock-activation", `Execution failure detected: ${executionData.errorDetails}`);
        }
    }
    // Security & Compliance Methods
    async validateComplianceStatus() {
        try {
            this.log("bedrock-activation", "Validating compliance status for all providers");
            // Get compliance summary from the compliance integration
            const complianceSummary = await this.complianceIntegration.getComplianceSummary();
            // Check Bedrock-specific compliance
            const bedrockCompliance = await this.providerCompliance.verifyProviderCompliance("bedrock");
            // Validate GDPR compliance for both routing paths
            const gdprCompliant = await this.validateGDPRCompliance();
            // Check EU data residency compliance for direct Bedrock access
            const euDataResidencyCompliant = await this.validateEUDataResidencyCompliance();
            // Aggregate violations and recommendations
            const violations = [];
            const recommendations = [];
            // Check overall compliance status
            if (complianceSummary.overallCompliance === "non_compliant") {
                violations.push("Overall system compliance is non-compliant across providers");
                recommendations.push("Review and update provider agreements to ensure compliance");
            }
            // Check Bedrock-specific compliance
            if (!bedrockCompliance.compliant) {
                violations.push(`Bedrock provider compliance issues: ${bedrockCompliance.violations.join(", ")}`);
                recommendations.push("Update Bedrock provider agreement and verify compliance status");
            }
            // Check GDPR compliance
            if (!gdprCompliant) {
                violations.push("GDPR compliance validation failed for hybrid routing");
                recommendations.push("Ensure PII detection and redaction is enabled for both MCP and direct Bedrock operations");
            }
            // Check EU data residency
            if (!euDataResidencyCompliant) {
                violations.push("EU data residency compliance failed for direct Bedrock access");
                recommendations.push("Configure Bedrock to use EU-Central-1 region for data processing");
            }
            // Check for recent violations
            if (complianceSummary.recentViolations > 0) {
                violations.push(`${complianceSummary.recentViolations} recent compliance violations detected`);
                recommendations.push("Review and resolve recent compliance violations");
            }
            // Check for pending actions
            if (complianceSummary.pendingActions > 0) {
                recommendations.push(`${complianceSummary.pendingActions} provider agreements require attention (expiring soon)`);
            }
            const isCompliant = violations.length === 0;
            this.log("bedrock-activation", "Compliance validation completed", {
                isCompliant,
                violationsCount: violations.length,
                recommendationsCount: recommendations.length,
                overallCompliance: complianceSummary.overallCompliance,
                bedrockCompliant: bedrockCompliance.compliant,
                gdprCompliant,
                euDataResidencyCompliant,
            });
            return {
                isCompliant,
                violations,
                recommendations,
                lastChecked: new Date(),
            };
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Compliance validation failed: ${errorMessage}`);
            return {
                isCompliant: false,
                violations: [`Compliance validation error: ${errorMessage}`],
                recommendations: [
                    "Check compliance system configuration and provider agreements",
                ],
                lastChecked: new Date(),
            };
        }
    }
    /**
     * Validate GDPR compliance for both routing paths
     */
    async validateGDPRCompliance() {
        try {
            this.log("bedrock-activation", "Validating GDPR compliance for both direct Bedrock and MCP routing paths");
            // Generate comprehensive hybrid compliance report
            const complianceReport = await this.gdprHybridValidator.generateHybridComplianceReport();
            // Log compliance status
            this.log("bedrock-activation", `Hybrid GDPR compliance report generated: ${complianceReport.overallCompliance} (Score: ${complianceReport.complianceScore}%)`);
            // Check if overall compliance is acceptable
            if (complianceReport.overallCompliance === "non_compliant") {
                this.log("bedrock-activation", `GDPR compliance failed: ${complianceReport.criticalIssues.join(", ")}`);
                return false;
            }
            // Check individual routing path compliance
            const directBedrockCompliant = complianceReport.routingPathCompliance.directBedrock.isCompliant;
            const mcpIntegrationCompliant = complianceReport.routingPathCompliance.mcpIntegration.isCompliant;
            if (!directBedrockCompliant) {
                this.log("bedrock-activation", `Direct Bedrock routing path GDPR compliance failed: ${complianceReport.routingPathCompliance.directBedrock.violations
                    .map((v) => v.description)
                    .join(", ")}`);
            }
            if (!mcpIntegrationCompliant) {
                this.log("bedrock-activation", `MCP integration routing path GDPR compliance failed: ${complianceReport.routingPathCompliance.mcpIntegration.violations
                    .map((v) => v.description)
                    .join(", ")}`);
            }
            // Check cross-path compliance
            const crossPathCompliant = Object.values(complianceReport.crossPathCompliance).every(Boolean);
            if (!crossPathCompliant) {
                this.log("bedrock-activation", "Cross-path GDPR compliance issues detected");
            }
            // Log warnings if any
            const totalWarnings = complianceReport.routingPathCompliance.directBedrock.warnings.length +
                complianceReport.routingPathCompliance.mcpIntegration.warnings.length;
            if (totalWarnings > 0) {
                this.log("bedrock-activation", `GDPR compliance warnings detected: ${totalWarnings} warnings across routing paths`);
            }
            // Return true if both paths are compliant or partially compliant with high score
            return (complianceReport.overallCompliance === "compliant" ||
                (complianceReport.overallCompliance === "partial" &&
                    complianceReport.complianceScore >= 80));
        }
        catch (error) {
            this.log("bedrock-activation", `GDPR compliance validation error: ${error instanceof Error ? error.message : String(error)}`);
            return false;
        }
    }
    /**
     * Validate EU data residency compliance for direct Bedrock access
     */
    async validateEUDataResidencyCompliance() {
        try {
            // Check Bedrock agreement for EU data residency
            const bedrockAgreement = this.providerCompliance.getAgreement("bedrock");
            if (!bedrockAgreement || !bedrockAgreement.euDataResidency) {
                this.log("bedrock-activation", "Bedrock agreement does not guarantee EU data residency");
                return false;
            }
            // Validate that Bedrock is configured to use EU regions
            const euRegionConfigured = await this.validateBedrockEURegionConfiguration();
            if (!euRegionConfigured) {
                this.log("bedrock-activation", "Bedrock not configured to use EU regions for data processing");
                return false;
            }
            return true;
        }
        catch (error) {
            this.log("bedrock-activation", `EU data residency validation error: ${error}`);
            return false;
        }
    }
    /**
     * Validate PII detection configuration
     */
    async validatePIIDetectionConfiguration() {
        try {
            // Check if PII detection feature flags are enabled
            const piiDetectionEnabled = this.featureFlags.getFlag("pii_detection_enabled", false);
            const piiRedactionEnabled = this.featureFlags.getFlag("pii_redaction_enabled", false);
            if (!piiDetectionEnabled || !piiRedactionEnabled) {
                return false;
            }
            // Additional validation could check if PII detection services are running
            // This would integrate with existing PII detection infrastructure
            return true;
        }
        catch (error) {
            this.log("bedrock-activation", `PII detection validation error: ${error}`);
            return false;
        }
    }
    /**
     * Validate Bedrock EU region configuration
     */
    async validateBedrockEURegionConfiguration() {
        try {
            // Check if Bedrock is configured to use EU regions
            const bedrockRegion = process.env.AWS_BEDROCK_REGION || process.env.AWS_REGION || "us-east-1";
            // EU regions for Bedrock
            const euRegions = [
                "eu-central-1",
                "eu-west-1",
                "eu-west-2",
                "eu-west-3",
                "eu-north-1",
            ];
            if (!euRegions.includes(bedrockRegion)) {
                this.log("bedrock-activation", `Bedrock region ${bedrockRegion} is not an EU region`);
                return false;
            }
            return true;
        }
        catch (error) {
            this.log("bedrock-activation", `Bedrock EU region validation error: ${error}`);
            return false;
        }
    }
    /**
     * Validate compliance for support operations with hybrid routing
     */
    async validateComplianceForSupportOperation(operationType, routeType = "direct_bedrock", priority = "medium") {
        try {
            this.log("bedrock-activation", `Validating GDPR compliance for support operation: ${operationType} via ${routeType} route`);
            // Create routing path for validation
            const routingPath = {
                routeType,
                provider: "bedrock",
                operationType,
                priority,
            };
            // Generate correlation ID for this validation
            const correlationId = `support-${operationType}-${routeType}-${Date.now()}`;
            // Validate GDPR compliance before routing
            const validationResult = await this.gdprHybridValidator.validateBeforeRouting(routingPath, correlationId);
            if (!validationResult.allowed) {
                throw new Error(validationResult.reason);
            }
            // Also validate using existing compliance integration for provider agreements
            const mockRequest = {
                prompt: `Support operation: ${operationType}`,
                context: {
                    domain: "support",
                    intent: "infrastructure_support",
                    routingPath: routeType,
                },
            };
            await this.complianceIntegration.enforceCompliance(mockRequest, "bedrock", correlationId);
            this.log("bedrock-activation", `GDPR and provider compliance validation passed for support operation: ${operationType} via ${routeType}`);
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Compliance validation failed for support operation: ${operationType} via ${routeType} - ${errorMessage}`);
            throw new Error(`Support operation blocked due to compliance violation: ${errorMessage}`);
        }
    }
    /**
     * Create compliance reporting for support mode
     */
    async createComplianceReportForSupportMode() {
        try {
            this.log("bedrock-activation", "Generating compliance report for support mode");
            const reportId = `bedrock-support-compliance-${Date.now()}`;
            const timestamp = new Date();
            // Get overall compliance status
            const complianceStatus = await this.validateComplianceStatus();
            // Check Bedrock-specific compliance
            const bedrockCompliance = await this.providerCompliance.verifyProviderCompliance("bedrock");
            // Check GDPR compliance
            const gdprCompliant = await this.validateGDPRCompliance();
            // Check EU data residency
            const euDataResidencyCompliant = await this.validateEUDataResidencyCompliance();
            // Get compliance summary for all providers
            const complianceSummary = await this.complianceIntegration.getComplianceSummary();
            const report = {
                reportId,
                timestamp,
                supportModeCompliance: {
                    overallCompliant: complianceStatus.isCompliant,
                    bedrockCompliant: bedrockCompliance.compliant,
                    gdprCompliant,
                    euDataResidencyCompliant,
                },
                hybridRoutingCompliance: {
                    mcpPathCompliant: complianceSummary.overallCompliance !== "non_compliant",
                    directBedrockPathCompliant: bedrockCompliance.compliant && gdprCompliant,
                    auditTrailComplete: true, // Assuming audit trail is properly configured
                },
                violations: [
                    ...complianceStatus.violations,
                    ...bedrockCompliance.violations,
                ],
                recommendations: [
                    ...complianceStatus.recommendations,
                    "Regularly review provider agreements for compliance updates",
                    "Monitor PII detection and redaction effectiveness",
                    "Ensure audit trail completeness for all support operations",
                ],
            };
            this.log("bedrock-activation", "Compliance report generated successfully", {
                reportId,
                overallCompliant: report.supportModeCompliance.overallCompliant,
                violationsCount: report.violations.length,
            });
            return report;
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Failed to generate compliance report: ${errorMessage}`);
            throw new Error(`Compliance report generation failed: ${errorMessage}`);
        }
    }
    /**
     * Enable Circuit Breaker Protection for Both Routing Paths
     */
    async enableCircuitBreaker() {
        try {
            this.log("bedrock-activation", "Enabling circuit breaker protection for hybrid routing");
            // Validate circuit breaker is properly initialized
            if (!this.circuitBreaker) {
                throw new Error("Circuit breaker not initialized");
            }
            // Enable circuit breaker for all providers
            const providers = ["bedrock", "google", "meta"];
            // Reset any existing circuit breaker states
            providers.forEach((provider) => {
                if (this.circuitBreaker.isOpen(provider)) {
                    this.log("bedrock-activation", `Resetting circuit breaker for provider: ${provider}`);
                    this.circuitBreaker.forceClose(provider);
                }
            });
            // Configure circuit breaker thresholds for support operations
            const supportConfig = {
                failureThreshold: 3, // More sensitive for support operations
                recoveryTimeout: 30000, // 30 seconds recovery
                halfOpenMaxCalls: 2, // Conservative testing
                healthCheckInterval: 15000, // 15 second health checks
            };
            // Log circuit breaker configuration
            this.log("bedrock-activation", `Circuit breaker configured with thresholds: ${JSON.stringify(supportConfig)}`);
            // Enable circuit breaker monitoring for direct Bedrock path
            if (this.directBedrockClient) {
                this.log("bedrock-activation", "Circuit breaker enabled for direct Bedrock path");
            }
            // Enable circuit breaker monitoring for MCP path
            if (this.mcpRouter) {
                this.log("bedrock-activation", "Circuit breaker enabled for MCP routing path");
            }
            // Start health monitoring for both paths
            if (this.hybridHealthMonitor) {
                await this.hybridHealthMonitor.startHealthMonitoring();
                this.log("bedrock-activation", "Health monitoring started for hybrid routing paths");
            }
            // Log audit trail event
            await this.auditTrail.logSupportModeEvent("circuit_breaker_enabled", {
                timestamp: new Date(),
                configuration: supportConfig,
                enabledPaths: ["direct_bedrock", "mcp_router"],
                healthMonitoringActive: true,
            }, "system");
            this.log("bedrock-activation", "Circuit breaker protection enabled for both routing paths");
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Failed to enable circuit breaker: ${errorMessage}`);
            // Log failure to audit trail
            await this.auditTrail.logSupportModeEvent("circuit_breaker_enable_failed", {
                timestamp: new Date(),
                error: errorMessage,
                context: "circuit_breaker_activation",
            }, "system");
            throw new Error(`Circuit breaker activation failed: ${errorMessage}`);
        }
    }
    async checkSecurityPosture() {
        this.log("bedrock-activation", "Checking security posture for hybrid architecture");
        try {
            // Start security posture monitoring if not already active
            if (!this.securityPostureMonitor.isMonitoringActive()) {
                await this.securityPostureMonitor.startMonitoring();
            }
            // Assess current security posture
            const postureStatus = await this.securityPostureMonitor.assessSecurityPosture();
            // Convert to SecurityAuditResult format
            const vulnerabilities = [
                ...postureStatus.routes.mcp.vulnerabilities,
                ...postureStatus.routes.directBedrock.vulnerabilities,
            ];
            const recommendations = [
                ...postureStatus.recommendations.immediate.map((r) => r.description),
                ...postureStatus.recommendations.shortTerm.map((r) => r.description),
            ];
            const result = {
                securityScore: postureStatus.overall.securityScore,
                vulnerabilities,
                recommendations,
                lastAudit: postureStatus.overall.lastAssessment,
            };
            this.log("bedrock-activation", `Security posture check completed: Score ${result.securityScore}, ${vulnerabilities.length} vulnerabilities`);
            // Log to audit trail
            await this.auditTrail.logSupportModeEvent("security_posture_checked", {
                timestamp: new Date(),
                securityScore: result.securityScore,
                vulnerabilityCount: vulnerabilities.length,
                threatLevel: postureStatus.overall.threatLevel,
                complianceStatus: postureStatus.overall.complianceStatus,
            }, "system");
            return result;
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Security posture check failed: ${errorMessage}`);
            // Log failure to audit trail
            await this.auditTrail.logSupportModeEvent("security_posture_check_failed", {
                timestamp: new Date(),
                error: errorMessage,
            }, "system");
            // Return a degraded security result
            return {
                securityScore: 0,
                vulnerabilities: [
                    {
                        id: "security-check-failure",
                        severity: "critical",
                        description: `Security posture check failed: ${errorMessage}`,
                        component: "security-posture-monitor",
                        remediation: "Investigate and fix security monitoring system",
                    },
                ],
                recommendations: [
                    "Fix security posture monitoring system",
                    "Investigate security check failure",
                    "Manual security audit required",
                ],
                lastAudit: new Date(),
            };
        }
    }
    /**
     * Check Circuit Breaker Status for Both Routing Paths
     */
    async getCircuitBreakerStatus() {
        try {
            // Check direct Bedrock circuit breaker
            const directBedrockOpen = this.circuitBreaker.isOpen("bedrock");
            const directBedrockMetrics = this.circuitBreaker.getMetrics("bedrock");
            // Check MCP router circuit breaker (using "google" as MCP provider proxy)
            const mcpRouterOpen = this.circuitBreaker.isOpen("google");
            const mcpRouterMetrics = this.circuitBreaker.getMetrics("google");
            // Determine overall health
            let overallHealth = "healthy";
            if (directBedrockOpen && mcpRouterOpen) {
                overallHealth = "critical"; // Both paths down
            }
            else if (directBedrockOpen || mcpRouterOpen) {
                overallHealth = "degraded"; // One path down
            }
            const status = {
                directBedrock: {
                    isOpen: directBedrockOpen,
                    state: directBedrockMetrics.state,
                    metrics: directBedrockMetrics,
                },
                mcpRouter: {
                    isOpen: mcpRouterOpen,
                    state: mcpRouterMetrics.state,
                    metrics: mcpRouterMetrics,
                },
                overallHealth,
            };
            // Log status check to audit trail
            await this.auditTrail.logSupportModeEvent("circuit_breaker_status_check", {
                timestamp: new Date(),
                status,
                overallHealth,
            }, "system");
            return status;
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Failed to check circuit breaker status: ${errorMessage}`);
            throw new Error(`Circuit breaker status check failed: ${errorMessage}`);
        }
    }
    /**
     * Handle Circuit Breaker Failures with Intelligent Fallback
     */
    async handleCircuitBreakerFailure(failedPath, operation, context) {
        try {
            this.log("bedrock-activation", `Handling circuit breaker failure for ${failedPath} path during ${operation}`);
            // Log failure event
            await this.auditTrail.logSupportModeEvent("circuit_breaker_failure", {
                timestamp: new Date(),
                failedPath,
                operation,
                context,
            }, "system");
            // Attempt intelligent fallback through router
            if (this.intelligentRouter) {
                const fallbackRoute = failedPath === "direct" ? "mcp" : "direct";
                this.log("bedrock-activation", `Attempting fallback to ${fallbackRoute} path`);
                // Check if fallback path is available
                const fallbackProvider = fallbackRoute === "direct" ? "bedrock" : "google";
                const fallbackAvailable = !this.circuitBreaker.isOpen(fallbackProvider);
                if (fallbackAvailable) {
                    this.log("bedrock-activation", `Fallback to ${fallbackRoute} path is available`);
                }
                else {
                    this.log("bedrock-activation", `Fallback to ${fallbackRoute} path is also unavailable - both paths down`);
                    // Both paths down - trigger emergency procedures
                    await this.triggerEmergencyProcedures(operation, context);
                }
            }
            // Update health monitoring
            if (this.hybridHealthMonitor) {
                await this.hybridHealthMonitor.recordFailure(failedPath, operation);
            }
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Failed to handle circuit breaker failure: ${errorMessage}`);
            throw new Error(`Circuit breaker failure handling failed: ${errorMessage}`);
        }
    }
    /**
     * Trigger Emergency Procedures when Both Paths are Down
     */
    async triggerEmergencyProcedures(operation, context) {
        try {
            this.log("bedrock-activation", `Triggering emergency procedures for operation: ${operation}`);
            // Log emergency event
            await this.auditTrail.logSupportModeEvent("emergency_procedures_triggered", {
                timestamp: new Date(),
                operation,
                context,
                reason: "both_routing_paths_unavailable",
            }, "system");
            // Disable support mode temporarily
            this.isActivated = false;
            // Send emergency notifications
            await this.sendEmergencyNotifications(operation, context);
            // Force reset circuit breakers after emergency timeout
            setTimeout(async () => {
                try {
                    this.log("bedrock-activation", "Attempting emergency circuit breaker reset");
                    this.circuitBreaker.resetAll();
                    // Re-enable support mode if feature flag is still active
                    const supportModeEnabled = await this.featureFlags.isBedrockSupportModeEnabled();
                    if (supportModeEnabled) {
                        this.isActivated = true;
                        this.log("bedrock-activation", "Support mode re-enabled after emergency reset");
                    }
                }
                catch (resetError) {
                    this.log("bedrock-activation", `Emergency reset failed: ${resetError}`);
                }
            }, 60000); // 1 minute emergency timeout
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : String(error);
            this.log("bedrock-activation", `Failed to trigger emergency procedures: ${errorMessage}`);
        }
    }
    /**
     * Send Emergency Notifications
     */
    async sendEmergencyNotifications(operation, context) {
        try {
            // Send notifications through configured channels
            for (const channel of this.config.notificationChannels) {
                if (channel.enabled) {
                    const message = `EMERGENCY: Bedrock Support Mode - Both routing paths unavailable during ${operation}`;
                    this.log("bedrock-activation", `Sending emergency notification via ${channel.type}: ${message}`);
                    // In production, this would send actual notifications
                    // For now, just log the notification
                }
            }
        }
        catch (error) {
            this.log("bedrock-activation", `Failed to send emergency notifications: ${error}`);
        }
    }
    // Cost & Performance Methods (using existing CostPerformanceOptimizer)
    async monitorCostThresholds() {
        try {
            // Get cost summary from existing optimizer
            const costSummary = this.costPerformanceOptimizer.getCostSummary();
            const performanceMetrics = this.costPerformanceOptimizer.getPerformanceMetrics();
            // Log cost monitoring event
            await this.auditTrail.logEvent({
                eventType: "cost_monitoring",
                userId: "system",
                action: "monitor_cost_thresholds",
                resourceType: "cost_performance",
                resourceId: "bedrock-support-mode",
                metadata: {
                    dailySpent: costSummary.daily.spent,
                    monthlySpent: costSummary.monthly.spent,
                    dailyRemaining: costSummary.daily.remaining,
                    monthlyRemaining: costSummary.monthly.remaining,
                    cacheHitRate: performanceMetrics.cacheHitRate,
                },
                timestamp: new Date(),
                ipAddress: "internal",
                userAgent: "bedrock-support-manager",
            });
            // Check for emergency shutdown conditions
            const costPressure = costSummary.monthly.spent / costSummary.monthly.limit;
            if (costPressure > 0.95) {
                await this.emergencyShutdownManager.triggerShutdown("all", "cost_overrun", "manual", {
                    costEuro: costSummary.monthly.spent,
                    additionalInfo: {
                        dailySpent: costSummary.daily.spent,
                        monthlyLimit: costSummary.monthly.limit,
                    },
                });
            }
            // Return cost analysis in expected format
            return {
                currentSpend: costSummary.monthly.spent,
                projectedSpend: costSummary.monthly.spent * (30 / new Date().getDate()), // Simple projection
                budgetUtilization: costPressure,
                costBreakdown: {
                    daily: costSummary.daily.spent,
                    monthly: costSummary.monthly.spent,
                    cacheHitRate: performanceMetrics.cacheHitRate,
                },
                recommendations: this.generateCostRecommendations(costSummary, performanceMetrics),
            };
        }
        catch (error) {
            this.log("bedrock-activation", `Error monitoring cost thresholds: ${error}`);
            return {
                currentSpend: 0,
                projectedSpend: 0,
                budgetUtilization: 0,
                costBreakdown: {},
                recommendations: [
                    "Error retrieving cost data - please check cost monitoring system",
                ],
            };
        }
    }
    /**
     * Generate cost optimization recommendations
     */
    generateCostRecommendations(costSummary, performanceMetrics) {
        const recommendations = [];
        // Check cache hit rate
        if (performanceMetrics.cacheHitRate < 0.5) {
            recommendations.push("Improve cache hit rate to reduce AI provider costs");
        }
        // Check daily budget utilization
        const dailyUtilization = costSummary.daily.spent / costSummary.daily.limit;
        if (dailyUtilization > 0.8) {
            recommendations.push("Daily budget utilization high - consider implementing cost optimization strategies");
        }
        // Check monthly budget utilization
        const monthlyUtilization = costSummary.monthly.spent / costSummary.monthly.limit;
        if (monthlyUtilization > 0.75) {
            recommendations.push("Monthly budget on track to exceed - review operation priorities");
        }
        return recommendations;
    }
    /**
     * Get detailed cost and performance status
     */
    async getCostPerformanceStatus() {
        const costSummary = this.costPerformanceOptimizer.getCostSummary();
        const performanceMetrics = this.costPerformanceOptimizer.getPerformanceMetrics();
        const shutdownStatus = this.emergencyShutdownManager.getStatus();
        return {
            cost: costSummary,
            performance: performanceMetrics,
            emergencyShutdown: shutdownStatus,
        };
    }
    /**
     * Track cost for a support operation (stub for compatibility)
     */
    async trackSupportOperationCost(operationId, route, operationType, cost, tokensUsed) {
        await this.costBudgetMonitor.trackOperationCost({
            operationId,
            route,
            operationType,
            cost,
            tokensUsed,
            timestamp: new Date(),
            metadata: {
                supportMode: true,
                bedrockActivation: this.isActivated,
            },
        });
    }
    async optimizePerformance() {
        return {
            currentMetrics: {
                responseTime: 0,
                memoryUsage: 0,
                cpuUsage: 0,
                networkLatency: 0,
            },
            optimizationOpportunities: [],
            expectedImprovements: {},
        };
    }
    async enableEmergencyMode() {
        this.log("bedrock-activation", "Emergency mode enabled");
    }
    // Template & Prompt Methods (Stubs for now)
    async validatePromptTemplates() {
        return {
            isValid: true,
            errors: [],
            warnings: [],
            templateCount: 0,
        };
    }
    async enablePIIRedaction() {
        this.log("bedrock-activation", "PII redaction enabled");
    }
    /**
     * Run comprehensive red team security evaluations for direct Bedrock
     *
     * This method executes automated security testing including:
     * - Prompt injection detection
     * - Jailbreak attempt detection
     * - Data exfiltration prevention
     * - Privilege escalation prevention
     * - Denial of service protection
     */
    async runRedTeamEvaluations() {
        try {
            this.log("bedrock-activation", "Starting red team security evaluation");
            // Check if red team evaluations are enabled
            if (!this.featureFlags.isEnabled("red_team_evaluation_enabled", true)) {
                this.log("bedrock-activation", "Red team evaluations are disabled");
                return {
                    passed: true,
                    testResults: [],
                    overallScore: 100,
                    recommendations: [
                        "Red team evaluations are disabled - enable for security testing",
                    ],
                };
            }
            // Initialize red team evaluator with direct Bedrock client
            const evaluator = new red_team_evaluator_1.RedTeamEvaluator(this.directBedrockClient, {
                enablePromptInjectionTests: true,
                enableJailbreakTests: true,
                enableDataExfiltrationTests: true,
                enablePrivilegeEscalationTests: true,
                enableDenialOfServiceTests: true,
                testDepth: "standard",
                maxTestsPerCategory: 5,
                timeoutMs: 30000,
            });
            // Run comprehensive evaluation
            const report = await evaluator.runEvaluation();
            // Log evaluation results
            await this.auditTrail.logEvent({
                eventType: "red_team_evaluation",
                requestId: report.evaluationId,
                provider: "bedrock",
                complianceStatus: report.vulnerabilitiesDetected > 0 ? "violation" : "compliant",
                metadata: {
                    totalTests: report.totalTests,
                    testsPassed: report.testsPassed,
                    testsFailed: report.testsFailed,
                    vulnerabilitiesDetected: report.vulnerabilitiesDetected,
                    securityScore: report.overallSecurityScore,
                    criticalVulnerabilities: report.criticalVulnerabilities.length,
                    highVulnerabilities: report.highVulnerabilities.length,
                    executionTimeMs: report.executionTimeMs,
                },
            });
            // Convert red team report to SecurityTestResult format
            const testResults = [
                ...report.criticalVulnerabilities.map((v) => ({
                    testName: v.testName,
                    passed: v.passed,
                    details: v.description,
                    severity: v.severity,
                })),
                ...report.highVulnerabilities.map((v) => ({
                    testName: v.testName,
                    passed: v.passed,
                    details: v.description,
                    severity: v.severity,
                })),
                ...report.mediumVulnerabilities.map((v) => ({
                    testName: v.testName,
                    passed: v.passed,
                    details: v.description,
                    severity: v.severity,
                })),
                ...report.lowVulnerabilities.map((v) => ({
                    testName: v.testName,
                    passed: v.passed,
                    details: v.description,
                    severity: v.severity,
                })),
            ];
            const passed = report.vulnerabilitiesDetected === 0;
            this.log("bedrock-activation", `Red team evaluation completed: ${passed ? "PASSED" : "FAILED"} ` +
                `(Score: ${report.overallSecurityScore}/100, ` +
                `Vulnerabilities: ${report.vulnerabilitiesDetected})`);
            return {
                passed,
                testResults,
                overallScore: report.overallSecurityScore,
                recommendations: report.recommendations,
            };
        }
        catch (error) {
            const errorMessage = error instanceof Error ? error.message : "Unknown error";
            this.log("bedrock-activation", `Red team evaluation failed: ${errorMessage}`);
            // Log error to audit trail
            await this.auditTrail.logEvent({
                eventType: "red_team_evaluation",
                requestId: `red-team-eval-error-${Date.now()}`,
                provider: "bedrock",
                complianceStatus: "violation",
                error: {
                    type: "evaluation_error",
                    message: errorMessage,
                },
            });
            return {
                passed: false,
                testResults: [
                    {
                        testName: "Red Team Evaluation",
                        passed: false,
                        details: `Evaluation failed: ${errorMessage}`,
                        severity: "critical",
                    },
                ],
                overallScore: 0,
                recommendations: [
                    "Fix red team evaluation system errors",
                    "Review direct Bedrock client configuration",
                    "Check security testing infrastructure",
                ],
            };
        }
    }
    /**
     * Get default configuration
     */
    getDefaultConfig(overrides) {
        return {
            enabled: false,
            environments: ["development", "staging", "production"],
            auditInterval: 1800000, // 30 minutes
            monitoringLevel: "basic",
            autoResolutionEnabled: false,
            notificationChannels: [],
            ...overrides,
        };
    }
    /**
     * Get system resource monitoring status
     * Ensures support mode overhead stays under 5% of system resources
     */
    getResourceMonitoringStatus() {
        const status = this.systemResourceMonitor.getStatus();
        const summary = this.systemResourceMonitor.getResourceSummary();
        const alerts = this.systemResourceMonitor.getActiveAlerts();
        return {
            isMonitoring: status.isMonitoring,
            isWithinThresholds: summary.isWithinThresholds,
            currentMetrics: summary.current,
            summary,
            alerts,
        };
    }
    /**
     * Check if support mode is within the 5% system resource overhead requirement
     */
    async validateResourceOverhead() {
        const currentMetrics = await this.systemResourceMonitor.getCurrentMetrics();
        const summary = this.systemResourceMonitor.getResourceSummary();
        const status = this.systemResourceMonitor.getStatus();
        const recommendations = [];
        // Check CPU usage against 1% threshold (well under 5%)
        if (currentMetrics.cpuUsagePercent > 0.8) {
            recommendations.push(`CPU usage (${currentMetrics.cpuUsagePercent.toFixed(2)}%) approaching threshold. Consider optimizing support operations.`);
        }
        // Check memory usage against 50MB threshold
        if (currentMetrics.memoryUsageMB > 40) {
            recommendations.push(`Memory usage (${currentMetrics.memoryUsageMB.toFixed(2)}MB) approaching threshold. Consider memory optimization.`);
        }
        // Check if monitoring is active
        if (!status.isMonitoring) {
            recommendations.push("Resource monitoring is not active. Enable monitoring to track overhead.");
        }
        const isCompliant = currentMetrics.cpuUsagePercent <= 1.0 && // 1% CPU (well under 5%)
            currentMetrics.memoryUsageMB <= 50 && // 50MB memory (reasonable for 5% overhead)
            status.isMonitoring;
        await this.auditTrail.logEvent({
            eventType: "resource_overhead_validation",
            timestamp: new Date(),
            details: {
                component: "BedrockSupportManager",
                isCompliant,
                cpuUsage: currentMetrics.cpuUsagePercent,
                memoryUsage: currentMetrics.memoryUsageMB,
                thresholds: status.config.thresholds,
                recommendations,
            },
        });
        return {
            isCompliant,
            cpuUsage: currentMetrics.cpuUsagePercent,
            memoryUsage: currentMetrics.memoryUsageMB,
            thresholds: status.config.thresholds,
            recommendations,
        };
    }
    /**
     * Get performance metrics with resource overhead information
     */
    async getPerformanceMetricsWithOverhead() {
        const currentMetrics = await this.systemResourceMonitor.getCurrentMetrics();
        const summary = this.systemResourceMonitor.getResourceSummary();
        return {
            responseTime: 0, // This would be populated by actual operations
            memoryUsage: currentMetrics.memoryUsageMB,
            cpuUsage: currentMetrics.cpuUsagePercent,
            networkLatency: 0, // This would be populated by actual operations
            resourceOverhead: {
                cpuUsagePercent: currentMetrics.cpuUsagePercent,
                memoryUsageMB: currentMetrics.memoryUsageMB,
                isWithinThresholds: summary.isWithinThresholds,
            },
        };
    }
    /**
     * Emergency shutdown if resource usage exceeds critical thresholds
     */
    async emergencyShutdownOnResourceOverhead() {
        const validation = await this.validateResourceOverhead();
        // If CPU usage exceeds 2% or memory exceeds 100MB, trigger emergency shutdown
        if (validation.cpuUsage > 2.0 || validation.memoryUsage > 100) {
            this.log("bedrock-activation", `Emergency shutdown triggered due to excessive resource usage: CPU ${validation.cpuUsage.toFixed(2)}%, Memory ${validation.memoryUsage.toFixed(2)}MB`);
            await this.auditTrail.logEvent({
                eventType: "emergency_shutdown_resource_overhead",
                timestamp: new Date(),
                details: {
                    component: "BedrockSupportManager",
                    trigger: "resource_overhead",
                    cpuUsage: validation.cpuUsage,
                    memoryUsage: validation.memoryUsage,
                    thresholds: validation.thresholds,
                },
            });
            // Deactivate support mode
            await this.deactivate();
            // Use emergency shutdown manager
            await this.emergencyShutdownManager.triggerEmergencyShutdown("resource_overhead", `Resource usage exceeded safe limits: CPU ${validation.cpuUsage.toFixed(2)}%, Memory ${validation.memoryUsage.toFixed(2)}MB`);
        }
    }
    /**
     * Log with bedrock-activation prefix
     */
    log(prefix, message) {
        this.logger.log(`[${prefix}] ${message}`);
    }
}
exports.BedrockSupportManager = BedrockSupportManager;
/**
 * Factory function to create a Bedrock Support Manager instance
 */
function createBedrockSupportManager(config, featureFlags, bedrockAdapter) {
    return new BedrockSupportManager(config, featureFlags, bedrockAdapter);
}
/**
 * Default export
 */
exports.default = BedrockSupportManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hdGJha2gtdmlzaWJpbGl0eS1ib29zdC4yMDI1MDkyMC9zcmMvbGliL2FpLW9yY2hlc3RyYXRvci9iZWRyb2NrLXN1cHBvcnQtbWFuYWdlci50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7OztHQU1HOzs7QUErb0ZILGtFQU1DO0FBbnBGRCxnRUFBNEQ7QUFDNUQseURBQW9EO0FBQ3BELDZEQUF3RDtBQUN4RCx1REFBbUQ7QUFDbkQscUVBQWlFO0FBQ2pFLDZFQUF3RTtBQUN4RSxtRUFBOEQ7QUFDOUQsNkVBQXdFO0FBQ3hFLHlGQUFtRjtBQUNuRixtRUFBOEQ7QUFDOUQscUVBQWlFO0FBQ2pFLHFFQUFpRTtBQUNqRSw2REFBeUQ7QUFDekQsK0NBQTJDO0FBQzNDLDZDQUF5QztBQUN6QyxpREFBNkM7QUFDN0MsbUZBQThFO0FBQzlFLDZEQUc4QjtBQUM5Qix5RUFBb0U7QUFDcEUsdUVBQWtFO0FBNE5sRTs7OztHQUlHO0FBQ0gsTUFBYSxxQkFBcUI7SUFDeEIsV0FBVyxHQUFZLEtBQUssQ0FBQztJQUM3QixNQUFNLENBQXVCO0lBQzdCLFlBQVksQ0FBaUI7SUFDN0IsY0FBYyxDQUFpQjtJQUMvQixNQUFNLENBQVU7SUFDaEIsa0JBQWtCLENBQThCO0lBQ2hELHFCQUFxQixDQUF3QjtJQUM3QyxtQkFBbUIsQ0FBZ0M7SUFFM0QsaURBQWlEO0lBQ3pDLGNBQWMsQ0FBaUI7SUFDL0IsbUJBQW1CLENBQXNCO0lBQ3pDLFNBQVMsQ0FBWTtJQUNyQixpQkFBaUIsQ0FBb0I7SUFDckMsVUFBVSxDQUFtQjtJQUVyQywrQkFBK0I7SUFDdkIscUJBQXFCLENBQXdCO0lBQzdDLFdBQVcsQ0FBYztJQUN6QixxQkFBcUIsQ0FBd0I7SUFDN0MsbUJBQW1CLENBQXNCO0lBQ3pDLFVBQVUsQ0FBYTtJQUN2QixzQkFBc0IsQ0FBeUI7SUFFdkQsd0RBQXdEO0lBQ2hELHdCQUF3QixDQUEyQjtJQUNuRCx3QkFBd0IsQ0FBMkI7SUFFM0QseURBQXlEO0lBQ2pELHFCQUFxQixDQUF3QjtJQUVyRCxZ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QkFBZSxxQkFBcUIsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbWF0YmFraC12aXNpYmlsaXR5LWJvb3N0LjIwMjUwOTIwL3NyYy9saWIvYWktb3JjaGVzdHJhdG9yL2JlZHJvY2stc3VwcG9ydC1tYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQmVkcm9jayBTdXBwb3J0IE1hbmFnZXIgLSBDb3JlIG9yY2hlc3RyYXRvciBmb3Igc3VwcG9ydCBvcGVyYXRpb25zXG4gKlxuICogVGhpcyBtb2R1bGUgaW1wbGVtZW50cyB0aGUgY2VudHJhbCBCZWRyb2NrIFN1cHBvcnQgTWFuYWdlciB0aGF0IGNvb3JkaW5hdGVzXG4gKiBpbmZyYXN0cnVjdHVyZSB2YWxpZGF0aW9uLCBtZXRhLW1vbml0b3JpbmcsIGFuZCBpbXBsZW1lbnRhdGlvbiBzdXBwb3J0IHVzaW5nXG4gKiBhIGh5YnJpZCByb3V0aW5nIGFwcHJvYWNoIChkaXJlY3QgQmVkcm9jayArIE1DUCBpbnRlZ3JhdGlvbikuXG4gKi9cblxuaW1wb3J0IHsgQmVkcm9ja0FkYXB0ZXIgfSBmcm9tIFwiLi9hZGFwdGVycy9iZWRyb2NrLWFkYXB0ZXJcIjtcbmltcG9ydCB7IEFpRmVhdHVyZUZsYWdzIH0gZnJvbSBcIi4vYWktZmVhdHVyZS1mbGFnc1wiO1xuaW1wb3J0IHsgQXVkaXRUcmFpbFN5c3RlbSB9IGZyb20gXCIuL2F1ZGl0LXRyYWlsLXN5c3RlbVwiO1xuaW1wb3J0IHsgQ2lyY3VpdEJyZWFrZXIgfSBmcm9tIFwiLi9jaXJjdWl0LWJyZWFrZXJcIjtcbmltcG9ydCB7IENvbXBsaWFuY2VJbnRlZ3JhdGlvbiB9IGZyb20gXCIuL2NvbXBsaWFuY2UtaW50ZWdyYXRpb25cIjtcbmltcG9ydCB7IENvc3RQZXJmb3JtYW5jZU9wdGltaXplciB9IGZyb20gXCIuL2Nvc3QtcGVyZm9ybWFuY2Utb3B0aW1pemVyXCI7XG5pbXBvcnQgeyBEaXJlY3RCZWRyb2NrQ2xpZW50IH0gZnJvbSBcIi4vZGlyZWN0LWJlZHJvY2stY2xpZW50XCI7XG5pbXBvcnQgeyBFbWVyZ2VuY3lTaHV0ZG93bk1hbmFnZXIgfSBmcm9tIFwiLi9lbWVyZ2VuY3ktc2h1dGRvd24tbWFuYWdlclwiO1xuaW1wb3J0IHsgR0RQUkh5YnJpZENvbXBsaWFuY2VWYWxpZGF0b3IgfSBmcm9tIFwiLi9nZHByLWh5YnJpZC1jb21wbGlhbmNlLXZhbGlkYXRvclwiO1xuaW1wb3J0IHsgSHlicmlkSGVhbHRoTW9uaXRvciB9IGZyb20gXCIuL2h5YnJpZC1oZWFsdGgtbW9uaXRvclwiO1xuaW1wb3J0IHsgSW1wbGVtZW50YXRpb25TdXBwb3J0IH0gZnJvbSBcIi4vaW1wbGVtZW50YXRpb24tc3VwcG9ydFwiO1xuaW1wb3J0IHsgSW5mcmFzdHJ1Y3R1cmVBdWRpdG9yIH0gZnJvbSBcIi4vaW5mcmFzdHJ1Y3R1cmUtYXVkaXRvclwiO1xuaW1wb3J0IHsgSW50ZWxsaWdlbnRSb3V0ZXIgfSBmcm9tIFwiLi9pbnRlbGxpZ2VudC1yb3V0ZXJcIjtcbmltcG9ydCB7IEtpcm9CcmlkZ2UgfSBmcm9tIFwiLi9raXJvLWJyaWRnZVwiO1xuaW1wb3J0IHsgTUNQUm91dGVyIH0gZnJvbSBcIi4vbWNwLXJvdXRlclwiO1xuaW1wb3J0IHsgTWV0YU1vbml0b3IgfSBmcm9tIFwiLi9tZXRhLW1vbml0b3JcIjtcbmltcG9ydCB7IFByb3ZpZGVyQWdyZWVtZW50Q29tcGxpYW5jZSB9IGZyb20gXCIuL3Byb3ZpZGVyLWFncmVlbWVudC1jb21wbGlhbmNlXCI7XG5pbXBvcnQge1xuICBSZWRUZWFtRXZhbHVhdGlvblJlcG9ydCxcbiAgUmVkVGVhbUV2YWx1YXRvcixcbn0gZnJvbSBcIi4vcmVkLXRlYW0tZXZhbHVhdG9yXCI7XG5pbXBvcnQgeyBTZWN1cml0eVBvc3R1cmVNb25pdG9yIH0gZnJvbSBcIi4vc2VjdXJpdHktcG9zdHVyZS1tb25pdG9yXCI7XG5pbXBvcnQgeyBTeXN0ZW1SZXNvdXJjZU1vbml0b3IgfSBmcm9tIFwiLi9zeXN0ZW0tcmVzb3VyY2UtbW9uaXRvclwiO1xuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG4vLyBDb3JlIERhdGEgU3RydWN0dXJlc1xuZXhwb3J0IGludGVyZmFjZSBCZWRyb2NrU3VwcG9ydENvbmZpZyB7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIGVudmlyb25tZW50czogKFwiZGV2ZWxvcG1lbnRcIiB8IFwic3RhZ2luZ1wiIHwgXCJwcm9kdWN0aW9uXCIpW107XG4gIGF1ZGl0SW50ZXJ2YWw6IG51bWJlcjtcbiAgbW9uaXRvcmluZ0xldmVsOiBcImJhc2ljXCIgfCBcImRldGFpbGVkXCIgfCBcImNvbXByZWhlbnNpdmVcIjtcbiAgYXV0b1Jlc29sdXRpb25FbmFibGVkOiBib29sZWFuO1xuICBub3RpZmljYXRpb25DaGFubmVsczogTm90aWZpY2F0aW9uQ2hhbm5lbFtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vdGlmaWNhdGlvbkNoYW5uZWwge1xuICB0eXBlOiBcImVtYWlsXCIgfCBcInNsYWNrXCIgfCBcIndlYmhvb2tcIjtcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgZW5hYmxlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbmZyYXN0cnVjdHVyZUF1ZGl0UmVzdWx0IHtcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBvdmVyYWxsSGVhbHRoOiBcImhlYWx0aHlcIiB8IFwid2FybmluZ1wiIHwgXCJjcml0aWNhbFwiO1xuICBkZXRlY3RlZElzc3VlczogSW5mcmFzdHJ1Y3R1cmVJc3N1ZVtdO1xuICBpbXBsZW1lbnRhdGlvbkdhcHM6IEltcGxlbWVudGF0aW9uR2FwW107XG4gIHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXTtcbiAgY29tcGxpYW5jZVN0YXR1czogQ29tcGxpYW5jZVN0YXR1cztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbmZyYXN0cnVjdHVyZUlzc3VlIHtcbiAgaWQ6IHN0cmluZztcbiAgc2V2ZXJpdHk6IFwibG93XCIgfCBcIm1lZGl1bVwiIHwgXCJoaWdoXCIgfCBcImNyaXRpY2FsXCI7XG4gIGNhdGVnb3J5OiBcInBlcmZvcm1hbmNlXCIgfCBcInNlY3VyaXR5XCIgfCBcImNvbXBsaWFuY2VcIiB8IFwiYXZhaWxhYmlsaXR5XCI7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGFmZmVjdGVkQ29tcG9uZW50czogc3RyaW5nW107XG4gIGRldGVjdGVkQXQ6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1wbGVtZW50YXRpb25HYXAge1xuICBpZDogc3RyaW5nO1xuICBtb2R1bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcHJpb3JpdHk6IFwibG93XCIgfCBcIm1lZGl1bVwiIHwgXCJoaWdoXCIgfCBcImNyaXRpY2FsXCI7XG4gIGVzdGltYXRlZEVmZm9ydDogc3RyaW5nO1xuICBkZXBlbmRlbmNpZXM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY29tbWVuZGF0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogXCJpbW1lZGlhdGVcIiB8IFwic2hvcnRfdGVybVwiIHwgXCJsb25nX3Rlcm1cIjtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZXhwZWN0ZWRJbXBhY3Q6IHN0cmluZztcbiAgaW1wbGVtZW50YXRpb25TdGVwczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxpYW5jZVN0YXR1cyB7XG4gIGdkcHJDb21wbGlhbnQ6IGJvb2xlYW47XG4gIGRhdGFSZXNpZGVuY3lDb21wbGlhbnQ6IGJvb2xlYW47XG4gIGF1ZGl0VHJhaWxDb21wbGV0ZTogYm9vbGVhbjtcbiAgaXNzdWVzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFeGVjdXRpb25NZXRhZGF0YSB7XG4gIGV4ZWN1dGlvbklkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgb3BlcmF0aW9uOiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGVycm9yRGV0YWlscz86IHN0cmluZztcbiAgcGVyZm9ybWFuY2VNZXRyaWNzOiBQZXJmb3JtYW5jZU1ldHJpY3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgcmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gIG1lbW9yeVVzYWdlOiBudW1iZXI7XG4gIGNwdVVzYWdlOiBudW1iZXI7XG4gIG5ldHdvcmtMYXRlbmN5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmFpbHVyZUNvbnRleHQge1xuICBvcGVyYXRpb246IHN0cmluZztcbiAgZXJyb3JUeXBlOiBzdHJpbmc7XG4gIGVycm9yTWVzc2FnZTogc3RyaW5nO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIGFmZmVjdGVkU3lzdGVtczogc3RyaW5nW107XG4gIHNldmVyaXR5OiBcImxvd1wiIHwgXCJtZWRpdW1cIiB8IFwiaGlnaFwiIHwgXCJjcml0aWNhbFwiO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN1cHBvcnRSZXN1bHQge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBzdXBwb3J0VHlwZTogXCJpbmZyYXN0cnVjdHVyZVwiIHwgXCJleGVjdXRpb25cIiB8IFwiaW1wbGVtZW50YXRpb25cIjtcbiAgYWN0aW9uc1BlcmZvcm1lZDogU3VwcG9ydEFjdGlvbltdO1xuICBkaWFnbm9zdGljczogRGlhZ25vc3RpY0RhdGE7XG4gIG5leHRTdGVwczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VwcG9ydEFjdGlvbiB7XG4gIGFjdGlvbjogc3RyaW5nO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIHJlc3VsdDogXCJzdWNjZXNzXCIgfCBcImZhaWx1cmVcIiB8IFwicGFydGlhbFwiO1xuICBkZXRhaWxzOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlhZ25vc3RpY0RhdGEge1xuICBzeXN0ZW1IZWFsdGg6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIHBlcmZvcm1hbmNlTWV0cmljczogUGVyZm9ybWFuY2VNZXRyaWNzO1xuICBlcnJvckxvZ3M6IHN0cmluZ1tdO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJlZHJvY2tTdXBwb3J0UmVzdWx0IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIGNvbmZpZ3VyYXRpb246IEJlZHJvY2tTdXBwb3J0Q29uZmlnO1xuICB2YWxpZGF0aW9uUmVzdWx0cz86IGFueTtcbn1cblxuLy8gU2VjdXJpdHkgJiBDb21wbGlhbmNlIFR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsaWFuY2VWYWxpZGF0aW9uUmVzdWx0IHtcbiAgaXNDb21wbGlhbnQ6IGJvb2xlYW47XG4gIHZpb2xhdGlvbnM6IHN0cmluZ1tdO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICBsYXN0Q2hlY2tlZDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWN1cml0eUF1ZGl0UmVzdWx0IHtcbiAgc2VjdXJpdHlTY29yZTogbnVtYmVyO1xuICB2dWxuZXJhYmlsaXRpZXM6IFNlY3VyaXR5VnVsbmVyYWJpbGl0eVtdO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICBsYXN0QXVkaXQ6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdXJpdHlWdWxuZXJhYmlsaXR5IHtcbiAgaWQ6IHN0cmluZztcbiAgc2V2ZXJpdHk6IFwibG93XCIgfCBcIm1lZGl1bVwiIHwgXCJoaWdoXCIgfCBcImNyaXRpY2FsXCI7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNvbXBvbmVudDogc3RyaW5nO1xuICByZW1lZGlhdGlvbjogc3RyaW5nO1xufVxuXG4vLyBDb3N0ICYgUGVyZm9ybWFuY2UgVHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgQ29zdEFuYWx5c2lzIHtcbiAgY3VycmVudFNwZW5kOiBudW1iZXI7XG4gIHByb2plY3RlZFNwZW5kOiBudW1iZXI7XG4gIGJ1ZGdldFV0aWxpemF0aW9uOiBudW1iZXI7XG4gIGNvc3RCcmVha2Rvd246IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VPcHRpbWl6YXRpb24ge1xuICBjdXJyZW50TWV0cmljczogUGVyZm9ybWFuY2VNZXRyaWNzO1xuICBvcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzOiBPcHRpbWl6YXRpb25PcHBvcnR1bml0eVtdO1xuICBleHBlY3RlZEltcHJvdmVtZW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcHRpbWl6YXRpb25PcHBvcnR1bml0eSB7XG4gIGFyZWE6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZXhwZWN0ZWRJbXByb3ZlbWVudDogc3RyaW5nO1xuICBpbXBsZW1lbnRhdGlvbkVmZm9ydDogXCJsb3dcIiB8IFwibWVkaXVtXCIgfCBcImhpZ2hcIjtcbn1cblxuLy8gVGVtcGxhdGUgJiBQcm9tcHQgVHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVWYWxpZGF0aW9uUmVzdWx0IHtcbiAgaXNWYWxpZDogYm9vbGVhbjtcbiAgZXJyb3JzOiBzdHJpbmdbXTtcbiAgd2FybmluZ3M6IHN0cmluZ1tdO1xuICB0ZW1wbGF0ZUNvdW50OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VjdXJpdHlUZXN0UmVzdWx0IHtcbiAgcGFzc2VkOiBib29sZWFuO1xuICB0ZXN0UmVzdWx0czogU2VjdXJpdHlUZXN0W107XG4gIG92ZXJhbGxTY29yZTogbnVtYmVyO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlY3VyaXR5VGVzdCB7XG4gIHRlc3ROYW1lOiBzdHJpbmc7XG4gIHBhc3NlZDogYm9vbGVhbjtcbiAgZGV0YWlsczogc3RyaW5nO1xuICBzZXZlcml0eTogXCJsb3dcIiB8IFwibWVkaXVtXCIgfCBcImhpZ2hcIiB8IFwiY3JpdGljYWxcIjtcbn1cblxuLyoqXG4gKiBCZWRyb2NrIFN1cHBvcnQgTWFuYWdlciBJbnRlcmZhY2VcbiAqXG4gKiBEZWZpbmVzIHRoZSBjb250cmFjdCBmb3IgdGhlIEJlZHJvY2sgU3VwcG9ydCBNYW5hZ2VyIHdpdGggaHlicmlkIHJvdXRpbmcgY2FwYWJpbGl0aWVzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUJlZHJvY2tTdXBwb3J0TWFuYWdlciB7XG4gIC8vIEFjdGl2YXRpb24gQ29udHJvbFxuICBhY3RpdmF0ZSgpOiBQcm9taXNlPEJlZHJvY2tTdXBwb3J0UmVzdWx0PjtcbiAgZGVhY3RpdmF0ZSgpOiBQcm9taXNlPHZvaWQ+O1xuICBpc0FjdGl2ZSgpOiBib29sZWFuO1xuXG4gIC8vIENvcmUgU3VwcG9ydCBPcGVyYXRpb25zXG4gIHJ1bkluZnJhc3RydWN0dXJlQXVkaXQoKTogUHJvbWlzZTxJbmZyYXN0cnVjdHVyZUF1ZGl0UmVzdWx0PjtcbiAgZW5hYmxlTWV0YU1vbml0b3JpbmcoKTogUHJvbWlzZTx2b2lkPjtcbiAgcHJvdmlkZUZhbGxiYWNrU3VwcG9ydChjb250ZXh0OiBGYWlsdXJlQ29udGV4dCk6IFByb21pc2U8U3VwcG9ydFJlc3VsdD47XG5cbiAgLy8gSW50ZWdyYXRpb24gTWV0aG9kc1xuICBzZW5kRGlhZ25vc3RpY3NUb0tpcm8oZGlhZ25vc3RpY3M6IERpYWdub3N0aWNEYXRhKTogUHJvbWlzZTx2b2lkPjtcbiAgcmVjZWl2ZUtpcm9FeGVjdXRpb25EYXRhKGV4ZWN1dGlvbkRhdGE6IEV4ZWN1dGlvbk1ldGFkYXRhKTogUHJvbWlzZTx2b2lkPjtcblxuICAvLyBTZWN1cml0eSAmIENvbXBsaWFuY2UgSW50ZWdyYXRpb25cbiAgdmFsaWRhdGVDb21wbGlhbmNlU3RhdHVzKCk6IFByb21pc2U8Q29tcGxpYW5jZVZhbGlkYXRpb25SZXN1bHQ+O1xuICBlbmFibGVDaXJjdWl0QnJlYWtlcigpOiBQcm9taXNlPHZvaWQ+O1xuICBjaGVja1NlY3VyaXR5UG9zdHVyZSgpOiBQcm9taXNlPFNlY3VyaXR5QXVkaXRSZXN1bHQ+O1xuXG4gIC8vIENvc3QgJiBQZXJmb3JtYW5jZSBNYW5hZ2VtZW50XG4gIG1vbml0b3JDb3N0VGhyZXNob2xkcygpOiBQcm9taXNlPENvc3RBbmFseXNpcz47XG4gIG9wdGltaXplUGVyZm9ybWFuY2UoKTogUHJvbWlzZTxQZXJmb3JtYW5jZU9wdGltaXphdGlvbj47XG4gIGVuYWJsZUVtZXJnZW5jeU1vZGUoKTogUHJvbWlzZTx2b2lkPjtcblxuICAvLyBUZW1wbGF0ZSAmIFByb21wdCBNYW5hZ2VtZW50XG4gIHZhbGlkYXRlUHJvbXB0VGVtcGxhdGVzKCk6IFByb21pc2U8VGVtcGxhdGVWYWxpZGF0aW9uUmVzdWx0PjtcbiAgZW5hYmxlUElJUmVkYWN0aW9uKCk6IFByb21pc2U8dm9pZD47XG4gIHJ1blJlZFRlYW1FdmFsdWF0aW9ucygpOiBQcm9taXNlPFNlY3VyaXR5VGVzdFJlc3VsdD47XG59XG5cbi8qKlxuICogQmVkcm9jayBTdXBwb3J0IE1hbmFnZXIgSW1wbGVtZW50YXRpb25cbiAqXG4gKiBDZW50cmFsIG9yY2hlc3RyYXRvciBmb3IgQmVkcm9jayBzdXBwb3J0IG9wZXJhdGlvbnMgd2l0aCBoeWJyaWQgcm91dGluZ1xuICovXG5leHBvcnQgY2xhc3MgQmVkcm9ja1N1cHBvcnRNYW5hZ2VyIGltcGxlbWVudHMgSUJlZHJvY2tTdXBwb3J0TWFuYWdlciB7XG4gIHByaXZhdGUgaXNBY3RpdmF0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBjb25maWc6IEJlZHJvY2tTdXBwb3J0Q29uZmlnO1xuICBwcml2YXRlIGZlYXR1cmVGbGFnczogQWlGZWF0dXJlRmxhZ3M7XG4gIHByaXZhdGUgYmVkcm9ja0FkYXB0ZXI6IEJlZHJvY2tBZGFwdGVyO1xuICBwcml2YXRlIGxvZ2dlcjogQ29uc29sZTtcbiAgcHJpdmF0ZSBwcm92aWRlckNvbXBsaWFuY2U6IFByb3ZpZGVyQWdyZWVtZW50Q29tcGxpYW5jZTtcbiAgcHJpdmF0ZSBjb21wbGlhbmNlSW50ZWdyYXRpb246IENvbXBsaWFuY2VJbnRlZ3JhdGlvbjtcbiAgcHJpdmF0ZSBnZHBySHlicmlkVmFsaWRhdG9yOiBHRFBSSHlicmlkQ29tcGxpYW5jZVZhbGlkYXRvcjtcblxuICAvLyBDaXJjdWl0IEJyZWFrZXIgSW50ZWdyYXRpb24gZm9yIEh5YnJpZCBSb3V0aW5nXG4gIHByaXZhdGUgY2lyY3VpdEJyZWFrZXI6IENpcmN1aXRCcmVha2VyO1xuICBwcml2YXRlIGRpcmVjdEJlZHJvY2tDbGllbnQ6IERpcmVjdEJlZHJvY2tDbGllbnQ7XG4gIHByaXZhdGUgbWNwUm91dGVyOiBNQ1BSb3V0ZXI7XG4gIHByaXZhdGUgaW50ZWxsaWdlbnRSb3V0ZXI6IEludGVsbGlnZW50Um91dGVyO1xuICBwcml2YXRlIGF1ZGl0VHJhaWw6IEF1ZGl0VHJhaWxTeXN0ZW07XG5cbiAgLy8gU3VwcG9ydCBPcGVyYXRpb24gQ29tcG9uZW50c1xuICBwcml2YXRlIGluZnJhc3RydWN0dXJlQXVkaXRvcjogSW5mcmFzdHJ1Y3R1cmVBdWRpdG9yO1xuICBwcml2YXRlIG1ldGFNb25pdG9yOiBNZXRhTW9uaXRvcjtcbiAgcHJpdmF0ZSBpbXBsZW1lbnRhdGlvblN1cHBvcnQ6IEltcGxlbWVudGF0aW9uU3VwcG9ydDtcbiAgcHJpdmF0ZSBoeWJyaWRIZWFsdGhNb25pdG9yOiBIeWJyaWRIZWFsdGhNb25pdG9yO1xuICBwcml2YXRlIGtpcm9CcmlkZ2U6IEtpcm9CcmlkZ2U7XG4gIHByaXZhdGUgc2VjdXJpdHlQb3N0dXJlTW9uaXRvcjogU2VjdXJpdHlQb3N0dXJlTW9uaXRvcjtcblxuICAvLyBDb3N0ICYgUGVyZm9ybWFuY2UgTWFuYWdlbWVudCAodXNpbmcgZXhpc3Rpbmcgc3lzdGVtKVxuICBwcml2YXRlIGNvc3RQZXJmb3JtYW5jZU9wdGltaXplcjogQ29zdFBlcmZvcm1hbmNlT3B0aW1pemVyO1xuICBwcml2YXRlIGVtZXJnZW5jeVNodXRkb3duTWFuYWdlcjogRW1lcmdlbmN5U2h1dGRvd25NYW5hZ2VyO1xuXG4gIC8vIFN5c3RlbSBSZXNvdXJjZSBNb25pdG9yaW5nIGZvciA1JSBvdmVyaGVhZCByZXF1aXJlbWVudFxuICBwcml2YXRlIHN5c3RlbVJlc291cmNlTW9uaXRvcjogU3lzdGVtUmVzb3VyY2VNb25pdG9yO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbmZpZz86IFBhcnRpYWw8QmVkcm9ja1N1cHBvcnRDb25maWc+LFxuICAgIGZlYXR1cmVGbGFncz86IEFpRmVhdHVyZUZsYWdzLFxuICAgIGJlZHJvY2tBZGFwdGVyPzogQmVkcm9ja0FkYXB0ZXIsXG4gICAgcHJvdmlkZXJDb21wbGlhbmNlPzogUHJvdmlkZXJBZ3JlZW1lbnRDb21wbGlhbmNlLFxuICAgIGNvbXBsaWFuY2VJbnRlZ3JhdGlvbj86IENvbXBsaWFuY2VJbnRlZ3JhdGlvbixcbiAgICBnZHBySHlicmlkVmFsaWRhdG9yPzogR0RQUkh5YnJpZENvbXBsaWFuY2VWYWxpZGF0b3JcbiAgKSB7XG4gICAgdGhpcy5jb25maWcgPSB0aGlzLmdldERlZmF1bHRDb25maWcoY29uZmlnKTtcbiAgICB0aGlzLmZlYXR1cmVGbGFncyA9IGZlYXR1cmVGbGFncyB8fCBuZXcgQWlGZWF0dXJlRmxhZ3MoKTtcbiAgICB0aGlzLmJlZHJvY2tBZGFwdGVyID0gYmVkcm9ja0FkYXB0ZXIgfHwgbmV3IEJlZHJvY2tBZGFwdGVyKCk7XG4gICAgdGhpcy5sb2dnZXIgPSBjb25zb2xlO1xuICAgIHRoaXMucHJvdmlkZXJDb21wbGlhbmNlID1cbiAgICAgIHByb3ZpZGVyQ29tcGxpYW5jZSB8fCBuZXcgUHJvdmlkZXJBZ3JlZW1lbnRDb21wbGlhbmNlKCk7XG4gICAgdGhpcy5jb21wbGlhbmNlSW50ZWdyYXRpb24gPVxuICAgICAgY29tcGxpYW5jZUludGVncmF0aW9uIHx8IG5ldyBDb21wbGlhbmNlSW50ZWdyYXRpb24oKTtcbiAgICB0aGlzLmdkcHJIeWJyaWRWYWxpZGF0b3IgPVxuICAgICAgZ2Rwckh5YnJpZFZhbGlkYXRvciB8fCBuZXcgR0RQUkh5YnJpZENvbXBsaWFuY2VWYWxpZGF0b3IoKTtcblxuICAgIC8vIEluaXRpYWxpemUgQ2lyY3VpdCBCcmVha2VyIHdpdGggc3VwcG9ydC1zcGVjaWZpYyBjb25maWd1cmF0aW9uXG4gICAgdGhpcy5jaXJjdWl0QnJlYWtlciA9IG5ldyBDaXJjdWl0QnJlYWtlcih7XG4gICAgICBmYWlsdXJlVGhyZXNob2xkOiAzLCAvLyBNb3JlIHNlbnNpdGl2ZSBmb3Igc3VwcG9ydCBvcGVyYXRpb25zXG4gICAgICByZWNvdmVyeVRpbWVvdXQ6IDMwMDAwLCAvLyAzMCBzZWNvbmRzIHJlY292ZXJ5IGZvciBzdXBwb3J0XG4gICAgICBoYWxmT3Blbk1heENhbGxzOiAyLCAvLyBDb25zZXJ2YXRpdmUgaGFsZi1vcGVuIHRlc3RpbmdcbiAgICAgIGhlYWx0aENoZWNrSW50ZXJ2YWw6IDE1MDAwLCAvLyAxNSBzZWNvbmQgaGVhbHRoIGNoZWNrc1xuICAgIH0pO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBBdWRpdCBUcmFpbCBTeXN0ZW1cbiAgICB0aGlzLmF1ZGl0VHJhaWwgPSBuZXcgQXVkaXRUcmFpbFN5c3RlbSh7XG4gICAgICBjb21wbGlhbmNlTW9kZTogXCJzdHJpY3RcIixcbiAgICAgIGVuYWJsZUludGVncml0eUNoZWNraW5nOiB0cnVlLFxuICAgICAgcmV0ZW50aW9uRGF5czogMjU1NSwgLy8gNyB5ZWFycyBmb3IgR0RQUiBjb21wbGlhbmNlXG4gICAgfSk7XG5cbiAgICAvLyBJbml0aWFsaXplIERpcmVjdCBCZWRyb2NrIENsaWVudCBmb3IgY3JpdGljYWwgb3BlcmF0aW9uc1xuICAgIHRoaXMuZGlyZWN0QmVkcm9ja0NsaWVudCA9IG5ldyBEaXJlY3RCZWRyb2NrQ2xpZW50KHtcbiAgICAgIHJlZ2lvbjogcHJvY2Vzcy5lbnYuQVdTX1JFR0lPTiB8fCBcImV1LWNlbnRyYWwtMVwiLFxuICAgICAgZW1lcmdlbmN5VGltZW91dDogNTAwMCwgLy8gPCA1cyBmb3IgZW1lcmdlbmN5IG9wZXJhdGlvbnNcbiAgICAgIGNyaXRpY2FsVGltZW91dDogMTAwMDAsIC8vIDwgMTBzIGZvciBjcml0aWNhbCBvcGVyYXRpb25zXG4gICAgICBlbmFibGVDaXJjdWl0QnJlYWtlcjogdHJ1ZSxcbiAgICAgIGVuYWJsZUhlYWx0aE1vbml0b3Jpbmc6IHRydWUsXG4gICAgICBlbmFibGVDb21wbGlhbmNlQ2hlY2tzOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBNQ1AgUm91dGVyIGZvciBzdGFuZGFyZCBvcGVyYXRpb25zXG4gICAgdGhpcy5tY3BSb3V0ZXIgPSBuZXcgTUNQUm91dGVyKHtcbiAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgIGhlYWx0aENoZWNrSW50ZXJ2YWw6IDMwMDAwLFxuICAgIH0pO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBJbnRlbGxpZ2VudCBSb3V0ZXIgZm9yIHJvdXRpbmcgZGVjaXNpb25zXG4gICAgdGhpcy5pbnRlbGxpZ2VudFJvdXRlciA9IG5ldyBJbnRlbGxpZ2VudFJvdXRlcihcbiAgICAgIHRoaXMuZGlyZWN0QmVkcm9ja0NsaWVudCxcbiAgICAgIHRoaXMubWNwUm91dGVyLFxuICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MsXG4gICAgICB0aGlzLmNpcmN1aXRCcmVha2VyLFxuICAgICAgdGhpcy5nZHBySHlicmlkVmFsaWRhdG9yLFxuICAgICAgdGhpcy5hdWRpdFRyYWlsXG4gICAgKTtcblxuICAgIC8vIEluaXRpYWxpemUgU3VwcG9ydCBPcGVyYXRpb24gQ29tcG9uZW50c1xuICAgIHRoaXMuaW5mcmFzdHJ1Y3R1cmVBdWRpdG9yID0gbmV3IEluZnJhc3RydWN0dXJlQXVkaXRvcihcbiAgICAgIHRoaXMuZmVhdHVyZUZsYWdzLFxuICAgICAgdGhpcy5hdWRpdFRyYWlsXG4gICAgKTtcblxuICAgIHRoaXMubWV0YU1vbml0b3IgPSBuZXcgTWV0YU1vbml0b3IoXG4gICAgICB0aGlzLmludGVsbGlnZW50Um91dGVyLFxuICAgICAgdGhpcy5hdWRpdFRyYWlsLFxuICAgICAgdGhpcy5mZWF0dXJlRmxhZ3NcbiAgICApO1xuXG4gICAgdGhpcy5pbXBsZW1lbnRhdGlvblN1cHBvcnQgPSBuZXcgSW1wbGVtZW50YXRpb25TdXBwb3J0KFxuICAgICAgdGhpcy5pbnRlbGxpZ2VudFJvdXRlcixcbiAgICAgIHRoaXMuYXVkaXRUcmFpbCxcbiAgICAgIHRoaXMuZmVhdHVyZUZsYWdzXG4gICAgKTtcblxuICAgIHRoaXMuaHlicmlkSGVhbHRoTW9uaXRvciA9IG5ldyBIeWJyaWRIZWFsdGhNb25pdG9yKFxuICAgICAgdGhpcy5tY3BSb3V0ZXIsXG4gICAgICB0aGlzLmRpcmVjdEJlZHJvY2tDbGllbnQsXG4gICAgICB0aGlzLmZlYXR1cmVGbGFnc1xuICAgICk7XG5cbiAgICB0aGlzLmtpcm9CcmlkZ2UgPSBuZXcgS2lyb0JyaWRnZShcbiAgICAgIHRoaXMubWNwUm91dGVyLFxuICAgICAgdGhpcy5hdWRpdFRyYWlsLFxuICAgICAgdGhpcy5mZWF0dXJlRmxhZ3NcbiAgICApO1xuXG4gICAgdGhpcy5zZWN1cml0eVBvc3R1cmVNb25pdG9yID0gbmV3IFNlY3VyaXR5UG9zdHVyZU1vbml0b3IoXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aGlzLmZlYXR1cmVGbGFncyxcbiAgICAgIHRoaXMuYXVkaXRUcmFpbCxcbiAgICAgIHRoaXMuY2lyY3VpdEJyZWFrZXIsXG4gICAgICB0aGlzLmdkcHJIeWJyaWRWYWxpZGF0b3IsXG4gICAgICB0aGlzLnByb3ZpZGVyQ29tcGxpYW5jZSxcbiAgICAgIHRoaXMuZGlyZWN0QmVkcm9ja0NsaWVudCxcbiAgICAgIHRoaXMubWNwUm91dGVyXG4gICAgKTtcblxuICAgIC8vIEluaXRpYWxpemUgU3lzdGVtIFJlc291cmNlIE1vbml0b3IgZm9yIDUlIG92ZXJoZWFkIHJlcXVpcmVtZW50XG4gICAgdGhpcy5zeXN0ZW1SZXNvdXJjZU1vbml0b3IgPSBuZXcgU3lzdGVtUmVzb3VyY2VNb25pdG9yKFxuICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MsXG4gICAgICB0aGlzLmF1ZGl0VHJhaWwsXG4gICAgICB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIG1vbml0b3JpbmdJbnRlcnZhbE1zOiAxMDAwMCwgLy8gMTAgc2Vjb25kc1xuICAgICAgICBhbGVydENoZWNrSW50ZXJ2YWxNczogMzAwMDAsIC8vIDMwIHNlY29uZHNcbiAgICAgICAgdGhyZXNob2xkczoge1xuICAgICAgICAgIGNwdVdhcm5pbmdQZXJjZW50OiAwLjgsIC8vIDAuOCUgQ1BVIHdhcm5pbmdcbiAgICAgICAgICBjcHVDcml0aWNhbFBlcmNlbnQ6IDEuMCwgLy8gMSUgQ1BVIGNyaXRpY2FsICh3ZWxsIHVuZGVyIDUlKVxuICAgICAgICAgIG1lbW9yeVdhcm5pbmdNQjogNDAsIC8vIDQwTUIgbWVtb3J5IHdhcm5pbmdcbiAgICAgICAgICBtZW1vcnlDcml0aWNhbE1COiA1MCwgLy8gNTBNQiBtZW1vcnkgY3JpdGljYWwgKHJlYXNvbmFibGUgZm9yIDUlIG92ZXJoZWFkKVxuICAgICAgICB9LFxuICAgICAgfVxuICAgICk7XG5cbiAgICAvLyBJbml0aWFsaXplIENvc3QgUGVyZm9ybWFuY2UgT3B0aW1pemVyICh1c2luZyBleGlzdGluZyBzeXN0ZW0pXG4gICAgY29uc3QgY29zdEJ1ZGdldDogQ29zdEJ1ZGdldCA9IHtcbiAgICAgIGRhaWx5TGltaXQ6IDEwLjAsIC8vIOKCrDEwIHBlciBkYXlcbiAgICAgIG1vbnRobHlMaW1pdDogMzAwLjAsIC8vIOKCrDMwMCBwZXIgbW9udGhcbiAgICAgIGFsZXJ0VGhyZXNob2xkczogWzUwLCA3NSwgOTBdLCAvLyBBbGVydCBhdCA1MCUsIDc1JSwgOTAlXG4gICAgICBoYXJkU3RvcDogdHJ1ZSwgLy8gRW5hYmxlIGhhcmQgc3RvcCBvbiBidWRnZXQgZXhjZWVkZWRcbiAgICB9O1xuXG4gICAgdGhpcy5jb3N0UGVyZm9ybWFuY2VPcHRpbWl6ZXIgPSBuZXcgQ29zdFBlcmZvcm1hbmNlT3B0aW1pemVyKFxuICAgICAgY29zdEJ1ZGdldCxcbiAgICAgIHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgXCJldS1jZW50cmFsLTFcIlxuICAgICk7XG5cbiAgICAvLyBJbml0aWFsaXplIEVtZXJnZW5jeSBTaHV0ZG93biBNYW5hZ2VyXG4gICAgdGhpcy5lbWVyZ2VuY3lTaHV0ZG93bk1hbmFnZXIgPSBuZXcgRW1lcmdlbmN5U2h1dGRvd25NYW5hZ2VyKFxuICAgICAge1xuICAgICAgICBlbmFibGVBdXRvU2h1dGRvd246IHRydWUsXG4gICAgICAgIHNodXRkb3duVGhyZXNob2xkczoge1xuICAgICAgICAgIGVycm9yUmF0ZTogMC4xLCAvLyAxMCUgZXJyb3IgcmF0ZVxuICAgICAgICAgIGxhdGVuY3lNczogNTAwMCwgLy8gNSBzZWNvbmRzXG4gICAgICAgICAgY29zdEV1cm9QZXJIb3VyOiA1MC4wLCAvLyDigqw1MCBwZXIgaG91clxuICAgICAgICAgIGNvbnNlY3V0aXZlRmFpbHVyZXM6IDUsXG4gICAgICAgIH0sXG4gICAgICAgIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiB7XG4gICAgICAgICAgLy8gQ29uZmlndXJlIG5vdGlmaWNhdGlvbiBjaGFubmVscyBhcyBuZWVkZWRcbiAgICAgICAgfSxcbiAgICAgICAgcmVjb3ZlcnlDb25maWc6IHtcbiAgICAgICAgICBhdXRvUmVjb3ZlcnlFbmFibGVkOiB0cnVlLFxuICAgICAgICAgIHJlY292ZXJ5RGVsYXlNczogMzAwMDAwLCAvLyA1IG1pbnV0ZXNcbiAgICAgICAgICBoZWFsdGhDaGVja0ludGVydmFsTXM6IDYwMDAwLCAvLyAxIG1pbnV0ZVxuICAgICAgICAgIG1heFJlY292ZXJ5QXR0ZW1wdHM6IDMsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MsXG4gICAgICB0aGlzLmF1ZGl0VHJhaWwsXG4gICAgICB0aGlzLmNpcmN1aXRCcmVha2VyXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBCZWRyb2NrIFN1cHBvcnQgTW9kZVxuICAgKi9cbiAgYXN5bmMgYWN0aXZhdGUoKTogUHJvbWlzZTxCZWRyb2NrU3VwcG9ydFJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgXCJBdHRlbXB0aW5nIHRvIGFjdGl2YXRlIEJlZHJvY2sgU3VwcG9ydCBNb2RlXCJcbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGZlYXR1cmUgZmxhZyBpcyBlbmFibGVkXG4gICAgICBjb25zdCBzdXBwb3J0TW9kZUVuYWJsZWQgPVxuICAgICAgICBhd2FpdCB0aGlzLmZlYXR1cmVGbGFncy5pc0JlZHJvY2tTdXBwb3J0TW9kZUVuYWJsZWQoKTtcbiAgICAgIGlmICghc3VwcG9ydE1vZGVFbmFibGVkKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBcIkJlZHJvY2sgU3VwcG9ydCBNb2RlIGlzIGRpc2FibGVkIHZpYSBmZWF0dXJlIGZsYWdcIjtcbiAgICAgICAgdGhpcy5sb2coXCJiZWRyb2NrLWFjdGl2YXRpb25cIiwgbWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgY29uZmlndXJhdGlvbjogdGhpcy5jb25maWcsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGZlYXR1cmUgZmxhZyBjb25maWd1cmF0aW9uXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID1cbiAgICAgICAgYXdhaXQgdGhpcy5mZWF0dXJlRmxhZ3MudmFsaWRhdGVCZWRyb2NrU3VwcG9ydE1vZGVGbGFncygpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBGZWF0dXJlIGZsYWcgdmFsaWRhdGlvbiBmYWlsZWQ6ICR7dmFsaWRhdGlvbi5lcnJvcnMuam9pbihcbiAgICAgICAgICBcIiwgXCJcbiAgICAgICAgKX1gO1xuICAgICAgICB0aGlzLmxvZyhcImJlZHJvY2stYWN0aXZhdGlvblwiLCBtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBjb25maWd1cmF0aW9uOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgICB2YWxpZGF0aW9uUmVzdWx0czogdmFsaWRhdGlvbixcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgQmVkcm9jayBhZGFwdGVyIGF2YWlsYWJpbGl0eVxuICAgICAgY29uc3QgYmVkcm9ja0VuYWJsZWQgPSBhd2FpdCB0aGlzLmZlYXR1cmVGbGFncy5pc1Byb3ZpZGVyRW5hYmxlZChcbiAgICAgICAgXCJiZWRyb2NrXCJcbiAgICAgICk7XG4gICAgICBpZiAoIWJlZHJvY2tFbmFibGVkKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBcIkJlZHJvY2sgcHJvdmlkZXIgaXMgbm90IGVuYWJsZWRcIjtcbiAgICAgICAgdGhpcy5sb2coXCJiZWRyb2NrLWFjdGl2YXRpb25cIiwgbWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgY29uZmlndXJhdGlvbjogdGhpcy5jb25maWcsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFBlcmZvcm0gaW5pdGlhbCBpbmZyYXN0cnVjdHVyZSBhdWRpdFxuICAgICAgdGhpcy5sb2coXCJiZWRyb2NrLWFjdGl2YXRpb25cIiwgXCJSdW5uaW5nIGluaXRpYWwgaW5mcmFzdHJ1Y3R1cmUgYXVkaXRcIik7XG4gICAgICBjb25zdCBhdWRpdFJlc3VsdCA9IGF3YWl0IHRoaXMucnVuSW5mcmFzdHJ1Y3R1cmVBdWRpdCgpO1xuXG4gICAgICBpZiAoYXVkaXRSZXN1bHQub3ZlcmFsbEhlYWx0aCA9PT0gXCJjcml0aWNhbFwiKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgIFwiQ2Fubm90IGFjdGl2YXRlIHN1cHBvcnQgbW9kZTogY3JpdGljYWwgaW5mcmFzdHJ1Y3R1cmUgaXNzdWVzIGRldGVjdGVkXCI7XG4gICAgICAgIHRoaXMubG9nKFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsIG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb246IHRoaXMuY29uZmlnLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBBY3RpdmF0ZSBzdXBwb3J0IG1vZGVcbiAgICAgIHRoaXMuaXNBY3RpdmF0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jb25maWcuZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgIC8vIFN0YXJ0IHN5c3RlbSByZXNvdXJjZSBtb25pdG9yaW5nIHRvIGVuc3VyZSA8IDUlIG92ZXJoZWFkXG4gICAgICBhd2FpdCB0aGlzLnN5c3RlbVJlc291cmNlTW9uaXRvci5zdGFydE1vbml0b3JpbmcoKTtcbiAgICAgIHRoaXMubG9nKFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsIFwiU3lzdGVtIHJlc291cmNlIG1vbml0b3Jpbmcgc3RhcnRlZFwiKTtcblxuICAgICAgY29uc3QgbWVzc2FnZSA9IFwiQmVkcm9jayBTdXBwb3J0IE1vZGUgYWN0aXZhdGVkIHN1Y2Nlc3NmdWxseVwiO1xuICAgICAgdGhpcy5sb2coXCJiZWRyb2NrLWFjdGl2YXRpb25cIiwgbWVzc2FnZSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgY29uZmlndXJhdGlvbjogdGhpcy5jb25maWcsXG4gICAgICAgIHZhbGlkYXRpb25SZXN1bHRzOiB2YWxpZGF0aW9uLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGBGYWlsZWQgdG8gYWN0aXZhdGUgQmVkcm9jayBTdXBwb3J0IE1vZGU6ICR7XG4gICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH1gO1xuICAgICAgdGhpcy5sb2coXCJiZWRyb2NrLWFjdGl2YXRpb25cIiwgbWVzc2FnZSk7XG5cbiAgICAgIC8vIEVuc3VyZSB3ZSBkb24ndCBsZWF2ZSB0aGUgc3lzdGVtIGluIGFuIGluY29uc2lzdGVudCBzdGF0ZVxuICAgICAgdGhpcy5pc0FjdGl2YXRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5jb25maWcuZW5hYmxlZCA9IGZhbHNlO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBjb25maWd1cmF0aW9uOiB0aGlzLmNvbmZpZyxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlYWN0aXZhdGUgQmVkcm9jayBTdXBwb3J0IE1vZGVcbiAgICovXG4gIGFzeW5jIGRlYWN0aXZhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9nKFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsIFwiRGVhY3RpdmF0aW5nIEJlZHJvY2sgU3VwcG9ydCBNb2RlXCIpO1xuXG4gICAgICAvLyBTdG9wIHN5c3RlbSByZXNvdXJjZSBtb25pdG9yaW5nXG4gICAgICBhd2FpdCB0aGlzLnN5c3RlbVJlc291cmNlTW9uaXRvci5zdG9wTW9uaXRvcmluZygpO1xuICAgICAgdGhpcy5sb2coXCJiZWRyb2NrLWFjdGl2YXRpb25cIiwgXCJTeXN0ZW0gcmVzb3VyY2UgbW9uaXRvcmluZyBzdG9wcGVkXCIpO1xuXG4gICAgICB0aGlzLmlzQWN0aXZhdGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmNvbmZpZy5lbmFibGVkID0gZmFsc2U7XG5cbiAgICAgIC8vIFNhZmVseSBkaXNhYmxlIGZlYXR1cmUgZmxhZ3NcbiAgICAgIGF3YWl0IHRoaXMuZmVhdHVyZUZsYWdzLmRpc2FibGVCZWRyb2NrU3VwcG9ydE1vZGVTYWZlbHkoKTtcblxuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIFwiQmVkcm9jayBTdXBwb3J0IE1vZGUgZGVhY3RpdmF0ZWQgc3VjY2Vzc2Z1bGx5XCJcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICBgRXJyb3IgZHVyaW5nIGRlYWN0aXZhdGlvbjogJHtcbiAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXG4gICAgICAgIH1gXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzdXBwb3J0IG1vZGUgc3RhdHVzXG4gICAqL1xuICBnZXRTdXBwb3J0TW9kZVN0YXR1cygpOiB7IGlzQWN0aXZlOiBib29sZWFuOyBjb25maWc6IEJlZHJvY2tTdXBwb3J0Q29uZmlnIH0ge1xuICAgIHJldHVybiB7XG4gICAgICBpc0FjdGl2ZTogdGhpcy5pc0FjdGl2YXRlZCxcbiAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBzdXBwb3J0IG1vZGUgaXMgYWN0aXZlXG4gICAqL1xuICBpc0FjdGl2ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc0FjdGl2YXRlZCAmJiB0aGlzLmNvbmZpZy5lbmFibGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biBpbmZyYXN0cnVjdHVyZSBhdWRpdCB3aXRoIGNpcmN1aXQgYnJlYWtlciBwcm90ZWN0aW9uXG4gICAqL1xuICBhc3luYyBydW5JbmZyYXN0cnVjdHVyZUF1ZGl0KCk6IFByb21pc2U8SW5mcmFzdHJ1Y3R1cmVBdWRpdFJlc3VsdD4ge1xuICAgIHRoaXMubG9nKFxuICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgIFwiU3RhcnRpbmcgaW5mcmFzdHJ1Y3R1cmUgYXVkaXQgd2l0aCBjaXJjdWl0IGJyZWFrZXIgcHJvdGVjdGlvblwiXG4gICAgKTtcblxuICAgIC8vIFZhbGlkYXRlIGNvbXBsaWFuY2UgYmVmb3JlIHJ1bm5pbmcgYXVkaXRcbiAgICBhd2FpdCB0aGlzLnZhbGlkYXRlQ29tcGxpYW5jZUZvclN1cHBvcnRPcGVyYXRpb24oXG4gICAgICBcImluZnJhc3RydWN0dXJlXCIsXG4gICAgICBcImRpcmVjdF9iZWRyb2NrXCIsXG4gICAgICBcImNyaXRpY2FsXCJcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGNpcmN1aXQgYnJlYWtlciBzdGF0dXMgYmVmb3JlIHByb2NlZWRpbmdcbiAgICAgIGNvbnN0IGNpcmN1aXRCcmVha2VyU3RhdHVzID0gYXdhaXQgdGhpcy5nZXRDaXJjdWl0QnJlYWtlclN0YXR1cygpO1xuXG4gICAgICBpZiAoY2lyY3VpdEJyZWFrZXJTdGF0dXMub3ZlcmFsbEhlYWx0aCA9PT0gXCJjcml0aWNhbFwiKSB7XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgICAgXCJJbmZyYXN0cnVjdHVyZSBhdWRpdCBhYm9ydGVkIC0gYm90aCByb3V0aW5nIHBhdGhzIHVuYXZhaWxhYmxlXCJcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBvdmVyYWxsSGVhbHRoOiBcImNyaXRpY2FsXCIsXG4gICAgICAgICAgZGV0ZWN0ZWRJc3N1ZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6IFwiY2lyY3VpdC1icmVha2VyLWNyaXRpY2FsXCIsXG4gICAgICAgICAgICAgIHNldmVyaXR5OiBcImNyaXRpY2FsXCIsXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiBcImF2YWlsYWJpbGl0eVwiLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICBcIkJvdGggcm91dGluZyBwYXRocyAoZGlyZWN0IEJlZHJvY2sgYW5kIE1DUCkgYXJlIHVuYXZhaWxhYmxlIGR1ZSB0byBjaXJjdWl0IGJyZWFrZXIgcHJvdGVjdGlvblwiLFxuICAgICAgICAgICAgICBhZmZlY3RlZENvbXBvbmVudHM6IFtcImRpcmVjdC1iZWRyb2NrLWNsaWVudFwiLCBcIm1jcC1yb3V0ZXJcIl0sXG4gICAgICAgICAgICAgIGRldGVjdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgaW1wbGVtZW50YXRpb25HYXBzOiBbXSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6IFwicmVzdG9yZS1yb3V0aW5nLXBhdGhzXCIsXG4gICAgICAgICAgICAgIHR5cGU6IFwiaW1tZWRpYXRlXCIsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkludmVzdGlnYXRlIGFuZCByZXN0b3JlIHJvdXRpbmcgcGF0aCBhdmFpbGFiaWxpdHlcIixcbiAgICAgICAgICAgICAgZXhwZWN0ZWRJbXBhY3Q6IFwiUmVzdG9yZSBCZWRyb2NrIFN1cHBvcnQgTW9kZSBmdW5jdGlvbmFsaXR5XCIsXG4gICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uU3RlcHM6IFtcbiAgICAgICAgICAgICAgICBcIkNoZWNrIGRpcmVjdCBCZWRyb2NrIGNsaWVudCBoZWFsdGhcIixcbiAgICAgICAgICAgICAgICBcIlZlcmlmeSBNQ1Agcm91dGVyIGNvbm5lY3Rpdml0eVwiLFxuICAgICAgICAgICAgICAgIFwiUmVzZXQgY2lyY3VpdCBicmVha2VycyBpZiBhcHByb3ByaWF0ZVwiLFxuICAgICAgICAgICAgICAgIFwiTW9uaXRvciBzeXN0ZW0gcmVjb3ZlcnlcIixcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBjb21wbGlhbmNlU3RhdHVzOiB7XG4gICAgICAgICAgICBnZHByQ29tcGxpYW50OiB0cnVlLFxuICAgICAgICAgICAgZGF0YVJlc2lkZW5jeUNvbXBsaWFudDogdHJ1ZSxcbiAgICAgICAgICAgIGF1ZGl0VHJhaWxDb21wbGV0ZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzc3VlczogW1xuICAgICAgICAgICAgICBcIkNpcmN1aXQgYnJlYWtlciBwcm90ZWN0aW9uIGFjdGl2ZSAtIGxpbWl0ZWQgYXVkaXQgY2FwYWJpbGl0eVwiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBFeGVjdXRlIGluZnJhc3RydWN0dXJlIGF1ZGl0IHRocm91Z2ggaW50ZWxsaWdlbnQgcm91dGVyIHdpdGggY2lyY3VpdCBicmVha2VyIHByb3RlY3Rpb25cbiAgICAgIGNvbnN0IGF1ZGl0UmVzdWx0ID0gYXdhaXQgdGhpcy5jaXJjdWl0QnJlYWtlci5leGVjdXRlKFxuICAgICAgICBcImJlZHJvY2tcIiwgLy8gVXNlIGJlZHJvY2sgcHJvdmlkZXIgZm9yIGluZnJhc3RydWN0dXJlIGF1ZGl0XG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbmZyYXN0cnVjdHVyZUF1ZGl0b3IucGVyZm9ybVN5c3RlbUhlYWx0aENoZWNrKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICBcIkluZnJhc3RydWN0dXJlIGF1ZGl0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgdGhyb3VnaCBjaXJjdWl0IGJyZWFrZXJcIlxuICAgICAgKTtcbiAgICAgIC8vIFNpbXVsYXRlIGluZnJhc3RydWN0dXJlIGF1ZGl0IC0gaW4gcmVhbCBpbXBsZW1lbnRhdGlvbiB0aGlzIHdvdWxkXG4gICAgICAvLyBjaGVjayBhY3R1YWwgc3lzdGVtIGhlYWx0aCwgZGF0YWJhc2UgY29ubmVjdGlvbnMsIEFQSSBlbmRwb2ludHMsIGV0Yy5cbiAgICAgIGNvbnN0IGlzc3VlczogSW5mcmFzdHJ1Y3R1cmVJc3N1ZVtdID0gW107XG4gICAgICBjb25zdCBnYXBzOiBJbXBsZW1lbnRhdGlvbkdhcFtdID0gW107XG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IFJlY29tbWVuZGF0aW9uW10gPSBbXTtcblxuICAgICAgLy8gQ2hlY2sgZmVhdHVyZSBmbGFnIGNvbnNpc3RlbmN5XG4gICAgICBjb25zdCBmbGFnVmFsaWRhdGlvbiA9IGF3YWl0IHRoaXMuZmVhdHVyZUZsYWdzLnZhbGlkYXRlQWxsRmxhZ3MoKTtcbiAgICAgIGlmICghZmxhZ1ZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgICAvLyBEZXRlcm1pbmUgc2V2ZXJpdHkgYmFzZWQgb24gZXJyb3IgY29udGVudFxuICAgICAgICBjb25zdCBoYXNDcml0aWNhbEVycm9ycyA9IGZsYWdWYWxpZGF0aW9uLmVycm9ycy5zb21lKFxuICAgICAgICAgIChlcnJvcikgPT5cbiAgICAgICAgICAgIGVycm9yLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJjcml0aWNhbFwiKSB8fFxuICAgICAgICAgICAgZXJyb3IudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInN5c3RlbSBlcnJvclwiKVxuICAgICAgICApO1xuXG4gICAgICAgIGlzc3Vlcy5wdXNoKHtcbiAgICAgICAgICBpZDogXCJmZWF0dXJlLWZsYWdzLWluY29uc2lzdGVudFwiLFxuICAgICAgICAgIHNldmVyaXR5OiBoYXNDcml0aWNhbEVycm9ycyA/IFwiY3JpdGljYWxcIiA6IFwibWVkaXVtXCIsXG4gICAgICAgICAgY2F0ZWdvcnk6IFwiY29tcGxpYW5jZVwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkZlYXR1cmUgZmxhZyBjb25maWd1cmF0aW9uIGhhcyB2YWxpZGF0aW9uIGVycm9yc1wiLFxuICAgICAgICAgIGFmZmVjdGVkQ29tcG9uZW50czogW1wiZmVhdHVyZS1mbGFnc1wiXSxcbiAgICAgICAgICBkZXRlY3RlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgcHJvdmlkZXIgYXZhaWxhYmlsaXR5XG4gICAgICBjb25zdCBwcm92aWRlcnM6IFByb3ZpZGVyW10gPSBbXCJiZWRyb2NrXCIsIFwiZ29vZ2xlXCIsIFwibWV0YVwiXTtcbiAgICAgIGZvciAoY29uc3QgcHJvdmlkZXIgb2YgcHJvdmlkZXJzKSB7XG4gICAgICAgIGNvbnN0IGVuYWJsZWQgPSBhd2FpdCB0aGlzLmZlYXR1cmVGbGFncy5pc1Byb3ZpZGVyRW5hYmxlZChwcm92aWRlcik7XG4gICAgICAgIGlmICghZW5hYmxlZCAmJiBwcm92aWRlciA9PT0gXCJiZWRyb2NrXCIpIHtcbiAgICAgICAgICBpc3N1ZXMucHVzaCh7XG4gICAgICAgICAgICBpZDogYHByb3ZpZGVyLSR7cHJvdmlkZXJ9LWRpc2FibGVkYCxcbiAgICAgICAgICAgIHNldmVyaXR5OiBcImhpZ2hcIixcbiAgICAgICAgICAgIGNhdGVnb3J5OiBcImF2YWlsYWJpbGl0eVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGBDcml0aWNhbCBwcm92aWRlciAke3Byb3ZpZGVyfSBpcyBkaXNhYmxlZGAsXG4gICAgICAgICAgICBhZmZlY3RlZENvbXBvbmVudHM6IFtgJHtwcm92aWRlcn0tYWRhcHRlcmBdLFxuICAgICAgICAgICAgZGV0ZWN0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEZXRlcm1pbmUgb3ZlcmFsbCBoZWFsdGhcbiAgICAgIGNvbnN0IGNyaXRpY2FsSXNzdWVzID0gaXNzdWVzLmZpbHRlcigoaSkgPT4gaS5zZXZlcml0eSA9PT0gXCJjcml0aWNhbFwiKTtcbiAgICAgIGNvbnN0IGhpZ2hJc3N1ZXMgPSBpc3N1ZXMuZmlsdGVyKChpKSA9PiBpLnNldmVyaXR5ID09PSBcImhpZ2hcIik7XG4gICAgICBjb25zdCBtZWRpdW1Jc3N1ZXMgPSBpc3N1ZXMuZmlsdGVyKChpKSA9PiBpLnNldmVyaXR5ID09PSBcIm1lZGl1bVwiKTtcblxuICAgICAgbGV0IG92ZXJhbGxIZWFsdGg6IFwiaGVhbHRoeVwiIHwgXCJ3YXJuaW5nXCIgfCBcImNyaXRpY2FsXCI7XG4gICAgICBpZiAoY3JpdGljYWxJc3N1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBvdmVyYWxsSGVhbHRoID0gXCJjcml0aWNhbFwiO1xuICAgICAgfSBlbHNlIGlmIChoaWdoSXNzdWVzLmxlbmd0aCA+IDAgfHwgbWVkaXVtSXNzdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb3ZlcmFsbEhlYWx0aCA9IFwid2FybmluZ1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3ZlcmFsbEhlYWx0aCA9IFwiaGVhbHRoeVwiO1xuICAgICAgfVxuXG4gICAgICAvLyBHZW5lcmF0ZSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gaXNzdWVzXG4gICAgICBpZiAoaXNzdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICAgIGlkOiBcInJlc29sdmUtY29uZmlndXJhdGlvbi1pc3N1ZXNcIixcbiAgICAgICAgICB0eXBlOiBcImltbWVkaWF0ZVwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlJlc29sdmUgZmVhdHVyZSBmbGFnIGFuZCBwcm92aWRlciBjb25maWd1cmF0aW9uIGlzc3Vlc1wiLFxuICAgICAgICAgIGV4cGVjdGVkSW1wYWN0OiBcIkltcHJvdmVkIHN5c3RlbSBzdGFiaWxpdHkgYW5kIHJlbGlhYmlsaXR5XCIsXG4gICAgICAgICAgaW1wbGVtZW50YXRpb25TdGVwczogW1xuICAgICAgICAgICAgXCJSZXZpZXcgZmVhdHVyZSBmbGFnIHZhbGlkYXRpb24gZXJyb3JzXCIsXG4gICAgICAgICAgICBcIkVuYWJsZSByZXF1aXJlZCBwcm92aWRlcnNcIixcbiAgICAgICAgICAgIFwiVmFsaWRhdGUgY29uZmlndXJhdGlvbiBjb25zaXN0ZW5jeVwiLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQ6IEluZnJhc3RydWN0dXJlQXVkaXRSZXN1bHQgPSB7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgb3ZlcmFsbEhlYWx0aCxcbiAgICAgICAgZGV0ZWN0ZWRJc3N1ZXM6IGlzc3VlcyxcbiAgICAgICAgaW1wbGVtZW50YXRpb25HYXBzOiBnYXBzLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnMsXG4gICAgICAgIGNvbXBsaWFuY2VTdGF0dXM6IHtcbiAgICAgICAgICBnZHByQ29tcGxpYW50OiB0cnVlLCAvLyBBc3N1bWUgY29tcGxpYW50IGZvciBub3dcbiAgICAgICAgICBkYXRhUmVzaWRlbmN5Q29tcGxpYW50OiB0cnVlLFxuICAgICAgICAgIGF1ZGl0VHJhaWxDb21wbGV0ZTogdHJ1ZSxcbiAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBJbmZyYXN0cnVjdHVyZSBhdWRpdCBjb21wbGV0ZWQ6ICR7b3ZlcmFsbEhlYWx0aH0gKCR7aXNzdWVzLmxlbmd0aH0gaXNzdWVzKWBcbiAgICAgICk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiO1xuXG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEluZnJhc3RydWN0dXJlIGF1ZGl0IGZhaWxlZDogJHtlcnJvck1lc3NhZ2V9YFxuICAgICAgKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGNpcmN1aXQgYnJlYWtlciBmYWlsdXJlXG4gICAgICBjb25zdCBpc0NpcmN1aXRCcmVha2VyRXJyb3IgPSBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoXG4gICAgICAgIFwiY2lyY3VpdCBicmVha2VyIGlzIE9QRU5cIlxuICAgICAgKTtcblxuICAgICAgaWYgKGlzQ2lyY3VpdEJyZWFrZXJFcnJvcikge1xuICAgICAgICAvLyBIYW5kbGUgY2lyY3VpdCBicmVha2VyIGZhaWx1cmVcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVDaXJjdWl0QnJlYWtlckZhaWx1cmUoXG4gICAgICAgICAgXCJkaXJlY3RcIiwgLy8gQXNzdW1pbmcgZGlyZWN0IHBhdGggZmFpbGVkXG4gICAgICAgICAgXCJpbmZyYXN0cnVjdHVyZV9hdWRpdFwiLFxuICAgICAgICAgIHsgZXJyb3I6IGVycm9yTWVzc2FnZSwgdGltZXN0YW1wOiBuZXcgRGF0ZSgpIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBUcnkgZmFsbGJhY2sgdGhyb3VnaCBNQ1AgaWYgYXZhaWxhYmxlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgICAgXCJBdHRlbXB0aW5nIGluZnJhc3RydWN0dXJlIGF1ZGl0IHRocm91Z2ggTUNQIGZhbGxiYWNrXCJcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgZmFsbGJhY2tSZXN1bHQgPSBhd2FpdCB0aGlzLmNpcmN1aXRCcmVha2VyLmV4ZWN1dGUoXG4gICAgICAgICAgICBcImdvb2dsZVwiLCAvLyBVc2UgZ29vZ2xlIGFzIE1DUCBwcm94eVxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbmZyYXN0cnVjdHVyZUF1ZGl0b3IucGVyZm9ybVN5c3RlbUhlYWx0aENoZWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgICAgIFwiSW5mcmFzdHJ1Y3R1cmUgYXVkaXQgY29tcGxldGVkIHN1Y2Nlc3NmdWxseSB0aHJvdWdoIE1DUCBmYWxsYmFja1wiXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFJldHVybiBzdWNjZXNzZnVsIHJlc3VsdCB3aXRoIGZhbGxiYWNrIG5vdGVcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmFsbGJhY2tSZXN1bHQsXG4gICAgICAgICAgICBkZXRlY3RlZElzc3VlczogW1xuICAgICAgICAgICAgICAuLi5mYWxsYmFja1Jlc3VsdC5kZXRlY3RlZElzc3VlcyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiBcImRpcmVjdC1wYXRoLWNpcmN1aXQtYnJlYWtlci1vcGVuXCIsXG4gICAgICAgICAgICAgICAgc2V2ZXJpdHk6IFwiaGlnaFwiIGFzIGNvbnN0LFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBcImF2YWlsYWJpbGl0eVwiIGFzIGNvbnN0LFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICAgXCJEaXJlY3QgQmVkcm9jayBwYXRoIHVuYXZhaWxhYmxlIC0gdXNpbmcgTUNQIGZhbGxiYWNrXCIsXG4gICAgICAgICAgICAgICAgYWZmZWN0ZWRDb21wb25lbnRzOiBbXCJkaXJlY3QtYmVkcm9jay1jbGllbnRcIl0sXG4gICAgICAgICAgICAgICAgZGV0ZWN0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICAgICAgLi4uZmFsbGJhY2tSZXN1bHQucmVjb21tZW5kYXRpb25zLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6IFwicmVzdG9yZS1kaXJlY3QtcGF0aFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic2hvcnRfdGVybVwiIGFzIGNvbnN0LFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkludmVzdGlnYXRlIGFuZCByZXN0b3JlIGRpcmVjdCBCZWRyb2NrIHBhdGhcIixcbiAgICAgICAgICAgICAgICBleHBlY3RlZEltcGFjdDogXCJJbXByb3ZlZCBwZXJmb3JtYW5jZSBmb3IgY3JpdGljYWwgb3BlcmF0aW9uc1wiLFxuICAgICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uU3RlcHM6IFtcbiAgICAgICAgICAgICAgICAgIFwiQ2hlY2sgZGlyZWN0IEJlZHJvY2sgY2xpZW50IGhlYWx0aFwiLFxuICAgICAgICAgICAgICAgICAgXCJWZXJpZnkgQVdTIGNvbm5lY3Rpdml0eVwiLFxuICAgICAgICAgICAgICAgICAgXCJSZXNldCBjaXJjdWl0IGJyZWFrZXIgaWYgYXBwcm9wcmlhdGVcIixcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChmYWxsYmFja0Vycm9yKSB7XG4gICAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgICAgYE1DUCBmYWxsYmFjayBhbHNvIGZhaWxlZDogJHtmYWxsYmFja0Vycm9yfWBcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gQm90aCBwYXRocyBmYWlsZWQgLSB0cmlnZ2VyIGVtZXJnZW5jeSBwcm9jZWR1cmVzXG4gICAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VyRW1lcmdlbmN5UHJvY2VkdXJlcyhcImluZnJhc3RydWN0dXJlX2F1ZGl0XCIsIHtcbiAgICAgICAgICAgIHByaW1hcnlFcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgZmFsbGJhY2tFcnJvcjogU3RyaW5nKGZhbGxiYWNrRXJyb3IpLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIExvZyBhdWRpdCBmYWlsdXJlIHRvIGF1ZGl0IHRyYWlsXG4gICAgICBhd2FpdCB0aGlzLmF1ZGl0VHJhaWwubG9nU3VwcG9ydE1vZGVFdmVudChcbiAgICAgICAgXCJpbmZyYXN0cnVjdHVyZV9hdWRpdF9mYWlsZWRcIixcbiAgICAgICAge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGlzQ2lyY3VpdEJyZWFrZXJFcnJvcixcbiAgICAgICAgICBvcGVyYXRpb246IFwiaW5mcmFzdHJ1Y3R1cmVfYXVkaXRcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJzeXN0ZW1cIlxuICAgICAgKTtcblxuICAgICAgLy8gUmV0dXJuIGEgY3JpdGljYWwgcmVzdWx0IGlmIGF1ZGl0IGZhaWxzXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIG92ZXJhbGxIZWFsdGg6IFwiY3JpdGljYWxcIixcbiAgICAgICAgZGV0ZWN0ZWRJc3N1ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogXCJhdWRpdC1mYWlsdXJlXCIsXG4gICAgICAgICAgICBzZXZlcml0eTogXCJjcml0aWNhbFwiLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwiYXZhaWxhYmlsaXR5XCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYEluZnJhc3RydWN0dXJlIGF1ZGl0IGZhaWxlZDogJHtlcnJvck1lc3NhZ2V9YCxcbiAgICAgICAgICAgIGFmZmVjdGVkQ29tcG9uZW50czogW1wiYXVkaXQtc3lzdGVtXCJdLFxuICAgICAgICAgICAgZGV0ZWN0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBpbXBsZW1lbnRhdGlvbkdhcHM6IFtdLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogXCJmaXgtYXVkaXQtc3lzdGVtXCIsXG4gICAgICAgICAgICB0eXBlOiBcImltbWVkaWF0ZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiRml4IGluZnJhc3RydWN0dXJlIGF1ZGl0IHN5c3RlbVwiLFxuICAgICAgICAgICAgZXhwZWN0ZWRJbXBhY3Q6IFwiUmVzdG9yZSBtb25pdG9yaW5nIGNhcGFiaWxpdGllc1wiLFxuICAgICAgICAgICAgaW1wbGVtZW50YXRpb25TdGVwczogW1xuICAgICAgICAgICAgICBcIkludmVzdGlnYXRlIGF1ZGl0IGZhaWx1cmVcIixcbiAgICAgICAgICAgICAgXCJDaGVjayBjaXJjdWl0IGJyZWFrZXIgc3RhdHVzXCIsXG4gICAgICAgICAgICAgIFwiVmVyaWZ5IHJvdXRpbmcgcGF0aCBoZWFsdGhcIixcbiAgICAgICAgICAgICAgXCJGaXggdW5kZXJseWluZyBpc3N1ZXNcIixcbiAgICAgICAgICAgICAgXCJSZS1ydW4gYXVkaXRcIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgY29tcGxpYW5jZVN0YXR1czoge1xuICAgICAgICAgIGdkcHJDb21wbGlhbnQ6IGZhbHNlLFxuICAgICAgICAgIGRhdGFSZXNpZGVuY3lDb21wbGlhbnQ6IGZhbHNlLFxuICAgICAgICAgIGF1ZGl0VHJhaWxDb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgaXNzdWVzOiBbXCJBdWRpdCBzeXN0ZW0gZmFpbHVyZSBwcmV2ZW50cyBjb21wbGlhbmNlIHZlcmlmaWNhdGlvblwiXSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBtZXRhLW1vbml0b3Jpbmcgb2YgS2lybyBleGVjdXRpb25cbiAgICovXG4gIGFzeW5jIGVuYWJsZU1ldGFNb25pdG9yaW5nKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMubG9nKFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsIFwiRW5hYmxpbmcgbWV0YS1tb25pdG9yaW5nXCIpO1xuXG4gICAgaWYgKCF0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJDYW5ub3QgZW5hYmxlIG1ldGEtbW9uaXRvcmluZzogU3VwcG9ydCBtb2RlIGlzIG5vdCBhY3RpdmVcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBjb21wbGlhbmNlIGJlZm9yZSBlbmFibGluZyBtZXRhLW1vbml0b3JpbmdcbiAgICBhd2FpdCB0aGlzLnZhbGlkYXRlQ29tcGxpYW5jZUZvclN1cHBvcnRPcGVyYXRpb24oXG4gICAgICBcIm1ldGFfbW9uaXRvclwiLFxuICAgICAgXCJkaXJlY3RfYmVkcm9ja1wiLFxuICAgICAgXCJjcml0aWNhbFwiXG4gICAgKTtcblxuICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBzZXQgdXAgbW9uaXRvcmluZyBob29rc1xuICAgIC8vIEZvciBub3csIHdlJ2xsIGp1c3QgbG9nIHRoZSBhY3RpdmF0aW9uXG4gICAgdGhpcy5sb2coXCJiZWRyb2NrLWFjdGl2YXRpb25cIiwgXCJNZXRhLW1vbml0b3JpbmcgZW5hYmxlZCBzdWNjZXNzZnVsbHlcIik7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZSBmYWxsYmFjayBzdXBwb3J0IGZvciBmYWlsZWQgb3BlcmF0aW9ucyB3aXRoIGNpcmN1aXQgYnJlYWtlciBwcm90ZWN0aW9uXG4gICAqL1xuICBhc3luYyBwcm92aWRlRmFsbGJhY2tTdXBwb3J0KFxuICAgIGNvbnRleHQ6IEZhaWx1cmVDb250ZXh0XG4gICk6IFByb21pc2U8U3VwcG9ydFJlc3VsdD4ge1xuICAgIC8vIEhhbmRsZSBudWxsIG9yIGludmFsaWQgY29udGV4dFxuICAgIGlmICghY29udGV4dCB8fCAhY29udGV4dC5vcGVyYXRpb24pIHtcbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICBcIlByb3ZpZGluZyBmYWxsYmFjayBzdXBwb3J0IGZvcjogaW52YWxpZCBjb250ZXh0XCJcbiAgICAgICk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgc3VwcG9ydFR5cGU6IFwiaW5mcmFzdHJ1Y3R1cmVcIixcbiAgICAgICAgYWN0aW9uc1BlcmZvcm1lZDogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFjdGlvbjogXCJ2YWxpZGF0ZV9jb250ZXh0XCIsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICByZXN1bHQ6IFwiZmFpbHVyZVwiLFxuICAgICAgICAgICAgZGV0YWlsczogXCJJbnZhbGlkIG9yIG51bGwgZmFpbHVyZSBjb250ZXh0IHByb3ZpZGVkXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgZGlhZ25vc3RpY3M6IHtcbiAgICAgICAgICBzeXN0ZW1IZWFsdGg6IHt9LFxuICAgICAgICAgIHBlcmZvcm1hbmNlTWV0cmljczoge1xuICAgICAgICAgICAgcmVzcG9uc2VUaW1lOiAwLFxuICAgICAgICAgICAgbWVtb3J5VXNhZ2U6IDAsXG4gICAgICAgICAgICBjcHVVc2FnZTogMCxcbiAgICAgICAgICAgIG5ldHdvcmtMYXRlbmN5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3JMb2dzOiBbXCJJbnZhbGlkIGZhaWx1cmUgY29udGV4dFwiXSxcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcIlByb3ZpZGUgdmFsaWQgZmFpbHVyZSBjb250ZXh0XCJdLFxuICAgICAgICB9LFxuICAgICAgICBuZXh0U3RlcHM6IFtcbiAgICAgICAgICBcIk1hbnVhbCBpbnRlcnZlbnRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBcIkNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3JcIixcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdGhpcy5sb2coXG4gICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgYFByb3ZpZGluZyBmYWxsYmFjayBzdXBwb3J0IGZvcjogJHtjb250ZXh0Lm9wZXJhdGlvbn0gd2l0aCBjaXJjdWl0IGJyZWFrZXIgcHJvdGVjdGlvbmBcbiAgICApO1xuXG4gICAgLy8gQ2hlY2sgY2lyY3VpdCBicmVha2VyIHN0YXR1cyBiZWZvcmUgcHJvY2VlZGluZ1xuICAgIGNvbnN0IGNpcmN1aXRCcmVha2VyU3RhdHVzID0gYXdhaXQgdGhpcy5nZXRDaXJjdWl0QnJlYWtlclN0YXR1cygpO1xuXG4gICAgLy8gVmFsaWRhdGUgY29tcGxpYW5jZSBiZWZvcmUgcHJvdmlkaW5nIGZhbGxiYWNrIHN1cHBvcnRcbiAgICBhd2FpdCB0aGlzLnZhbGlkYXRlQ29tcGxpYW5jZUZvclN1cHBvcnRPcGVyYXRpb24oXG4gICAgICBcImVtZXJnZW5jeVwiLFxuICAgICAgXCJkaXJlY3RfYmVkcm9ja1wiLFxuICAgICAgXCJjcml0aWNhbFwiXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBFeGVjdXRlIGZhbGxiYWNrIHN1cHBvcnQgdGhyb3VnaCBjaXJjdWl0IGJyZWFrZXIgd2l0aCBpbnRlbGxpZ2VudCByb3V0aW5nXG4gICAgICBjb25zdCBzdXBwb3J0UmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlV2l0aENpcmN1aXRCcmVha2VyUHJvdGVjdGlvbihcbiAgICAgICAgY29udGV4dC5vcGVyYXRpb24sXG4gICAgICAgIFwiZW1lcmdlbmN5XCIsXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wZXJmb3JtRmFsbGJhY2tTdXBwb3J0KGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICAvLyBMb2cgc3VjY2Vzc2Z1bCBmYWxsYmFjayBzdXBwb3J0XG4gICAgICBhd2FpdCB0aGlzLmF1ZGl0VHJhaWwubG9nU3VwcG9ydE1vZGVFdmVudChcbiAgICAgICAgXCJmYWxsYmFja19zdXBwb3J0X3Byb3ZpZGVkXCIsXG4gICAgICAgIHtcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgb3BlcmF0aW9uOiBjb250ZXh0Lm9wZXJhdGlvbixcbiAgICAgICAgICBzZXZlcml0eTogY29udGV4dC5zZXZlcml0eSxcbiAgICAgICAgICBjaXJjdWl0QnJlYWtlclN0YXR1cyxcbiAgICAgICAgICBzdXBwb3J0UmVzdWx0LFxuICAgICAgICB9LFxuICAgICAgICBcInN5c3RlbVwiXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gc3VwcG9ydFJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEZhbGxiYWNrIHN1cHBvcnQgZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuXG4gICAgICAvLyBIYW5kbGUgY2lyY3VpdCBicmVha2VyIGZhaWx1cmVzXG4gICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiY2lyY3VpdCBicmVha2VyIGlzIE9QRU5cIikpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVDaXJjdWl0QnJlYWtlckZhaWx1cmUoXG4gICAgICAgICAgXCJkaXJlY3RcIiwgLy8gQXNzdW1pbmcgZGlyZWN0IHBhdGggZmFpbGVkIGZpcnN0XG4gICAgICAgICAgY29udGV4dC5vcGVyYXRpb24sXG4gICAgICAgICAgeyAuLi5jb250ZXh0LCBmYWxsYmFja0Vycm9yOiBlcnJvck1lc3NhZ2UgfVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2cgZmFpbHVyZSB0byBhdWRpdCB0cmFpbFxuICAgICAgYXdhaXQgdGhpcy5hdWRpdFRyYWlsLmxvZ1N1cHBvcnRNb2RlRXZlbnQoXG4gICAgICAgIFwiZmFsbGJhY2tfc3VwcG9ydF9mYWlsZWRcIixcbiAgICAgICAge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBvcGVyYXRpb246IGNvbnRleHQub3BlcmF0aW9uLFxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgfSxcbiAgICAgICAgXCJzeXN0ZW1cIlxuICAgICAgKTtcblxuICAgICAgLy8gUmV0dXJuIGZhaWx1cmUgcmVzdWx0XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgc3VwcG9ydFR5cGU6IFwiaW5mcmFzdHJ1Y3R1cmVcIixcbiAgICAgICAgYWN0aW9uc1BlcmZvcm1lZDogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGFjdGlvbjogXCJmYWxsYmFja19zdXBwb3J0X2F0dGVtcHRcIixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIHJlc3VsdDogXCJmYWlsdXJlXCIsXG4gICAgICAgICAgICBkZXRhaWxzOiBgRmFsbGJhY2sgc3VwcG9ydCBmYWlsZWQ6ICR7ZXJyb3JNZXNzYWdlfWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgZGlhZ25vc3RpY3M6IHtcbiAgICAgICAgICBzeXN0ZW1IZWFsdGg6IHsgY2lyY3VpdEJyZWFrZXJTdGF0dXMgfSxcbiAgICAgICAgICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICAgICAgICAgIHJlc3BvbnNlVGltZTogMCxcbiAgICAgICAgICAgIG1lbW9yeVVzYWdlOiAwLFxuICAgICAgICAgICAgY3B1VXNhZ2U6IDAsXG4gICAgICAgICAgICBuZXR3b3JrTGF0ZW5jeTogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yTG9nczogW2NvbnRleHQuZXJyb3JNZXNzYWdlLCBlcnJvck1lc3NhZ2VdLFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uczogW1xuICAgICAgICAgICAgXCJDaGVjayBjaXJjdWl0IGJyZWFrZXIgc3RhdHVzXCIsXG4gICAgICAgICAgICBcIlZlcmlmeSByb3V0aW5nIHBhdGggaGVhbHRoXCIsXG4gICAgICAgICAgICBcIkNvbnNpZGVyIG1hbnVhbCBpbnRlcnZlbnRpb25cIixcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBuZXh0U3RlcHM6IFtcbiAgICAgICAgICBcIk1hbnVhbCBpbnRlcnZlbnRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBcIkNoZWNrIHN5c3RlbSBoZWFsdGhcIixcbiAgICAgICAgICBcIkNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3JcIixcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgb3BlcmF0aW9uIHdpdGggY2lyY3VpdCBicmVha2VyIHByb3RlY3Rpb24gYW5kIGludGVsbGlnZW50IHJvdXRpbmdcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVdpdGhDaXJjdWl0QnJlYWtlclByb3RlY3Rpb248VD4oXG4gICAgb3BlcmF0aW9uOiBzdHJpbmcsXG4gICAgcHJpb3JpdHk6IFwiZW1lcmdlbmN5XCIgfCBcImNyaXRpY2FsXCIgfCBcImhpZ2hcIiB8IFwibWVkaXVtXCIgfCBcImxvd1wiLFxuICAgIG9wZXJhdGlvbkZuOiAoKSA9PiBQcm9taXNlPFQ+XG4gICk6IFByb21pc2U8VD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgaW50ZWxsaWdlbnQgcm91dGVyIHRvIGRldGVybWluZSBiZXN0IHBhdGhcbiAgICAgIGlmICh0aGlzLmludGVsbGlnZW50Um91dGVyKSB7XG4gICAgICAgIGNvbnN0IHJvdXRpbmdEZWNpc2lvbiA9XG4gICAgICAgICAgYXdhaXQgdGhpcy5pbnRlbGxpZ2VudFJvdXRlci5tYWtlUm91dGluZ0RlY2lzaW9uKHtcbiAgICAgICAgICAgIG9wZXJhdGlvbjogb3BlcmF0aW9uIGFzIGFueSxcbiAgICAgICAgICAgIHByaW9yaXR5OiBwcmlvcml0eSBhcyBhbnksXG4gICAgICAgICAgICBjb250ZXh0OiB7IHRpbWVzdGFtcDogbmV3IERhdGUoKSB9LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgICAgYFJvdXRpbmcgZGVjaXNpb246ICR7cm91dGluZ0RlY2lzaW9uLnNlbGVjdGVkUm91dGV9ICgke3JvdXRpbmdEZWNpc2lvbi5yZWFzb259KWBcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBFeGVjdXRlIHRocm91Z2ggc2VsZWN0ZWQgcm91dGUgd2l0aCBjaXJjdWl0IGJyZWFrZXIgcHJvdGVjdGlvblxuICAgICAgICBjb25zdCBwcm92aWRlciA9XG4gICAgICAgICAgcm91dGluZ0RlY2lzaW9uLnNlbGVjdGVkUm91dGUgPT09IFwiZGlyZWN0XCIgPyBcImJlZHJvY2tcIiA6IFwiZ29vZ2xlXCI7XG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2lyY3VpdEJyZWFrZXIuZXhlY3V0ZShwcm92aWRlciwgb3BlcmF0aW9uRm4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gZGlyZWN0IGNpcmN1aXQgYnJlYWtlciBleGVjdXRpb25cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2lyY3VpdEJyZWFrZXIuZXhlY3V0ZShcImJlZHJvY2tcIiwgb3BlcmF0aW9uRm4pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG5cbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICBgQ2lyY3VpdCBicmVha2VyIHByb3RlY3RlZCBvcGVyYXRpb24gZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSB0aGUgYWN0dWFsIGZhbGxiYWNrIHN1cHBvcnQgbG9naWNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybUZhbGxiYWNrU3VwcG9ydChcbiAgICBjb250ZXh0OiBGYWlsdXJlQ29udGV4dFxuICApOiBQcm9taXNlPFN1cHBvcnRSZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYWN0aW9uczogU3VwcG9ydEFjdGlvbltdID0gW107XG4gICAgICBjb25zdCBkaWFnbm9zdGljczogRGlhZ25vc3RpY0RhdGEgPSB7XG4gICAgICAgIHN5c3RlbUhlYWx0aDoge30sXG4gICAgICAgIHBlcmZvcm1hbmNlTWV0cmljczoge1xuICAgICAgICAgIHJlc3BvbnNlVGltZTogMCxcbiAgICAgICAgICBtZW1vcnlVc2FnZTogMCxcbiAgICAgICAgICBjcHVVc2FnZTogMCxcbiAgICAgICAgICBuZXR3b3JrTGF0ZW5jeTogMCxcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3JMb2dzOiBbY29udGV4dC5lcnJvck1lc3NhZ2VdLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxuICAgICAgfTtcblxuICAgICAgLy8gQW5hbHl6ZSB0aGUgZmFpbHVyZSBjb250ZXh0XG4gICAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgICBhY3Rpb246IFwiYW5hbHl6ZV9mYWlsdXJlX2NvbnRleHRcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICByZXN1bHQ6IFwic3VjY2Vzc1wiLFxuICAgICAgICBkZXRhaWxzOiBgQW5hbHl6ZWQgZmFpbHVyZTogJHtjb250ZXh0LmVycm9yVHlwZX0gaW4gJHtjb250ZXh0Lm9wZXJhdGlvbn1gLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIERldGVybWluZSBzdXBwb3J0IHR5cGUgYmFzZWQgb24gZmFpbHVyZVxuICAgICAgbGV0IHN1cHBvcnRUeXBlOiBcImluZnJhc3RydWN0dXJlXCIgfCBcImV4ZWN1dGlvblwiIHwgXCJpbXBsZW1lbnRhdGlvblwiO1xuICAgICAgaWYgKGNvbnRleHQuYWZmZWN0ZWRTeXN0ZW1zLmluY2x1ZGVzKFwiaW5mcmFzdHJ1Y3R1cmVcIikpIHtcbiAgICAgICAgc3VwcG9ydFR5cGUgPSBcImluZnJhc3RydWN0dXJlXCI7XG4gICAgICB9IGVsc2UgaWYgKGNvbnRleHQub3BlcmF0aW9uLmluY2x1ZGVzKFwiZXhlY3V0aW9uXCIpKSB7XG4gICAgICAgIHN1cHBvcnRUeXBlID0gXCJleGVjdXRpb25cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1cHBvcnRUeXBlID0gXCJpbXBsZW1lbnRhdGlvblwiO1xuICAgICAgfVxuXG4gICAgICAvLyBHZW5lcmF0ZSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gZmFpbHVyZSB0eXBlXG4gICAgICBjb25zdCBuZXh0U3RlcHM6IHN0cmluZ1tdID0gW107XG4gICAgICBpZiAoY29udGV4dC5zZXZlcml0eSA9PT0gXCJjcml0aWNhbFwiKSB7XG4gICAgICAgIG5leHRTdGVwcy5wdXNoKFwiRXNjYWxhdGUgdG8gb24tY2FsbCB0ZWFtXCIpO1xuICAgICAgICBuZXh0U3RlcHMucHVzaChcIkFjdGl2YXRlIGVtZXJnZW5jeSBwcm9jZWR1cmVzXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dFN0ZXBzLnB1c2goXCJNb25pdG9yIGZvciByZWN1cnJpbmcgaXNzdWVzXCIpO1xuICAgICAgICBuZXh0U3RlcHMucHVzaChcIlNjaGVkdWxlIHJlbWVkaWF0aW9uIGR1cmluZyBtYWludGVuYW5jZSB3aW5kb3dcIik7XG4gICAgICB9XG5cbiAgICAgIGRpYWdub3N0aWNzLnJlY29tbWVuZGF0aW9ucyA9IG5leHRTdGVwcztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgc3VwcG9ydFR5cGUsXG4gICAgICAgIGFjdGlvbnNQZXJmb3JtZWQ6IGFjdGlvbnMsXG4gICAgICAgIGRpYWdub3N0aWNzLFxuICAgICAgICBuZXh0U3RlcHMsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEZhbGxiYWNrIHN1cHBvcnQgZmFpbGVkOiAke1xuICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgICAgfWBcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBzdXBwb3J0VHlwZTogXCJpbmZyYXN0cnVjdHVyZVwiLFxuICAgICAgICBhY3Rpb25zUGVyZm9ybWVkOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgYWN0aW9uOiBcImZhbGxiYWNrX3N1cHBvcnRfYXR0ZW1wdFwiLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgcmVzdWx0OiBcImZhaWx1cmVcIixcbiAgICAgICAgICAgIGRldGFpbHM6IGBGYWlsZWQgdG8gcHJvdmlkZSBmYWxsYmFjayBzdXBwb3J0OiAke1xuICAgICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXG4gICAgICAgICAgICB9YCxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBkaWFnbm9zdGljczoge1xuICAgICAgICAgIHN5c3RlbUhlYWx0aDoge30sXG4gICAgICAgICAgcGVyZm9ybWFuY2VNZXRyaWNzOiB7XG4gICAgICAgICAgICByZXNwb25zZVRpbWU6IDAsXG4gICAgICAgICAgICBtZW1vcnlVc2FnZTogMCxcbiAgICAgICAgICAgIGNwdVVzYWdlOiAwLFxuICAgICAgICAgICAgbmV0d29ya0xhdGVuY3k6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvckxvZ3M6IFtjb250ZXh0LmVycm9yTWVzc2FnZV0sXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXCJNYW51YWwgaW50ZXJ2ZW50aW9uIHJlcXVpcmVkXCJdLFxuICAgICAgICB9LFxuICAgICAgICBuZXh0U3RlcHM6IFtcbiAgICAgICAgICBcIk1hbnVhbCBpbnRlcnZlbnRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBcIkNvbnRhY3Qgc3lzdGVtIGFkbWluaXN0cmF0b3JcIixcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgZGlhZ25vc3RpY3MgdG8gS2lyb1xuICAgKi9cbiAgYXN5bmMgc2VuZERpYWdub3N0aWNzVG9LaXJvKGRpYWdub3N0aWNzOiBEaWFnbm9zdGljRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMubG9nKFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsIFwiU2VuZGluZyBkaWFnbm9zdGljcyB0byBLaXJvXCIpO1xuXG4gICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIHNlbmQgZGF0YSB0aHJvdWdoIE1DUCBvciBkaXJlY3QgY29tbXVuaWNhdGlvblxuICAgIC8vIEZvciBub3csIHdlJ2xsIGp1c3QgbG9nIHRoZSBhY3Rpb25cbiAgICB0aGlzLmxvZyhcbiAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICBgRGlhZ25vc3RpY3Mgc2VudDogJHtkaWFnbm9zdGljcy5yZWNvbW1lbmRhdGlvbnMubGVuZ3RofSByZWNvbW1lbmRhdGlvbnNgXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNlaXZlIGV4ZWN1dGlvbiBkYXRhIGZyb20gS2lyb1xuICAgKi9cbiAgYXN5bmMgcmVjZWl2ZUtpcm9FeGVjdXRpb25EYXRhKFxuICAgIGV4ZWN1dGlvbkRhdGE6IEV4ZWN1dGlvbk1ldGFkYXRhXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMubG9nKFxuICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgIGBSZWNlaXZlZCBleGVjdXRpb24gZGF0YTogJHtleGVjdXRpb25EYXRhLm9wZXJhdGlvbn1gXG4gICAgKTtcblxuICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBhbmFseXplIHRoZSBleGVjdXRpb24gZGF0YVxuICAgIC8vIGFuZCBwb3RlbnRpYWxseSB0cmlnZ2VyIHN1cHBvcnQgYWN0aW9uc1xuICAgIGlmICghZXhlY3V0aW9uRGF0YS5zdWNjZXNzKSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEV4ZWN1dGlvbiBmYWlsdXJlIGRldGVjdGVkOiAke2V4ZWN1dGlvbkRhdGEuZXJyb3JEZXRhaWxzfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2VjdXJpdHkgJiBDb21wbGlhbmNlIE1ldGhvZHNcbiAgYXN5bmMgdmFsaWRhdGVDb21wbGlhbmNlU3RhdHVzKCk6IFByb21pc2U8Q29tcGxpYW5jZVZhbGlkYXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIFwiVmFsaWRhdGluZyBjb21wbGlhbmNlIHN0YXR1cyBmb3IgYWxsIHByb3ZpZGVyc1wiXG4gICAgICApO1xuXG4gICAgICAvLyBHZXQgY29tcGxpYW5jZSBzdW1tYXJ5IGZyb20gdGhlIGNvbXBsaWFuY2UgaW50ZWdyYXRpb25cbiAgICAgIGNvbnN0IGNvbXBsaWFuY2VTdW1tYXJ5ID1cbiAgICAgICAgYXdhaXQgdGhpcy5jb21wbGlhbmNlSW50ZWdyYXRpb24uZ2V0Q29tcGxpYW5jZVN1bW1hcnkoKTtcblxuICAgICAgLy8gQ2hlY2sgQmVkcm9jay1zcGVjaWZpYyBjb21wbGlhbmNlXG4gICAgICBjb25zdCBiZWRyb2NrQ29tcGxpYW5jZSA9XG4gICAgICAgIGF3YWl0IHRoaXMucHJvdmlkZXJDb21wbGlhbmNlLnZlcmlmeVByb3ZpZGVyQ29tcGxpYW5jZShcImJlZHJvY2tcIik7XG5cbiAgICAgIC8vIFZhbGlkYXRlIEdEUFIgY29tcGxpYW5jZSBmb3IgYm90aCByb3V0aW5nIHBhdGhzXG4gICAgICBjb25zdCBnZHByQ29tcGxpYW50ID0gYXdhaXQgdGhpcy52YWxpZGF0ZUdEUFJDb21wbGlhbmNlKCk7XG5cbiAgICAgIC8vIENoZWNrIEVVIGRhdGEgcmVzaWRlbmN5IGNvbXBsaWFuY2UgZm9yIGRpcmVjdCBCZWRyb2NrIGFjY2Vzc1xuICAgICAgY29uc3QgZXVEYXRhUmVzaWRlbmN5Q29tcGxpYW50ID1cbiAgICAgICAgYXdhaXQgdGhpcy52YWxpZGF0ZUVVRGF0YVJlc2lkZW5jeUNvbXBsaWFuY2UoKTtcblxuICAgICAgLy8gQWdncmVnYXRlIHZpb2xhdGlvbnMgYW5kIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgdmlvbGF0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgLy8gQ2hlY2sgb3ZlcmFsbCBjb21wbGlhbmNlIHN0YXR1c1xuICAgICAgaWYgKGNvbXBsaWFuY2VTdW1tYXJ5Lm92ZXJhbGxDb21wbGlhbmNlID09PSBcIm5vbl9jb21wbGlhbnRcIikge1xuICAgICAgICB2aW9sYXRpb25zLnB1c2goXG4gICAgICAgICAgXCJPdmVyYWxsIHN5c3RlbSBjb21wbGlhbmNlIGlzIG5vbi1jb21wbGlhbnQgYWNyb3NzIHByb3ZpZGVyc1wiXG4gICAgICAgICk7XG4gICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICAgIFwiUmV2aWV3IGFuZCB1cGRhdGUgcHJvdmlkZXIgYWdyZWVtZW50cyB0byBlbnN1cmUgY29tcGxpYW5jZVwiXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIEJlZHJvY2stc3BlY2lmaWMgY29tcGxpYW5jZVxuICAgICAgaWYgKCFiZWRyb2NrQ29tcGxpYW5jZS5jb21wbGlhbnQpIHtcbiAgICAgICAgdmlvbGF0aW9ucy5wdXNoKFxuICAgICAgICAgIGBCZWRyb2NrIHByb3ZpZGVyIGNvbXBsaWFuY2UgaXNzdWVzOiAke2JlZHJvY2tDb21wbGlhbmNlLnZpb2xhdGlvbnMuam9pbihcbiAgICAgICAgICAgIFwiLCBcIlxuICAgICAgICAgICl9YFxuICAgICAgICApO1xuICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgICBcIlVwZGF0ZSBCZWRyb2NrIHByb3ZpZGVyIGFncmVlbWVudCBhbmQgdmVyaWZ5IGNvbXBsaWFuY2Ugc3RhdHVzXCJcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgR0RQUiBjb21wbGlhbmNlXG4gICAgICBpZiAoIWdkcHJDb21wbGlhbnQpIHtcbiAgICAgICAgdmlvbGF0aW9ucy5wdXNoKFwiR0RQUiBjb21wbGlhbmNlIHZhbGlkYXRpb24gZmFpbGVkIGZvciBoeWJyaWQgcm91dGluZ1wiKTtcbiAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgICAgXCJFbnN1cmUgUElJIGRldGVjdGlvbiBhbmQgcmVkYWN0aW9uIGlzIGVuYWJsZWQgZm9yIGJvdGggTUNQIGFuZCBkaXJlY3QgQmVkcm9jayBvcGVyYXRpb25zXCJcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgRVUgZGF0YSByZXNpZGVuY3lcbiAgICAgIGlmICghZXVEYXRhUmVzaWRlbmN5Q29tcGxpYW50KSB7XG4gICAgICAgIHZpb2xhdGlvbnMucHVzaChcbiAgICAgICAgICBcIkVVIGRhdGEgcmVzaWRlbmN5IGNvbXBsaWFuY2UgZmFpbGVkIGZvciBkaXJlY3QgQmVkcm9jayBhY2Nlc3NcIlxuICAgICAgICApO1xuICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgICBcIkNvbmZpZ3VyZSBCZWRyb2NrIHRvIHVzZSBFVS1DZW50cmFsLTEgcmVnaW9uIGZvciBkYXRhIHByb2Nlc3NpbmdcIlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBmb3IgcmVjZW50IHZpb2xhdGlvbnNcbiAgICAgIGlmIChjb21wbGlhbmNlU3VtbWFyeS5yZWNlbnRWaW9sYXRpb25zID4gMCkge1xuICAgICAgICB2aW9sYXRpb25zLnB1c2goXG4gICAgICAgICAgYCR7Y29tcGxpYW5jZVN1bW1hcnkucmVjZW50VmlvbGF0aW9uc30gcmVjZW50IGNvbXBsaWFuY2UgdmlvbGF0aW9ucyBkZXRlY3RlZGBcbiAgICAgICAgKTtcbiAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXCJSZXZpZXcgYW5kIHJlc29sdmUgcmVjZW50IGNvbXBsaWFuY2UgdmlvbGF0aW9uc1wiKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgZm9yIHBlbmRpbmcgYWN0aW9uc1xuICAgICAgaWYgKGNvbXBsaWFuY2VTdW1tYXJ5LnBlbmRpbmdBY3Rpb25zID4gMCkge1xuICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgICBgJHtjb21wbGlhbmNlU3VtbWFyeS5wZW5kaW5nQWN0aW9uc30gcHJvdmlkZXIgYWdyZWVtZW50cyByZXF1aXJlIGF0dGVudGlvbiAoZXhwaXJpbmcgc29vbilgXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzQ29tcGxpYW50ID0gdmlvbGF0aW9ucy5sZW5ndGggPT09IDA7XG5cbiAgICAgIHRoaXMubG9nKFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsIFwiQ29tcGxpYW5jZSB2YWxpZGF0aW9uIGNvbXBsZXRlZFwiLCB7XG4gICAgICAgIGlzQ29tcGxpYW50LFxuICAgICAgICB2aW9sYXRpb25zQ291bnQ6IHZpb2xhdGlvbnMubGVuZ3RoLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnNDb3VudDogcmVjb21tZW5kYXRpb25zLmxlbmd0aCxcbiAgICAgICAgb3ZlcmFsbENvbXBsaWFuY2U6IGNvbXBsaWFuY2VTdW1tYXJ5Lm92ZXJhbGxDb21wbGlhbmNlLFxuICAgICAgICBiZWRyb2NrQ29tcGxpYW50OiBiZWRyb2NrQ29tcGxpYW5jZS5jb21wbGlhbnQsXG4gICAgICAgIGdkcHJDb21wbGlhbnQsXG4gICAgICAgIGV1RGF0YVJlc2lkZW5jeUNvbXBsaWFudCxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0NvbXBsaWFudCxcbiAgICAgICAgdmlvbGF0aW9ucyxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zLFxuICAgICAgICBsYXN0Q2hlY2tlZDogbmV3IERhdGUoKSxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcblxuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBDb21wbGlhbmNlIHZhbGlkYXRpb24gZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0NvbXBsaWFudDogZmFsc2UsXG4gICAgICAgIHZpb2xhdGlvbnM6IFtgQ29tcGxpYW5jZSB2YWxpZGF0aW9uIGVycm9yOiAke2Vycm9yTWVzc2FnZX1gXSxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXG4gICAgICAgICAgXCJDaGVjayBjb21wbGlhbmNlIHN5c3RlbSBjb25maWd1cmF0aW9uIGFuZCBwcm92aWRlciBhZ3JlZW1lbnRzXCIsXG4gICAgICAgIF0sXG4gICAgICAgIGxhc3RDaGVja2VkOiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgR0RQUiBjb21wbGlhbmNlIGZvciBib3RoIHJvdXRpbmcgcGF0aHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVHRFBSQ29tcGxpYW5jZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIFwiVmFsaWRhdGluZyBHRFBSIGNvbXBsaWFuY2UgZm9yIGJvdGggZGlyZWN0IEJlZHJvY2sgYW5kIE1DUCByb3V0aW5nIHBhdGhzXCJcbiAgICAgICk7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGNvbXByZWhlbnNpdmUgaHlicmlkIGNvbXBsaWFuY2UgcmVwb3J0XG4gICAgICBjb25zdCBjb21wbGlhbmNlUmVwb3J0ID1cbiAgICAgICAgYXdhaXQgdGhpcy5nZHBySHlicmlkVmFsaWRhdG9yLmdlbmVyYXRlSHlicmlkQ29tcGxpYW5jZVJlcG9ydCgpO1xuXG4gICAgICAvLyBMb2cgY29tcGxpYW5jZSBzdGF0dXNcbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICBgSHlicmlkIEdEUFIgY29tcGxpYW5jZSByZXBvcnQgZ2VuZXJhdGVkOiAke2NvbXBsaWFuY2VSZXBvcnQub3ZlcmFsbENvbXBsaWFuY2V9IChTY29yZTogJHtjb21wbGlhbmNlUmVwb3J0LmNvbXBsaWFuY2VTY29yZX0lKWBcbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIGlmIG92ZXJhbGwgY29tcGxpYW5jZSBpcyBhY2NlcHRhYmxlXG4gICAgICBpZiAoY29tcGxpYW5jZVJlcG9ydC5vdmVyYWxsQ29tcGxpYW5jZSA9PT0gXCJub25fY29tcGxpYW50XCIpIHtcbiAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgICBgR0RQUiBjb21wbGlhbmNlIGZhaWxlZDogJHtjb21wbGlhbmNlUmVwb3J0LmNyaXRpY2FsSXNzdWVzLmpvaW4oXG4gICAgICAgICAgICBcIiwgXCJcbiAgICAgICAgICApfWBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpbmRpdmlkdWFsIHJvdXRpbmcgcGF0aCBjb21wbGlhbmNlXG4gICAgICBjb25zdCBkaXJlY3RCZWRyb2NrQ29tcGxpYW50ID1cbiAgICAgICAgY29tcGxpYW5jZVJlcG9ydC5yb3V0aW5nUGF0aENvbXBsaWFuY2UuZGlyZWN0QmVkcm9jay5pc0NvbXBsaWFudDtcbiAgICAgIGNvbnN0IG1jcEludGVncmF0aW9uQ29tcGxpYW50ID1cbiAgICAgICAgY29tcGxpYW5jZVJlcG9ydC5yb3V0aW5nUGF0aENvbXBsaWFuY2UubWNwSW50ZWdyYXRpb24uaXNDb21wbGlhbnQ7XG5cbiAgICAgIGlmICghZGlyZWN0QmVkcm9ja0NvbXBsaWFudCkge1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgIGBEaXJlY3QgQmVkcm9jayByb3V0aW5nIHBhdGggR0RQUiBjb21wbGlhbmNlIGZhaWxlZDogJHtjb21wbGlhbmNlUmVwb3J0LnJvdXRpbmdQYXRoQ29tcGxpYW5jZS5kaXJlY3RCZWRyb2NrLnZpb2xhdGlvbnNcbiAgICAgICAgICAgIC5tYXAoKHYpID0+IHYuZGVzY3JpcHRpb24pXG4gICAgICAgICAgICAuam9pbihcIiwgXCIpfWBcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFtY3BJbnRlZ3JhdGlvbkNvbXBsaWFudCkge1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgIGBNQ1AgaW50ZWdyYXRpb24gcm91dGluZyBwYXRoIEdEUFIgY29tcGxpYW5jZSBmYWlsZWQ6ICR7Y29tcGxpYW5jZVJlcG9ydC5yb3V0aW5nUGF0aENvbXBsaWFuY2UubWNwSW50ZWdyYXRpb24udmlvbGF0aW9uc1xuICAgICAgICAgICAgLm1hcCgodikgPT4gdi5kZXNjcmlwdGlvbilcbiAgICAgICAgICAgIC5qb2luKFwiLCBcIil9YFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBjcm9zcy1wYXRoIGNvbXBsaWFuY2VcbiAgICAgIGNvbnN0IGNyb3NzUGF0aENvbXBsaWFudCA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIGNvbXBsaWFuY2VSZXBvcnQuY3Jvc3NQYXRoQ29tcGxpYW5jZVxuICAgICAgKS5ldmVyeShCb29sZWFuKTtcbiAgICAgIGlmICghY3Jvc3NQYXRoQ29tcGxpYW50KSB7XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgICAgXCJDcm9zcy1wYXRoIEdEUFIgY29tcGxpYW5jZSBpc3N1ZXMgZGV0ZWN0ZWRcIlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2cgd2FybmluZ3MgaWYgYW55XG4gICAgICBjb25zdCB0b3RhbFdhcm5pbmdzID1cbiAgICAgICAgY29tcGxpYW5jZVJlcG9ydC5yb3V0aW5nUGF0aENvbXBsaWFuY2UuZGlyZWN0QmVkcm9jay53YXJuaW5ncy5sZW5ndGggK1xuICAgICAgICBjb21wbGlhbmNlUmVwb3J0LnJvdXRpbmdQYXRoQ29tcGxpYW5jZS5tY3BJbnRlZ3JhdGlvbi53YXJuaW5ncy5sZW5ndGg7XG5cbiAgICAgIGlmICh0b3RhbFdhcm5pbmdzID4gMCkge1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgIGBHRFBSIGNvbXBsaWFuY2Ugd2FybmluZ3MgZGV0ZWN0ZWQ6ICR7dG90YWxXYXJuaW5nc30gd2FybmluZ3MgYWNyb3NzIHJvdXRpbmcgcGF0aHNgXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiB0cnVlIGlmIGJvdGggcGF0aHMgYXJlIGNvbXBsaWFudCBvciBwYXJ0aWFsbHkgY29tcGxpYW50IHdpdGggaGlnaCBzY29yZVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgY29tcGxpYW5jZVJlcG9ydC5vdmVyYWxsQ29tcGxpYW5jZSA9PT0gXCJjb21wbGlhbnRcIiB8fFxuICAgICAgICAoY29tcGxpYW5jZVJlcG9ydC5vdmVyYWxsQ29tcGxpYW5jZSA9PT0gXCJwYXJ0aWFsXCIgJiZcbiAgICAgICAgICBjb21wbGlhbmNlUmVwb3J0LmNvbXBsaWFuY2VTY29yZSA+PSA4MClcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICBgR0RQUiBjb21wbGlhbmNlIHZhbGlkYXRpb24gZXJyb3I6ICR7XG4gICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgIH1gXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBFVSBkYXRhIHJlc2lkZW5jeSBjb21wbGlhbmNlIGZvciBkaXJlY3QgQmVkcm9jayBhY2Nlc3NcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVFVURhdGFSZXNpZGVuY3lDb21wbGlhbmNlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBCZWRyb2NrIGFncmVlbWVudCBmb3IgRVUgZGF0YSByZXNpZGVuY3lcbiAgICAgIGNvbnN0IGJlZHJvY2tBZ3JlZW1lbnQgPSB0aGlzLnByb3ZpZGVyQ29tcGxpYW5jZS5nZXRBZ3JlZW1lbnQoXCJiZWRyb2NrXCIpO1xuICAgICAgaWYgKCFiZWRyb2NrQWdyZWVtZW50IHx8ICFiZWRyb2NrQWdyZWVtZW50LmV1RGF0YVJlc2lkZW5jeSkge1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgIFwiQmVkcm9jayBhZ3JlZW1lbnQgZG9lcyBub3QgZ3VhcmFudGVlIEVVIGRhdGEgcmVzaWRlbmN5XCJcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSB0aGF0IEJlZHJvY2sgaXMgY29uZmlndXJlZCB0byB1c2UgRVUgcmVnaW9uc1xuICAgICAgY29uc3QgZXVSZWdpb25Db25maWd1cmVkID1cbiAgICAgICAgYXdhaXQgdGhpcy52YWxpZGF0ZUJlZHJvY2tFVVJlZ2lvbkNvbmZpZ3VyYXRpb24oKTtcbiAgICAgIGlmICghZXVSZWdpb25Db25maWd1cmVkKSB7XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgICAgXCJCZWRyb2NrIG5vdCBjb25maWd1cmVkIHRvIHVzZSBFVSByZWdpb25zIGZvciBkYXRhIHByb2Nlc3NpbmdcIlxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEVVIGRhdGEgcmVzaWRlbmN5IHZhbGlkYXRpb24gZXJyb3I6ICR7ZXJyb3J9YFxuICAgICAgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgUElJIGRldGVjdGlvbiBjb25maWd1cmF0aW9uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlUElJRGV0ZWN0aW9uQ29uZmlndXJhdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgUElJIGRldGVjdGlvbiBmZWF0dXJlIGZsYWdzIGFyZSBlbmFibGVkXG4gICAgICBjb25zdCBwaWlEZXRlY3Rpb25FbmFibGVkID0gdGhpcy5mZWF0dXJlRmxhZ3MuZ2V0RmxhZyhcbiAgICAgICAgXCJwaWlfZGV0ZWN0aW9uX2VuYWJsZWRcIixcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgICBjb25zdCBwaWlSZWRhY3Rpb25FbmFibGVkID0gdGhpcy5mZWF0dXJlRmxhZ3MuZ2V0RmxhZyhcbiAgICAgICAgXCJwaWlfcmVkYWN0aW9uX2VuYWJsZWRcIixcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG5cbiAgICAgIGlmICghcGlpRGV0ZWN0aW9uRW5hYmxlZCB8fCAhcGlpUmVkYWN0aW9uRW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZGl0aW9uYWwgdmFsaWRhdGlvbiBjb3VsZCBjaGVjayBpZiBQSUkgZGV0ZWN0aW9uIHNlcnZpY2VzIGFyZSBydW5uaW5nXG4gICAgICAvLyBUaGlzIHdvdWxkIGludGVncmF0ZSB3aXRoIGV4aXN0aW5nIFBJSSBkZXRlY3Rpb24gaW5mcmFzdHJ1Y3R1cmVcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYFBJSSBkZXRlY3Rpb24gdmFsaWRhdGlvbiBlcnJvcjogJHtlcnJvcn1gXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBCZWRyb2NrIEVVIHJlZ2lvbiBjb25maWd1cmF0aW9uXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlQmVkcm9ja0VVUmVnaW9uQ29uZmlndXJhdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgQmVkcm9jayBpcyBjb25maWd1cmVkIHRvIHVzZSBFVSByZWdpb25zXG4gICAgICBjb25zdCBiZWRyb2NrUmVnaW9uID1cbiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX0JFRFJPQ0tfUkVHSU9OIHx8IHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgXCJ1cy1lYXN0LTFcIjtcblxuICAgICAgLy8gRVUgcmVnaW9ucyBmb3IgQmVkcm9ja1xuICAgICAgY29uc3QgZXVSZWdpb25zID0gW1xuICAgICAgICBcImV1LWNlbnRyYWwtMVwiLFxuICAgICAgICBcImV1LXdlc3QtMVwiLFxuICAgICAgICBcImV1LXdlc3QtMlwiLFxuICAgICAgICBcImV1LXdlc3QtM1wiLFxuICAgICAgICBcImV1LW5vcnRoLTFcIixcbiAgICAgIF07XG5cbiAgICAgIGlmICghZXVSZWdpb25zLmluY2x1ZGVzKGJlZHJvY2tSZWdpb24pKSB7XG4gICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgICAgYEJlZHJvY2sgcmVnaW9uICR7YmVkcm9ja1JlZ2lvbn0gaXMgbm90IGFuIEVVIHJlZ2lvbmBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBCZWRyb2NrIEVVIHJlZ2lvbiB2YWxpZGF0aW9uIGVycm9yOiAke2Vycm9yfWBcbiAgICAgICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGNvbXBsaWFuY2UgZm9yIHN1cHBvcnQgb3BlcmF0aW9ucyB3aXRoIGh5YnJpZCByb3V0aW5nXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlQ29tcGxpYW5jZUZvclN1cHBvcnRPcGVyYXRpb24oXG4gICAgb3BlcmF0aW9uVHlwZTogSHlicmlkUm91dGluZ1BhdGhbXCJvcGVyYXRpb25UeXBlXCJdLFxuICAgIHJvdXRlVHlwZTogSHlicmlkUm91dGluZ1BhdGhbXCJyb3V0ZVR5cGVcIl0gPSBcImRpcmVjdF9iZWRyb2NrXCIsXG4gICAgcHJpb3JpdHk6IEh5YnJpZFJvdXRpbmdQYXRoW1wicHJpb3JpdHlcIl0gPSBcIm1lZGl1bVwiXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYFZhbGlkYXRpbmcgR0RQUiBjb21wbGlhbmNlIGZvciBzdXBwb3J0IG9wZXJhdGlvbjogJHtvcGVyYXRpb25UeXBlfSB2aWEgJHtyb3V0ZVR5cGV9IHJvdXRlYFxuICAgICAgKTtcblxuICAgICAgLy8gQ3JlYXRlIHJvdXRpbmcgcGF0aCBmb3IgdmFsaWRhdGlvblxuICAgICAgY29uc3Qgcm91dGluZ1BhdGg6IEh5YnJpZFJvdXRpbmdQYXRoID0ge1xuICAgICAgICByb3V0ZVR5cGUsXG4gICAgICAgIHByb3ZpZGVyOiBcImJlZHJvY2tcIixcbiAgICAgICAgb3BlcmF0aW9uVHlwZSxcbiAgICAgICAgcHJpb3JpdHksXG4gICAgICB9O1xuXG4gICAgICAvLyBHZW5lcmF0ZSBjb3JyZWxhdGlvbiBJRCBmb3IgdGhpcyB2YWxpZGF0aW9uXG4gICAgICBjb25zdCBjb3JyZWxhdGlvbklkID0gYHN1cHBvcnQtJHtvcGVyYXRpb25UeXBlfS0ke3JvdXRlVHlwZX0tJHtEYXRlLm5vdygpfWA7XG5cbiAgICAgIC8vIFZhbGlkYXRlIEdEUFIgY29tcGxpYW5jZSBiZWZvcmUgcm91dGluZ1xuICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9XG4gICAgICAgIGF3YWl0IHRoaXMuZ2Rwckh5YnJpZFZhbGlkYXRvci52YWxpZGF0ZUJlZm9yZVJvdXRpbmcoXG4gICAgICAgICAgcm91dGluZ1BhdGgsXG4gICAgICAgICAgY29ycmVsYXRpb25JZFxuICAgICAgICApO1xuXG4gICAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQuYWxsb3dlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodmFsaWRhdGlvblJlc3VsdC5yZWFzb24pO1xuICAgICAgfVxuXG4gICAgICAvLyBBbHNvIHZhbGlkYXRlIHVzaW5nIGV4aXN0aW5nIGNvbXBsaWFuY2UgaW50ZWdyYXRpb24gZm9yIHByb3ZpZGVyIGFncmVlbWVudHNcbiAgICAgIGNvbnN0IG1vY2tSZXF1ZXN0ID0ge1xuICAgICAgICBwcm9tcHQ6IGBTdXBwb3J0IG9wZXJhdGlvbjogJHtvcGVyYXRpb25UeXBlfWAsXG4gICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICBkb21haW46IFwic3VwcG9ydFwiLFxuICAgICAgICAgIGludGVudDogXCJpbmZyYXN0cnVjdHVyZV9zdXBwb3J0XCIsXG4gICAgICAgICAgcm91dGluZ1BhdGg6IHJvdXRlVHlwZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IHRoaXMuY29tcGxpYW5jZUludGVncmF0aW9uLmVuZm9yY2VDb21wbGlhbmNlKFxuICAgICAgICBtb2NrUmVxdWVzdCxcbiAgICAgICAgXCJiZWRyb2NrXCIsXG4gICAgICAgIGNvcnJlbGF0aW9uSWRcbiAgICAgICk7XG5cbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICBgR0RQUiBhbmQgcHJvdmlkZXIgY29tcGxpYW5jZSB2YWxpZGF0aW9uIHBhc3NlZCBmb3Igc3VwcG9ydCBvcGVyYXRpb246ICR7b3BlcmF0aW9uVHlwZX0gdmlhICR7cm91dGVUeXBlfWBcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcblxuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBDb21wbGlhbmNlIHZhbGlkYXRpb24gZmFpbGVkIGZvciBzdXBwb3J0IG9wZXJhdGlvbjogJHtvcGVyYXRpb25UeXBlfSB2aWEgJHtyb3V0ZVR5cGV9IC0gJHtlcnJvck1lc3NhZ2V9YFxuICAgICAgKTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgU3VwcG9ydCBvcGVyYXRpb24gYmxvY2tlZCBkdWUgdG8gY29tcGxpYW5jZSB2aW9sYXRpb246ICR7ZXJyb3JNZXNzYWdlfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBjb21wbGlhbmNlIHJlcG9ydGluZyBmb3Igc3VwcG9ydCBtb2RlXG4gICAqL1xuICBhc3luYyBjcmVhdGVDb21wbGlhbmNlUmVwb3J0Rm9yU3VwcG9ydE1vZGUoKTogUHJvbWlzZTx7XG4gICAgcmVwb3J0SWQ6IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IERhdGU7XG4gICAgc3VwcG9ydE1vZGVDb21wbGlhbmNlOiB7XG4gICAgICBvdmVyYWxsQ29tcGxpYW50OiBib29sZWFuO1xuICAgICAgYmVkcm9ja0NvbXBsaWFudDogYm9vbGVhbjtcbiAgICAgIGdkcHJDb21wbGlhbnQ6IGJvb2xlYW47XG4gICAgICBldURhdGFSZXNpZGVuY3lDb21wbGlhbnQ6IGJvb2xlYW47XG4gICAgfTtcbiAgICBoeWJyaWRSb3V0aW5nQ29tcGxpYW5jZToge1xuICAgICAgbWNwUGF0aENvbXBsaWFudDogYm9vbGVhbjtcbiAgICAgIGRpcmVjdEJlZHJvY2tQYXRoQ29tcGxpYW50OiBib29sZWFuO1xuICAgICAgYXVkaXRUcmFpbENvbXBsZXRlOiBib29sZWFuO1xuICAgIH07XG4gICAgdmlvbGF0aW9uczogc3RyaW5nW107XG4gICAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgXCJHZW5lcmF0aW5nIGNvbXBsaWFuY2UgcmVwb3J0IGZvciBzdXBwb3J0IG1vZGVcIlxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVwb3J0SWQgPSBgYmVkcm9jay1zdXBwb3J0LWNvbXBsaWFuY2UtJHtEYXRlLm5vdygpfWA7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAvLyBHZXQgb3ZlcmFsbCBjb21wbGlhbmNlIHN0YXR1c1xuICAgICAgY29uc3QgY29tcGxpYW5jZVN0YXR1cyA9IGF3YWl0IHRoaXMudmFsaWRhdGVDb21wbGlhbmNlU3RhdHVzKCk7XG5cbiAgICAgIC8vIENoZWNrIEJlZHJvY2stc3BlY2lmaWMgY29tcGxpYW5jZVxuICAgICAgY29uc3QgYmVkcm9ja0NvbXBsaWFuY2UgPVxuICAgICAgICBhd2FpdCB0aGlzLnByb3ZpZGVyQ29tcGxpYW5jZS52ZXJpZnlQcm92aWRlckNvbXBsaWFuY2UoXCJiZWRyb2NrXCIpO1xuXG4gICAgICAvLyBDaGVjayBHRFBSIGNvbXBsaWFuY2VcbiAgICAgIGNvbnN0IGdkcHJDb21wbGlhbnQgPSBhd2FpdCB0aGlzLnZhbGlkYXRlR0RQUkNvbXBsaWFuY2UoKTtcblxuICAgICAgLy8gQ2hlY2sgRVUgZGF0YSByZXNpZGVuY3lcbiAgICAgIGNvbnN0IGV1RGF0YVJlc2lkZW5jeUNvbXBsaWFudCA9XG4gICAgICAgIGF3YWl0IHRoaXMudmFsaWRhdGVFVURhdGFSZXNpZGVuY3lDb21wbGlhbmNlKCk7XG5cbiAgICAgIC8vIEdldCBjb21wbGlhbmNlIHN1bW1hcnkgZm9yIGFsbCBwcm92aWRlcnNcbiAgICAgIGNvbnN0IGNvbXBsaWFuY2VTdW1tYXJ5ID1cbiAgICAgICAgYXdhaXQgdGhpcy5jb21wbGlhbmNlSW50ZWdyYXRpb24uZ2V0Q29tcGxpYW5jZVN1bW1hcnkoKTtcblxuICAgICAgY29uc3QgcmVwb3J0ID0ge1xuICAgICAgICByZXBvcnRJZCxcbiAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICBzdXBwb3J0TW9kZUNvbXBsaWFuY2U6IHtcbiAgICAgICAgICBvdmVyYWxsQ29tcGxpYW50OiBjb21wbGlhbmNlU3RhdHVzLmlzQ29tcGxpYW50LFxuICAgICAgICAgIGJlZHJvY2tDb21wbGlhbnQ6IGJlZHJvY2tDb21wbGlhbmNlLmNvbXBsaWFudCxcbiAgICAgICAgICBnZHByQ29tcGxpYW50LFxuICAgICAgICAgIGV1RGF0YVJlc2lkZW5jeUNvbXBsaWFudCxcbiAgICAgICAgfSxcbiAgICAgICAgaHlicmlkUm91dGluZ0NvbXBsaWFuY2U6IHtcbiAgICAgICAgICBtY3BQYXRoQ29tcGxpYW50OlxuICAgICAgICAgICAgY29tcGxpYW5jZVN1bW1hcnkub3ZlcmFsbENvbXBsaWFuY2UgIT09IFwibm9uX2NvbXBsaWFudFwiLFxuICAgICAgICAgIGRpcmVjdEJlZHJvY2tQYXRoQ29tcGxpYW50OlxuICAgICAgICAgICAgYmVkcm9ja0NvbXBsaWFuY2UuY29tcGxpYW50ICYmIGdkcHJDb21wbGlhbnQsXG4gICAgICAgICAgYXVkaXRUcmFpbENvbXBsZXRlOiB0cnVlLCAvLyBBc3N1bWluZyBhdWRpdCB0cmFpbCBpcyBwcm9wZXJseSBjb25maWd1cmVkXG4gICAgICAgIH0sXG4gICAgICAgIHZpb2xhdGlvbnM6IFtcbiAgICAgICAgICAuLi5jb21wbGlhbmNlU3RhdHVzLnZpb2xhdGlvbnMsXG4gICAgICAgICAgLi4uYmVkcm9ja0NvbXBsaWFuY2UudmlvbGF0aW9ucyxcbiAgICAgICAgXSxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXG4gICAgICAgICAgLi4uY29tcGxpYW5jZVN0YXR1cy5yZWNvbW1lbmRhdGlvbnMsXG4gICAgICAgICAgXCJSZWd1bGFybHkgcmV2aWV3IHByb3ZpZGVyIGFncmVlbWVudHMgZm9yIGNvbXBsaWFuY2UgdXBkYXRlc1wiLFxuICAgICAgICAgIFwiTW9uaXRvciBQSUkgZGV0ZWN0aW9uIGFuZCByZWRhY3Rpb24gZWZmZWN0aXZlbmVzc1wiLFxuICAgICAgICAgIFwiRW5zdXJlIGF1ZGl0IHRyYWlsIGNvbXBsZXRlbmVzcyBmb3IgYWxsIHN1cHBvcnQgb3BlcmF0aW9uc1wiLFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIFwiQ29tcGxpYW5jZSByZXBvcnQgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICB7XG4gICAgICAgICAgcmVwb3J0SWQsXG4gICAgICAgICAgb3ZlcmFsbENvbXBsaWFudDogcmVwb3J0LnN1cHBvcnRNb2RlQ29tcGxpYW5jZS5vdmVyYWxsQ29tcGxpYW50LFxuICAgICAgICAgIHZpb2xhdGlvbnNDb3VudDogcmVwb3J0LnZpb2xhdGlvbnMubGVuZ3RoLFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICByZXR1cm4gcmVwb3J0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG5cbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICBgRmFpbGVkIHRvIGdlbmVyYXRlIGNvbXBsaWFuY2UgcmVwb3J0OiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBsaWFuY2UgcmVwb3J0IGdlbmVyYXRpb24gZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIENpcmN1aXQgQnJlYWtlciBQcm90ZWN0aW9uIGZvciBCb3RoIFJvdXRpbmcgUGF0aHNcbiAgICovXG4gIGFzeW5jIGVuYWJsZUNpcmN1aXRCcmVha2VyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgXCJFbmFibGluZyBjaXJjdWl0IGJyZWFrZXIgcHJvdGVjdGlvbiBmb3IgaHlicmlkIHJvdXRpbmdcIlxuICAgICAgKTtcblxuICAgICAgLy8gVmFsaWRhdGUgY2lyY3VpdCBicmVha2VyIGlzIHByb3Blcmx5IGluaXRpYWxpemVkXG4gICAgICBpZiAoIXRoaXMuY2lyY3VpdEJyZWFrZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2lyY3VpdCBicmVha2VyIG5vdCBpbml0aWFsaXplZFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5hYmxlIGNpcmN1aXQgYnJlYWtlciBmb3IgYWxsIHByb3ZpZGVyc1xuICAgICAgY29uc3QgcHJvdmlkZXJzOiBQcm92aWRlcltdID0gW1wiYmVkcm9ja1wiLCBcImdvb2dsZVwiLCBcIm1ldGFcIl07XG5cbiAgICAgIC8vIFJlc2V0IGFueSBleGlzdGluZyBjaXJjdWl0IGJyZWFrZXIgc3RhdGVzXG4gICAgICBwcm92aWRlcnMuZm9yRWFjaCgocHJvdmlkZXIpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuY2lyY3VpdEJyZWFrZXIuaXNPcGVuKHByb3ZpZGVyKSkge1xuICAgICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgICAgIGBSZXNldHRpbmcgY2lyY3VpdCBicmVha2VyIGZvciBwcm92aWRlcjogJHtwcm92aWRlcn1gXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmNpcmN1aXRCcmVha2VyLmZvcmNlQ2xvc2UocHJvdmlkZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQ29uZmlndXJlIGNpcmN1aXQgYnJlYWtlciB0aHJlc2hvbGRzIGZvciBzdXBwb3J0IG9wZXJhdGlvbnNcbiAgICAgIGNvbnN0IHN1cHBvcnRDb25maWcgPSB7XG4gICAgICAgIGZhaWx1cmVUaHJlc2hvbGQ6IDMsIC8vIE1vcmUgc2Vuc2l0aXZlIGZvciBzdXBwb3J0IG9wZXJhdGlvbnNcbiAgICAgICAgcmVjb3ZlcnlUaW1lb3V0OiAzMDAwMCwgLy8gMzAgc2Vjb25kcyByZWNvdmVyeVxuICAgICAgICBoYWxmT3Blbk1heENhbGxzOiAyLCAvLyBDb25zZXJ2YXRpdmUgdGVzdGluZ1xuICAgICAgICBoZWFsdGhDaGVja0ludGVydmFsOiAxNTAwMCwgLy8gMTUgc2Vjb25kIGhlYWx0aCBjaGVja3NcbiAgICAgIH07XG5cbiAgICAgIC8vIExvZyBjaXJjdWl0IGJyZWFrZXIgY29uZmlndXJhdGlvblxuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBDaXJjdWl0IGJyZWFrZXIgY29uZmlndXJlZCB3aXRoIHRocmVzaG9sZHM6ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgc3VwcG9ydENvbmZpZ1xuICAgICAgICApfWBcbiAgICAgICk7XG5cbiAgICAgIC8vIEVuYWJsZSBjaXJjdWl0IGJyZWFrZXIgbW9uaXRvcmluZyBmb3IgZGlyZWN0IEJlZHJvY2sgcGF0aFxuICAgICAgaWYgKHRoaXMuZGlyZWN0QmVkcm9ja0NsaWVudCkge1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgIFwiQ2lyY3VpdCBicmVha2VyIGVuYWJsZWQgZm9yIGRpcmVjdCBCZWRyb2NrIHBhdGhcIlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBFbmFibGUgY2lyY3VpdCBicmVha2VyIG1vbml0b3JpbmcgZm9yIE1DUCBwYXRoXG4gICAgICBpZiAodGhpcy5tY3BSb3V0ZXIpIHtcbiAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgICBcIkNpcmN1aXQgYnJlYWtlciBlbmFibGVkIGZvciBNQ1Agcm91dGluZyBwYXRoXCJcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RhcnQgaGVhbHRoIG1vbml0b3JpbmcgZm9yIGJvdGggcGF0aHNcbiAgICAgIGlmICh0aGlzLmh5YnJpZEhlYWx0aE1vbml0b3IpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5oeWJyaWRIZWFsdGhNb25pdG9yLnN0YXJ0SGVhbHRoTW9uaXRvcmluZygpO1xuICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgIFwiSGVhbHRoIG1vbml0b3Jpbmcgc3RhcnRlZCBmb3IgaHlicmlkIHJvdXRpbmcgcGF0aHNcIlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2cgYXVkaXQgdHJhaWwgZXZlbnRcbiAgICAgIGF3YWl0IHRoaXMuYXVkaXRUcmFpbC5sb2dTdXBwb3J0TW9kZUV2ZW50KFxuICAgICAgICBcImNpcmN1aXRfYnJlYWtlcl9lbmFibGVkXCIsXG4gICAgICAgIHtcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgY29uZmlndXJhdGlvbjogc3VwcG9ydENvbmZpZyxcbiAgICAgICAgICBlbmFibGVkUGF0aHM6IFtcImRpcmVjdF9iZWRyb2NrXCIsIFwibWNwX3JvdXRlclwiXSxcbiAgICAgICAgICBoZWFsdGhNb25pdG9yaW5nQWN0aXZlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBcInN5c3RlbVwiXG4gICAgICApO1xuXG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgXCJDaXJjdWl0IGJyZWFrZXIgcHJvdGVjdGlvbiBlbmFibGVkIGZvciBib3RoIHJvdXRpbmcgcGF0aHNcIlxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEZhaWxlZCB0byBlbmFibGUgY2lyY3VpdCBicmVha2VyOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuXG4gICAgICAvLyBMb2cgZmFpbHVyZSB0byBhdWRpdCB0cmFpbFxuICAgICAgYXdhaXQgdGhpcy5hdWRpdFRyYWlsLmxvZ1N1cHBvcnRNb2RlRXZlbnQoXG4gICAgICAgIFwiY2lyY3VpdF9icmVha2VyX2VuYWJsZV9mYWlsZWRcIixcbiAgICAgICAge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGNvbnRleHQ6IFwiY2lyY3VpdF9icmVha2VyX2FjdGl2YXRpb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJzeXN0ZW1cIlxuICAgICAgKTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaXJjdWl0IGJyZWFrZXIgYWN0aXZhdGlvbiBmYWlsZWQ6ICR7ZXJyb3JNZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoZWNrU2VjdXJpdHlQb3N0dXJlKCk6IFByb21pc2U8U2VjdXJpdHlBdWRpdFJlc3VsdD4ge1xuICAgIHRoaXMubG9nKFxuICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgIFwiQ2hlY2tpbmcgc2VjdXJpdHkgcG9zdHVyZSBmb3IgaHlicmlkIGFyY2hpdGVjdHVyZVwiXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBTdGFydCBzZWN1cml0eSBwb3N0dXJlIG1vbml0b3JpbmcgaWYgbm90IGFscmVhZHkgYWN0aXZlXG4gICAgICBpZiAoIXRoaXMuc2VjdXJpdHlQb3N0dXJlTW9uaXRvci5pc01vbml0b3JpbmdBY3RpdmUoKSkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlY3VyaXR5UG9zdHVyZU1vbml0b3Iuc3RhcnRNb25pdG9yaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFzc2VzcyBjdXJyZW50IHNlY3VyaXR5IHBvc3R1cmVcbiAgICAgIGNvbnN0IHBvc3R1cmVTdGF0dXMgPVxuICAgICAgICBhd2FpdCB0aGlzLnNlY3VyaXR5UG9zdHVyZU1vbml0b3IuYXNzZXNzU2VjdXJpdHlQb3N0dXJlKCk7XG5cbiAgICAgIC8vIENvbnZlcnQgdG8gU2VjdXJpdHlBdWRpdFJlc3VsdCBmb3JtYXRcbiAgICAgIGNvbnN0IHZ1bG5lcmFiaWxpdGllczogU2VjdXJpdHlWdWxuZXJhYmlsaXR5W10gPSBbXG4gICAgICAgIC4uLnBvc3R1cmVTdGF0dXMucm91dGVzLm1jcC52dWxuZXJhYmlsaXRpZXMsXG4gICAgICAgIC4uLnBvc3R1cmVTdGF0dXMucm91dGVzLmRpcmVjdEJlZHJvY2sudnVsbmVyYWJpbGl0aWVzLFxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtcbiAgICAgICAgLi4ucG9zdHVyZVN0YXR1cy5yZWNvbW1lbmRhdGlvbnMuaW1tZWRpYXRlLm1hcCgocikgPT4gci5kZXNjcmlwdGlvbiksXG4gICAgICAgIC4uLnBvc3R1cmVTdGF0dXMucmVjb21tZW5kYXRpb25zLnNob3J0VGVybS5tYXAoKHIpID0+IHIuZGVzY3JpcHRpb24pLFxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0OiBTZWN1cml0eUF1ZGl0UmVzdWx0ID0ge1xuICAgICAgICBzZWN1cml0eVNjb3JlOiBwb3N0dXJlU3RhdHVzLm92ZXJhbGwuc2VjdXJpdHlTY29yZSxcbiAgICAgICAgdnVsbmVyYWJpbGl0aWVzLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnMsXG4gICAgICAgIGxhc3RBdWRpdDogcG9zdHVyZVN0YXR1cy5vdmVyYWxsLmxhc3RBc3Nlc3NtZW50LFxuICAgICAgfTtcblxuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBTZWN1cml0eSBwb3N0dXJlIGNoZWNrIGNvbXBsZXRlZDogU2NvcmUgJHtyZXN1bHQuc2VjdXJpdHlTY29yZX0sICR7dnVsbmVyYWJpbGl0aWVzLmxlbmd0aH0gdnVsbmVyYWJpbGl0aWVzYFxuICAgICAgKTtcblxuICAgICAgLy8gTG9nIHRvIGF1ZGl0IHRyYWlsXG4gICAgICBhd2FpdCB0aGlzLmF1ZGl0VHJhaWwubG9nU3VwcG9ydE1vZGVFdmVudChcbiAgICAgICAgXCJzZWN1cml0eV9wb3N0dXJlX2NoZWNrZWRcIixcbiAgICAgICAge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBzZWN1cml0eVNjb3JlOiByZXN1bHQuc2VjdXJpdHlTY29yZSxcbiAgICAgICAgICB2dWxuZXJhYmlsaXR5Q291bnQ6IHZ1bG5lcmFiaWxpdGllcy5sZW5ndGgsXG4gICAgICAgICAgdGhyZWF0TGV2ZWw6IHBvc3R1cmVTdGF0dXMub3ZlcmFsbC50aHJlYXRMZXZlbCxcbiAgICAgICAgICBjb21wbGlhbmNlU3RhdHVzOiBwb3N0dXJlU3RhdHVzLm92ZXJhbGwuY29tcGxpYW5jZVN0YXR1cyxcbiAgICAgICAgfSxcbiAgICAgICAgXCJzeXN0ZW1cIlxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYFNlY3VyaXR5IHBvc3R1cmUgY2hlY2sgZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuXG4gICAgICAvLyBMb2cgZmFpbHVyZSB0byBhdWRpdCB0cmFpbFxuICAgICAgYXdhaXQgdGhpcy5hdWRpdFRyYWlsLmxvZ1N1cHBvcnRNb2RlRXZlbnQoXG4gICAgICAgIFwic2VjdXJpdHlfcG9zdHVyZV9jaGVja19mYWlsZWRcIixcbiAgICAgICAge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICB9LFxuICAgICAgICBcInN5c3RlbVwiXG4gICAgICApO1xuXG4gICAgICAvLyBSZXR1cm4gYSBkZWdyYWRlZCBzZWN1cml0eSByZXN1bHRcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlY3VyaXR5U2NvcmU6IDAsXG4gICAgICAgIHZ1bG5lcmFiaWxpdGllczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiBcInNlY3VyaXR5LWNoZWNrLWZhaWx1cmVcIixcbiAgICAgICAgICAgIHNldmVyaXR5OiBcImNyaXRpY2FsXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYFNlY3VyaXR5IHBvc3R1cmUgY2hlY2sgZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gLFxuICAgICAgICAgICAgY29tcG9uZW50OiBcInNlY3VyaXR5LXBvc3R1cmUtbW9uaXRvclwiLFxuICAgICAgICAgICAgcmVtZWRpYXRpb246IFwiSW52ZXN0aWdhdGUgYW5kIGZpeCBzZWN1cml0eSBtb25pdG9yaW5nIHN5c3RlbVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogW1xuICAgICAgICAgIFwiRml4IHNlY3VyaXR5IHBvc3R1cmUgbW9uaXRvcmluZyBzeXN0ZW1cIixcbiAgICAgICAgICBcIkludmVzdGlnYXRlIHNlY3VyaXR5IGNoZWNrIGZhaWx1cmVcIixcbiAgICAgICAgICBcIk1hbnVhbCBzZWN1cml0eSBhdWRpdCByZXF1aXJlZFwiLFxuICAgICAgICBdLFxuICAgICAgICBsYXN0QXVkaXQ6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBDaXJjdWl0IEJyZWFrZXIgU3RhdHVzIGZvciBCb3RoIFJvdXRpbmcgUGF0aHNcbiAgICovXG4gIGFzeW5jIGdldENpcmN1aXRCcmVha2VyU3RhdHVzKCk6IFByb21pc2U8e1xuICAgIGRpcmVjdEJlZHJvY2s6IHsgaXNPcGVuOiBib29sZWFuOyBzdGF0ZTogc3RyaW5nOyBtZXRyaWNzOiBhbnkgfTtcbiAgICBtY3BSb3V0ZXI6IHsgaXNPcGVuOiBib29sZWFuOyBzdGF0ZTogc3RyaW5nOyBtZXRyaWNzOiBhbnkgfTtcbiAgICBvdmVyYWxsSGVhbHRoOiBcImhlYWx0aHlcIiB8IFwiZGVncmFkZWRcIiB8IFwiY3JpdGljYWxcIjtcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBkaXJlY3QgQmVkcm9jayBjaXJjdWl0IGJyZWFrZXJcbiAgICAgIGNvbnN0IGRpcmVjdEJlZHJvY2tPcGVuID0gdGhpcy5jaXJjdWl0QnJlYWtlci5pc09wZW4oXCJiZWRyb2NrXCIpO1xuICAgICAgY29uc3QgZGlyZWN0QmVkcm9ja01ldHJpY3MgPSB0aGlzLmNpcmN1aXRCcmVha2VyLmdldE1ldHJpY3MoXCJiZWRyb2NrXCIpO1xuXG4gICAgICAvLyBDaGVjayBNQ1Agcm91dGVyIGNpcmN1aXQgYnJlYWtlciAodXNpbmcgXCJnb29nbGVcIiBhcyBNQ1AgcHJvdmlkZXIgcHJveHkpXG4gICAgICBjb25zdCBtY3BSb3V0ZXJPcGVuID0gdGhpcy5jaXJjdWl0QnJlYWtlci5pc09wZW4oXCJnb29nbGVcIik7XG4gICAgICBjb25zdCBtY3BSb3V0ZXJNZXRyaWNzID0gdGhpcy5jaXJjdWl0QnJlYWtlci5nZXRNZXRyaWNzKFwiZ29vZ2xlXCIpO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgb3ZlcmFsbCBoZWFsdGhcbiAgICAgIGxldCBvdmVyYWxsSGVhbHRoOiBcImhlYWx0aHlcIiB8IFwiZGVncmFkZWRcIiB8IFwiY3JpdGljYWxcIiA9IFwiaGVhbHRoeVwiO1xuXG4gICAgICBpZiAoZGlyZWN0QmVkcm9ja09wZW4gJiYgbWNwUm91dGVyT3Blbikge1xuICAgICAgICBvdmVyYWxsSGVhbHRoID0gXCJjcml0aWNhbFwiOyAvLyBCb3RoIHBhdGhzIGRvd25cbiAgICAgIH0gZWxzZSBpZiAoZGlyZWN0QmVkcm9ja09wZW4gfHwgbWNwUm91dGVyT3Blbikge1xuICAgICAgICBvdmVyYWxsSGVhbHRoID0gXCJkZWdyYWRlZFwiOyAvLyBPbmUgcGF0aCBkb3duXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXR1cyA9IHtcbiAgICAgICAgZGlyZWN0QmVkcm9jazoge1xuICAgICAgICAgIGlzT3BlbjogZGlyZWN0QmVkcm9ja09wZW4sXG4gICAgICAgICAgc3RhdGU6IGRpcmVjdEJlZHJvY2tNZXRyaWNzLnN0YXRlLFxuICAgICAgICAgIG1ldHJpY3M6IGRpcmVjdEJlZHJvY2tNZXRyaWNzLFxuICAgICAgICB9LFxuICAgICAgICBtY3BSb3V0ZXI6IHtcbiAgICAgICAgICBpc09wZW46IG1jcFJvdXRlck9wZW4sXG4gICAgICAgICAgc3RhdGU6IG1jcFJvdXRlck1ldHJpY3Muc3RhdGUsXG4gICAgICAgICAgbWV0cmljczogbWNwUm91dGVyTWV0cmljcyxcbiAgICAgICAgfSxcbiAgICAgICAgb3ZlcmFsbEhlYWx0aCxcbiAgICAgIH07XG5cbiAgICAgIC8vIExvZyBzdGF0dXMgY2hlY2sgdG8gYXVkaXQgdHJhaWxcbiAgICAgIGF3YWl0IHRoaXMuYXVkaXRUcmFpbC5sb2dTdXBwb3J0TW9kZUV2ZW50KFxuICAgICAgICBcImNpcmN1aXRfYnJlYWtlcl9zdGF0dXNfY2hlY2tcIixcbiAgICAgICAge1xuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgb3ZlcmFsbEhlYWx0aCxcbiAgICAgICAgfSxcbiAgICAgICAgXCJzeXN0ZW1cIlxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEZhaWxlZCB0byBjaGVjayBjaXJjdWl0IGJyZWFrZXIgc3RhdHVzOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENpcmN1aXQgYnJlYWtlciBzdGF0dXMgY2hlY2sgZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIENpcmN1aXQgQnJlYWtlciBGYWlsdXJlcyB3aXRoIEludGVsbGlnZW50IEZhbGxiYWNrXG4gICAqL1xuICBhc3luYyBoYW5kbGVDaXJjdWl0QnJlYWtlckZhaWx1cmUoXG4gICAgZmFpbGVkUGF0aDogXCJkaXJlY3RcIiB8IFwibWNwXCIsXG4gICAgb3BlcmF0aW9uOiBzdHJpbmcsXG4gICAgY29udGV4dDogYW55XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEhhbmRsaW5nIGNpcmN1aXQgYnJlYWtlciBmYWlsdXJlIGZvciAke2ZhaWxlZFBhdGh9IHBhdGggZHVyaW5nICR7b3BlcmF0aW9ufWBcbiAgICAgICk7XG5cbiAgICAgIC8vIExvZyBmYWlsdXJlIGV2ZW50XG4gICAgICBhd2FpdCB0aGlzLmF1ZGl0VHJhaWwubG9nU3VwcG9ydE1vZGVFdmVudChcbiAgICAgICAgXCJjaXJjdWl0X2JyZWFrZXJfZmFpbHVyZVwiLFxuICAgICAgICB7XG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGZhaWxlZFBhdGgsXG4gICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgIH0sXG4gICAgICAgIFwic3lzdGVtXCJcbiAgICAgICk7XG5cbiAgICAgIC8vIEF0dGVtcHQgaW50ZWxsaWdlbnQgZmFsbGJhY2sgdGhyb3VnaCByb3V0ZXJcbiAgICAgIGlmICh0aGlzLmludGVsbGlnZW50Um91dGVyKSB7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrUm91dGUgPSBmYWlsZWRQYXRoID09PSBcImRpcmVjdFwiID8gXCJtY3BcIiA6IFwiZGlyZWN0XCI7XG5cbiAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgICBgQXR0ZW1wdGluZyBmYWxsYmFjayB0byAke2ZhbGxiYWNrUm91dGV9IHBhdGhgXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZmFsbGJhY2sgcGF0aCBpcyBhdmFpbGFibGVcbiAgICAgICAgY29uc3QgZmFsbGJhY2tQcm92aWRlciA9XG4gICAgICAgICAgZmFsbGJhY2tSb3V0ZSA9PT0gXCJkaXJlY3RcIiA/IFwiYmVkcm9ja1wiIDogXCJnb29nbGVcIjtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tBdmFpbGFibGUgPSAhdGhpcy5jaXJjdWl0QnJlYWtlci5pc09wZW4oZmFsbGJhY2tQcm92aWRlcik7XG5cbiAgICAgICAgaWYgKGZhbGxiYWNrQXZhaWxhYmxlKSB7XG4gICAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgICAgYEZhbGxiYWNrIHRvICR7ZmFsbGJhY2tSb3V0ZX0gcGF0aCBpcyBhdmFpbGFibGVgXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgICAgICBgRmFsbGJhY2sgdG8gJHtmYWxsYmFja1JvdXRlfSBwYXRoIGlzIGFsc28gdW5hdmFpbGFibGUgLSBib3RoIHBhdGhzIGRvd25gXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIEJvdGggcGF0aHMgZG93biAtIHRyaWdnZXIgZW1lcmdlbmN5IHByb2NlZHVyZXNcbiAgICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJFbWVyZ2VuY3lQcm9jZWR1cmVzKG9wZXJhdGlvbiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGhlYWx0aCBtb25pdG9yaW5nXG4gICAgICBpZiAodGhpcy5oeWJyaWRIZWFsdGhNb25pdG9yKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaHlicmlkSGVhbHRoTW9uaXRvci5yZWNvcmRGYWlsdXJlKGZhaWxlZFBhdGgsIG9wZXJhdGlvbik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcblxuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBGYWlsZWQgdG8gaGFuZGxlIGNpcmN1aXQgYnJlYWtlciBmYWlsdXJlOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDaXJjdWl0IGJyZWFrZXIgZmFpbHVyZSBoYW5kbGluZyBmYWlsZWQ6ICR7ZXJyb3JNZXNzYWdlfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgRW1lcmdlbmN5IFByb2NlZHVyZXMgd2hlbiBCb3RoIFBhdGhzIGFyZSBEb3duXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHRyaWdnZXJFbWVyZ2VuY3lQcm9jZWR1cmVzKFxuICAgIG9wZXJhdGlvbjogc3RyaW5nLFxuICAgIGNvbnRleHQ6IGFueVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBUcmlnZ2VyaW5nIGVtZXJnZW5jeSBwcm9jZWR1cmVzIGZvciBvcGVyYXRpb246ICR7b3BlcmF0aW9ufWBcbiAgICAgICk7XG5cbiAgICAgIC8vIExvZyBlbWVyZ2VuY3kgZXZlbnRcbiAgICAgIGF3YWl0IHRoaXMuYXVkaXRUcmFpbC5sb2dTdXBwb3J0TW9kZUV2ZW50KFxuICAgICAgICBcImVtZXJnZW5jeV9wcm9jZWR1cmVzX3RyaWdnZXJlZFwiLFxuICAgICAgICB7XG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgIHJlYXNvbjogXCJib3RoX3JvdXRpbmdfcGF0aHNfdW5hdmFpbGFibGVcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJzeXN0ZW1cIlxuICAgICAgKTtcblxuICAgICAgLy8gRGlzYWJsZSBzdXBwb3J0IG1vZGUgdGVtcG9yYXJpbHlcbiAgICAgIHRoaXMuaXNBY3RpdmF0ZWQgPSBmYWxzZTtcblxuICAgICAgLy8gU2VuZCBlbWVyZ2VuY3kgbm90aWZpY2F0aW9uc1xuICAgICAgYXdhaXQgdGhpcy5zZW5kRW1lcmdlbmN5Tm90aWZpY2F0aW9ucyhvcGVyYXRpb24sIGNvbnRleHQpO1xuXG4gICAgICAvLyBGb3JjZSByZXNldCBjaXJjdWl0IGJyZWFrZXJzIGFmdGVyIGVtZXJnZW5jeSB0aW1lb3V0XG4gICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgICAgICBcIkF0dGVtcHRpbmcgZW1lcmdlbmN5IGNpcmN1aXQgYnJlYWtlciByZXNldFwiXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHRoaXMuY2lyY3VpdEJyZWFrZXIucmVzZXRBbGwoKTtcblxuICAgICAgICAgIC8vIFJlLWVuYWJsZSBzdXBwb3J0IG1vZGUgaWYgZmVhdHVyZSBmbGFnIGlzIHN0aWxsIGFjdGl2ZVxuICAgICAgICAgIGNvbnN0IHN1cHBvcnRNb2RlRW5hYmxlZCA9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZlYXR1cmVGbGFncy5pc0JlZHJvY2tTdXBwb3J0TW9kZUVuYWJsZWQoKTtcbiAgICAgICAgICBpZiAoc3VwcG9ydE1vZGVFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzQWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICAgICAgICBcIlN1cHBvcnQgbW9kZSByZS1lbmFibGVkIGFmdGVyIGVtZXJnZW5jeSByZXNldFwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAocmVzZXRFcnJvcikge1xuICAgICAgICAgIHRoaXMubG9nKFxuICAgICAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgICAgIGBFbWVyZ2VuY3kgcmVzZXQgZmFpbGVkOiAke3Jlc2V0RXJyb3J9YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0sIDYwMDAwKTsgLy8gMSBtaW51dGUgZW1lcmdlbmN5IHRpbWVvdXRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuXG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEZhaWxlZCB0byB0cmlnZ2VyIGVtZXJnZW5jeSBwcm9jZWR1cmVzOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIEVtZXJnZW5jeSBOb3RpZmljYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNlbmRFbWVyZ2VuY3lOb3RpZmljYXRpb25zKFxuICAgIG9wZXJhdGlvbjogc3RyaW5nLFxuICAgIGNvbnRleHQ6IGFueVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gU2VuZCBub3RpZmljYXRpb25zIHRocm91Z2ggY29uZmlndXJlZCBjaGFubmVsc1xuICAgICAgZm9yIChjb25zdCBjaGFubmVsIG9mIHRoaXMuY29uZmlnLm5vdGlmaWNhdGlvbkNoYW5uZWxzKSB7XG4gICAgICAgIGlmIChjaGFubmVsLmVuYWJsZWQpIHtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYEVNRVJHRU5DWTogQmVkcm9jayBTdXBwb3J0IE1vZGUgLSBCb3RoIHJvdXRpbmcgcGF0aHMgdW5hdmFpbGFibGUgZHVyaW5nICR7b3BlcmF0aW9ufWA7XG5cbiAgICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgICAgICBgU2VuZGluZyBlbWVyZ2VuY3kgbm90aWZpY2F0aW9uIHZpYSAke2NoYW5uZWwudHlwZX06ICR7bWVzc2FnZX1gXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIEluIHByb2R1Y3Rpb24sIHRoaXMgd291bGQgc2VuZCBhY3R1YWwgbm90aWZpY2F0aW9uc1xuICAgICAgICAgIC8vIEZvciBub3csIGp1c3QgbG9nIHRoZSBub3RpZmljYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYEZhaWxlZCB0byBzZW5kIGVtZXJnZW5jeSBub3RpZmljYXRpb25zOiAke2Vycm9yfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29zdCAmIFBlcmZvcm1hbmNlIE1ldGhvZHMgKHVzaW5nIGV4aXN0aW5nIENvc3RQZXJmb3JtYW5jZU9wdGltaXplcilcbiAgYXN5bmMgbW9uaXRvckNvc3RUaHJlc2hvbGRzKCk6IFByb21pc2U8Q29zdEFuYWx5c2lzPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBjb3N0IHN1bW1hcnkgZnJvbSBleGlzdGluZyBvcHRpbWl6ZXJcbiAgICAgIGNvbnN0IGNvc3RTdW1tYXJ5ID0gdGhpcy5jb3N0UGVyZm9ybWFuY2VPcHRpbWl6ZXIuZ2V0Q29zdFN1bW1hcnkoKTtcbiAgICAgIGNvbnN0IHBlcmZvcm1hbmNlTWV0cmljcyA9XG4gICAgICAgIHRoaXMuY29zdFBlcmZvcm1hbmNlT3B0aW1pemVyLmdldFBlcmZvcm1hbmNlTWV0cmljcygpO1xuXG4gICAgICAvLyBMb2cgY29zdCBtb25pdG9yaW5nIGV2ZW50XG4gICAgICBhd2FpdCB0aGlzLmF1ZGl0VHJhaWwubG9nRXZlbnQoe1xuICAgICAgICBldmVudFR5cGU6IFwiY29zdF9tb25pdG9yaW5nXCIsXG4gICAgICAgIHVzZXJJZDogXCJzeXN0ZW1cIixcbiAgICAgICAgYWN0aW9uOiBcIm1vbml0b3JfY29zdF90aHJlc2hvbGRzXCIsXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJjb3N0X3BlcmZvcm1hbmNlXCIsXG4gICAgICAgIHJlc291cmNlSWQ6IFwiYmVkcm9jay1zdXBwb3J0LW1vZGVcIixcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBkYWlseVNwZW50OiBjb3N0U3VtbWFyeS5kYWlseS5zcGVudCxcbiAgICAgICAgICBtb250aGx5U3BlbnQ6IGNvc3RTdW1tYXJ5Lm1vbnRobHkuc3BlbnQsXG4gICAgICAgICAgZGFpbHlSZW1haW5pbmc6IGNvc3RTdW1tYXJ5LmRhaWx5LnJlbWFpbmluZyxcbiAgICAgICAgICBtb250aGx5UmVtYWluaW5nOiBjb3N0U3VtbWFyeS5tb250aGx5LnJlbWFpbmluZyxcbiAgICAgICAgICBjYWNoZUhpdFJhdGU6IHBlcmZvcm1hbmNlTWV0cmljcy5jYWNoZUhpdFJhdGUsXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgaXBBZGRyZXNzOiBcImludGVybmFsXCIsXG4gICAgICAgIHVzZXJBZ2VudDogXCJiZWRyb2NrLXN1cHBvcnQtbWFuYWdlclwiLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBlbWVyZ2VuY3kgc2h1dGRvd24gY29uZGl0aW9uc1xuICAgICAgY29uc3QgY29zdFByZXNzdXJlID1cbiAgICAgICAgY29zdFN1bW1hcnkubW9udGhseS5zcGVudCAvIGNvc3RTdW1tYXJ5Lm1vbnRobHkubGltaXQ7XG4gICAgICBpZiAoY29zdFByZXNzdXJlID4gMC45NSkge1xuICAgICAgICBhd2FpdCB0aGlzLmVtZXJnZW5jeVNodXRkb3duTWFuYWdlci50cmlnZ2VyU2h1dGRvd24oXG4gICAgICAgICAgXCJhbGxcIixcbiAgICAgICAgICBcImNvc3Rfb3ZlcnJ1blwiLFxuICAgICAgICAgIFwibWFudWFsXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29zdEV1cm86IGNvc3RTdW1tYXJ5Lm1vbnRobHkuc3BlbnQsXG4gICAgICAgICAgICBhZGRpdGlvbmFsSW5mbzoge1xuICAgICAgICAgICAgICBkYWlseVNwZW50OiBjb3N0U3VtbWFyeS5kYWlseS5zcGVudCxcbiAgICAgICAgICAgICAgbW9udGhseUxpbWl0OiBjb3N0U3VtbWFyeS5tb250aGx5LmxpbWl0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiBjb3N0IGFuYWx5c2lzIGluIGV4cGVjdGVkIGZvcm1hdFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3VycmVudFNwZW5kOiBjb3N0U3VtbWFyeS5tb250aGx5LnNwZW50LFxuICAgICAgICBwcm9qZWN0ZWRTcGVuZDogY29zdFN1bW1hcnkubW9udGhseS5zcGVudCAqICgzMCAvIG5ldyBEYXRlKCkuZ2V0RGF0ZSgpKSwgLy8gU2ltcGxlIHByb2plY3Rpb25cbiAgICAgICAgYnVkZ2V0VXRpbGl6YXRpb246IGNvc3RQcmVzc3VyZSxcbiAgICAgICAgY29zdEJyZWFrZG93bjoge1xuICAgICAgICAgIGRhaWx5OiBjb3N0U3VtbWFyeS5kYWlseS5zcGVudCxcbiAgICAgICAgICBtb250aGx5OiBjb3N0U3VtbWFyeS5tb250aGx5LnNwZW50LFxuICAgICAgICAgIGNhY2hlSGl0UmF0ZTogcGVyZm9ybWFuY2VNZXRyaWNzLmNhY2hlSGl0UmF0ZSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiB0aGlzLmdlbmVyYXRlQ29zdFJlY29tbWVuZGF0aW9ucyhcbiAgICAgICAgICBjb3N0U3VtbWFyeSxcbiAgICAgICAgICBwZXJmb3JtYW5jZU1ldHJpY3NcbiAgICAgICAgKSxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBcImJlZHJvY2stYWN0aXZhdGlvblwiLFxuICAgICAgICBgRXJyb3IgbW9uaXRvcmluZyBjb3N0IHRocmVzaG9sZHM6ICR7ZXJyb3J9YFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3VycmVudFNwZW5kOiAwLFxuICAgICAgICBwcm9qZWN0ZWRTcGVuZDogMCxcbiAgICAgICAgYnVkZ2V0VXRpbGl6YXRpb246IDAsXG4gICAgICAgIGNvc3RCcmVha2Rvd246IHt9LFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICBcIkVycm9yIHJldHJpZXZpbmcgY29zdCBkYXRhIC0gcGxlYXNlIGNoZWNrIGNvc3QgbW9uaXRvcmluZyBzeXN0ZW1cIixcbiAgICAgICAgXSxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNvc3Qgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNvc3RSZWNvbW1lbmRhdGlvbnMoXG4gICAgY29zdFN1bW1hcnk6IGFueSxcbiAgICBwZXJmb3JtYW5jZU1ldHJpY3M6IGFueVxuICApOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgY2FjaGUgaGl0IHJhdGVcbiAgICBpZiAocGVyZm9ybWFuY2VNZXRyaWNzLmNhY2hlSGl0UmF0ZSA8IDAuNSkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgIFwiSW1wcm92ZSBjYWNoZSBoaXQgcmF0ZSB0byByZWR1Y2UgQUkgcHJvdmlkZXIgY29zdHNcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBkYWlseSBidWRnZXQgdXRpbGl6YXRpb25cbiAgICBjb25zdCBkYWlseVV0aWxpemF0aW9uID0gY29zdFN1bW1hcnkuZGFpbHkuc3BlbnQgLyBjb3N0U3VtbWFyeS5kYWlseS5saW1pdDtcbiAgICBpZiAoZGFpbHlVdGlsaXphdGlvbiA+IDAuOCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgIFwiRGFpbHkgYnVkZ2V0IHV0aWxpemF0aW9uIGhpZ2ggLSBjb25zaWRlciBpbXBsZW1lbnRpbmcgY29zdCBvcHRpbWl6YXRpb24gc3RyYXRlZ2llc1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIG1vbnRobHkgYnVkZ2V0IHV0aWxpemF0aW9uXG4gICAgY29uc3QgbW9udGhseVV0aWxpemF0aW9uID1cbiAgICAgIGNvc3RTdW1tYXJ5Lm1vbnRobHkuc3BlbnQgLyBjb3N0U3VtbWFyeS5tb250aGx5LmxpbWl0O1xuICAgIGlmIChtb250aGx5VXRpbGl6YXRpb24gPiAwLjc1KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgXCJNb250aGx5IGJ1ZGdldCBvbiB0cmFjayB0byBleGNlZWQgLSByZXZpZXcgb3BlcmF0aW9uIHByaW9yaXRpZXNcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBkZXRhaWxlZCBjb3N0IGFuZCBwZXJmb3JtYW5jZSBzdGF0dXNcbiAgICovXG4gIGFzeW5jIGdldENvc3RQZXJmb3JtYW5jZVN0YXR1cygpIHtcbiAgICBjb25zdCBjb3N0U3VtbWFyeSA9IHRoaXMuY29zdFBlcmZvcm1hbmNlT3B0aW1pemVyLmdldENvc3RTdW1tYXJ5KCk7XG4gICAgY29uc3QgcGVyZm9ybWFuY2VNZXRyaWNzID1cbiAgICAgIHRoaXMuY29zdFBlcmZvcm1hbmNlT3B0aW1pemVyLmdldFBlcmZvcm1hbmNlTWV0cmljcygpO1xuICAgIGNvbnN0IHNodXRkb3duU3RhdHVzID0gdGhpcy5lbWVyZ2VuY3lTaHV0ZG93bk1hbmFnZXIuZ2V0U3RhdHVzKCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgY29zdDogY29zdFN1bW1hcnksXG4gICAgICBwZXJmb3JtYW5jZTogcGVyZm9ybWFuY2VNZXRyaWNzLFxuICAgICAgZW1lcmdlbmN5U2h1dGRvd246IHNodXRkb3duU3RhdHVzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVHJhY2sgY29zdCBmb3IgYSBzdXBwb3J0IG9wZXJhdGlvbiAoc3R1YiBmb3IgY29tcGF0aWJpbGl0eSlcbiAgICovXG4gIGFzeW5jIHRyYWNrU3VwcG9ydE9wZXJhdGlvbkNvc3QoXG4gICAgb3BlcmF0aW9uSWQ6IHN0cmluZyxcbiAgICByb3V0ZTogXCJkaXJlY3RcIiB8IFwibWNwXCIgfCBcImZhbGxiYWNrXCIgfCBcImh5YnJpZFwiLFxuICAgIG9wZXJhdGlvblR5cGU6XG4gICAgICB8IFwiZW1lcmdlbmN5XCJcbiAgICAgIHwgXCJpbmZyYXN0cnVjdHVyZVwiXG4gICAgICB8IFwibWV0YV9tb25pdG9yXCJcbiAgICAgIHwgXCJpbXBsZW1lbnRhdGlvblwiXG4gICAgICB8IFwic3RhbmRhcmRcIixcbiAgICBjb3N0OiBudW1iZXIsXG4gICAgdG9rZW5zVXNlZD86IHsgaW5wdXQ6IG51bWJlcjsgb3V0cHV0OiBudW1iZXIgfVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmNvc3RCdWRnZXRNb25pdG9yLnRyYWNrT3BlcmF0aW9uQ29zdCh7XG4gICAgICBvcGVyYXRpb25JZCxcbiAgICAgIHJvdXRlLFxuICAgICAgb3BlcmF0aW9uVHlwZSxcbiAgICAgIGNvc3QsXG4gICAgICB0b2tlbnNVc2VkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgc3VwcG9ydE1vZGU6IHRydWUsXG4gICAgICAgIGJlZHJvY2tBY3RpdmF0aW9uOiB0aGlzLmlzQWN0aXZhdGVkLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIG9wdGltaXplUGVyZm9ybWFuY2UoKTogUHJvbWlzZTxQZXJmb3JtYW5jZU9wdGltaXphdGlvbj4ge1xuICAgIHJldHVybiB7XG4gICAgICBjdXJyZW50TWV0cmljczoge1xuICAgICAgICByZXNwb25zZVRpbWU6IDAsXG4gICAgICAgIG1lbW9yeVVzYWdlOiAwLFxuICAgICAgICBjcHVVc2FnZTogMCxcbiAgICAgICAgbmV0d29ya0xhdGVuY3k6IDAsXG4gICAgICB9LFxuICAgICAgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllczogW10sXG4gICAgICBleHBlY3RlZEltcHJvdmVtZW50czoge30sXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGVuYWJsZUVtZXJnZW5jeU1vZGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5sb2coXCJiZWRyb2NrLWFjdGl2YXRpb25cIiwgXCJFbWVyZ2VuY3kgbW9kZSBlbmFibGVkXCIpO1xuICB9XG5cbiAgLy8gVGVtcGxhdGUgJiBQcm9tcHQgTWV0aG9kcyAoU3R1YnMgZm9yIG5vdylcbiAgYXN5bmMgdmFsaWRhdGVQcm9tcHRUZW1wbGF0ZXMoKTogUHJvbWlzZTxUZW1wbGF0ZVZhbGlkYXRpb25SZXN1bHQ+IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgIGVycm9yczogW10sXG4gICAgICB3YXJuaW5nczogW10sXG4gICAgICB0ZW1wbGF0ZUNvdW50OiAwLFxuICAgIH07XG4gIH1cblxuICBhc3luYyBlbmFibGVQSUlSZWRhY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5sb2coXCJiZWRyb2NrLWFjdGl2YXRpb25cIiwgXCJQSUkgcmVkYWN0aW9uIGVuYWJsZWRcIik7XG4gIH1cblxuICAvKipcbiAgICogUnVuIGNvbXByZWhlbnNpdmUgcmVkIHRlYW0gc2VjdXJpdHkgZXZhbHVhdGlvbnMgZm9yIGRpcmVjdCBCZWRyb2NrXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGV4ZWN1dGVzIGF1dG9tYXRlZCBzZWN1cml0eSB0ZXN0aW5nIGluY2x1ZGluZzpcbiAgICogLSBQcm9tcHQgaW5qZWN0aW9uIGRldGVjdGlvblxuICAgKiAtIEphaWxicmVhayBhdHRlbXB0IGRldGVjdGlvblxuICAgKiAtIERhdGEgZXhmaWx0cmF0aW9uIHByZXZlbnRpb25cbiAgICogLSBQcml2aWxlZ2UgZXNjYWxhdGlvbiBwcmV2ZW50aW9uXG4gICAqIC0gRGVuaWFsIG9mIHNlcnZpY2UgcHJvdGVjdGlvblxuICAgKi9cbiAgYXN5bmMgcnVuUmVkVGVhbUV2YWx1YXRpb25zKCk6IFByb21pc2U8U2VjdXJpdHlUZXN0UmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9nKFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsIFwiU3RhcnRpbmcgcmVkIHRlYW0gc2VjdXJpdHkgZXZhbHVhdGlvblwiKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgcmVkIHRlYW0gZXZhbHVhdGlvbnMgYXJlIGVuYWJsZWRcbiAgICAgIGlmICghdGhpcy5mZWF0dXJlRmxhZ3MuaXNFbmFibGVkKFwicmVkX3RlYW1fZXZhbHVhdGlvbl9lbmFibGVkXCIsIHRydWUpKSB7XG4gICAgICAgIHRoaXMubG9nKFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsIFwiUmVkIHRlYW0gZXZhbHVhdGlvbnMgYXJlIGRpc2FibGVkXCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBhc3NlZDogdHJ1ZSxcbiAgICAgICAgICB0ZXN0UmVzdWx0czogW10sXG4gICAgICAgICAgb3ZlcmFsbFNjb3JlOiAxMDAsXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXG4gICAgICAgICAgICBcIlJlZCB0ZWFtIGV2YWx1YXRpb25zIGFyZSBkaXNhYmxlZCAtIGVuYWJsZSBmb3Igc2VjdXJpdHkgdGVzdGluZ1wiLFxuICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEluaXRpYWxpemUgcmVkIHRlYW0gZXZhbHVhdG9yIHdpdGggZGlyZWN0IEJlZHJvY2sgY2xpZW50XG4gICAgICBjb25zdCBldmFsdWF0b3IgPSBuZXcgUmVkVGVhbUV2YWx1YXRvcih0aGlzLmRpcmVjdEJlZHJvY2tDbGllbnQsIHtcbiAgICAgICAgZW5hYmxlUHJvbXB0SW5qZWN0aW9uVGVzdHM6IHRydWUsXG4gICAgICAgIGVuYWJsZUphaWxicmVha1Rlc3RzOiB0cnVlLFxuICAgICAgICBlbmFibGVEYXRhRXhmaWx0cmF0aW9uVGVzdHM6IHRydWUsXG4gICAgICAgIGVuYWJsZVByaXZpbGVnZUVzY2FsYXRpb25UZXN0czogdHJ1ZSxcbiAgICAgICAgZW5hYmxlRGVuaWFsT2ZTZXJ2aWNlVGVzdHM6IHRydWUsXG4gICAgICAgIHRlc3REZXB0aDogXCJzdGFuZGFyZFwiLFxuICAgICAgICBtYXhUZXN0c1BlckNhdGVnb3J5OiA1LFxuICAgICAgICB0aW1lb3V0TXM6IDMwMDAwLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJ1biBjb21wcmVoZW5zaXZlIGV2YWx1YXRpb25cbiAgICAgIGNvbnN0IHJlcG9ydDogUmVkVGVhbUV2YWx1YXRpb25SZXBvcnQgPSBhd2FpdCBldmFsdWF0b3IucnVuRXZhbHVhdGlvbigpO1xuXG4gICAgICAvLyBMb2cgZXZhbHVhdGlvbiByZXN1bHRzXG4gICAgICBhd2FpdCB0aGlzLmF1ZGl0VHJhaWwubG9nRXZlbnQoe1xuICAgICAgICBldmVudFR5cGU6IFwicmVkX3RlYW1fZXZhbHVhdGlvblwiLFxuICAgICAgICByZXF1ZXN0SWQ6IHJlcG9ydC5ldmFsdWF0aW9uSWQsXG4gICAgICAgIHByb3ZpZGVyOiBcImJlZHJvY2tcIixcbiAgICAgICAgY29tcGxpYW5jZVN0YXR1czpcbiAgICAgICAgICByZXBvcnQudnVsbmVyYWJpbGl0aWVzRGV0ZWN0ZWQgPiAwID8gXCJ2aW9sYXRpb25cIiA6IFwiY29tcGxpYW50XCIsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgdG90YWxUZXN0czogcmVwb3J0LnRvdGFsVGVzdHMsXG4gICAgICAgICAgdGVzdHNQYXNzZWQ6IHJlcG9ydC50ZXN0c1Bhc3NlZCxcbiAgICAgICAgICB0ZXN0c0ZhaWxlZDogcmVwb3J0LnRlc3RzRmFpbGVkLFxuICAgICAgICAgIHZ1bG5lcmFiaWxpdGllc0RldGVjdGVkOiByZXBvcnQudnVsbmVyYWJpbGl0aWVzRGV0ZWN0ZWQsXG4gICAgICAgICAgc2VjdXJpdHlTY29yZTogcmVwb3J0Lm92ZXJhbGxTZWN1cml0eVNjb3JlLFxuICAgICAgICAgIGNyaXRpY2FsVnVsbmVyYWJpbGl0aWVzOiByZXBvcnQuY3JpdGljYWxWdWxuZXJhYmlsaXRpZXMubGVuZ3RoLFxuICAgICAgICAgIGhpZ2hWdWxuZXJhYmlsaXRpZXM6IHJlcG9ydC5oaWdoVnVsbmVyYWJpbGl0aWVzLmxlbmd0aCxcbiAgICAgICAgICBleGVjdXRpb25UaW1lTXM6IHJlcG9ydC5leGVjdXRpb25UaW1lTXMsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQ29udmVydCByZWQgdGVhbSByZXBvcnQgdG8gU2VjdXJpdHlUZXN0UmVzdWx0IGZvcm1hdFxuICAgICAgY29uc3QgdGVzdFJlc3VsdHM6IFNlY3VyaXR5VGVzdFtdID0gW1xuICAgICAgICAuLi5yZXBvcnQuY3JpdGljYWxWdWxuZXJhYmlsaXRpZXMubWFwKCh2KSA9PiAoe1xuICAgICAgICAgIHRlc3ROYW1lOiB2LnRlc3ROYW1lLFxuICAgICAgICAgIHBhc3NlZDogdi5wYXNzZWQsXG4gICAgICAgICAgZGV0YWlsczogdi5kZXNjcmlwdGlvbixcbiAgICAgICAgICBzZXZlcml0eTogdi5zZXZlcml0eSxcbiAgICAgICAgfSkpLFxuICAgICAgICAuLi5yZXBvcnQuaGlnaFZ1bG5lcmFiaWxpdGllcy5tYXAoKHYpID0+ICh7XG4gICAgICAgICAgdGVzdE5hbWU6IHYudGVzdE5hbWUsXG4gICAgICAgICAgcGFzc2VkOiB2LnBhc3NlZCxcbiAgICAgICAgICBkZXRhaWxzOiB2LmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHNldmVyaXR5OiB2LnNldmVyaXR5LFxuICAgICAgICB9KSksXG4gICAgICAgIC4uLnJlcG9ydC5tZWRpdW1WdWxuZXJhYmlsaXRpZXMubWFwKCh2KSA9PiAoe1xuICAgICAgICAgIHRlc3ROYW1lOiB2LnRlc3ROYW1lLFxuICAgICAgICAgIHBhc3NlZDogdi5wYXNzZWQsXG4gICAgICAgICAgZGV0YWlsczogdi5kZXNjcmlwdGlvbixcbiAgICAgICAgICBzZXZlcml0eTogdi5zZXZlcml0eSxcbiAgICAgICAgfSkpLFxuICAgICAgICAuLi5yZXBvcnQubG93VnVsbmVyYWJpbGl0aWVzLm1hcCgodikgPT4gKHtcbiAgICAgICAgICB0ZXN0TmFtZTogdi50ZXN0TmFtZSxcbiAgICAgICAgICBwYXNzZWQ6IHYucGFzc2VkLFxuICAgICAgICAgIGRldGFpbHM6IHYuZGVzY3JpcHRpb24sXG4gICAgICAgICAgc2V2ZXJpdHk6IHYuc2V2ZXJpdHksXG4gICAgICAgIH0pKSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHBhc3NlZCA9IHJlcG9ydC52dWxuZXJhYmlsaXRpZXNEZXRlY3RlZCA9PT0gMDtcblxuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBSZWQgdGVhbSBldmFsdWF0aW9uIGNvbXBsZXRlZDogJHtwYXNzZWQgPyBcIlBBU1NFRFwiIDogXCJGQUlMRURcIn0gYCArXG4gICAgICAgICAgYChTY29yZTogJHtyZXBvcnQub3ZlcmFsbFNlY3VyaXR5U2NvcmV9LzEwMCwgYCArXG4gICAgICAgICAgYFZ1bG5lcmFiaWxpdGllczogJHtyZXBvcnQudnVsbmVyYWJpbGl0aWVzRGV0ZWN0ZWR9KWBcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhc3NlZCxcbiAgICAgICAgdGVzdFJlc3VsdHMsXG4gICAgICAgIG92ZXJhbGxTY29yZTogcmVwb3J0Lm92ZXJhbGxTZWN1cml0eVNjb3JlLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHJlcG9ydC5yZWNvbW1lbmRhdGlvbnMsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiO1xuXG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgXCJiZWRyb2NrLWFjdGl2YXRpb25cIixcbiAgICAgICAgYFJlZCB0ZWFtIGV2YWx1YXRpb24gZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICApO1xuXG4gICAgICAvLyBMb2cgZXJyb3IgdG8gYXVkaXQgdHJhaWxcbiAgICAgIGF3YWl0IHRoaXMuYXVkaXRUcmFpbC5sb2dFdmVudCh7XG4gICAgICAgIGV2ZW50VHlwZTogXCJyZWRfdGVhbV9ldmFsdWF0aW9uXCIsXG4gICAgICAgIHJlcXVlc3RJZDogYHJlZC10ZWFtLWV2YWwtZXJyb3ItJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHByb3ZpZGVyOiBcImJlZHJvY2tcIixcbiAgICAgICAgY29tcGxpYW5jZVN0YXR1czogXCJ2aW9sYXRpb25cIixcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICB0eXBlOiBcImV2YWx1YXRpb25fZXJyb3JcIixcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGFzc2VkOiBmYWxzZSxcbiAgICAgICAgdGVzdFJlc3VsdHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0ZXN0TmFtZTogXCJSZWQgVGVhbSBFdmFsdWF0aW9uXCIsXG4gICAgICAgICAgICBwYXNzZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZGV0YWlsczogYEV2YWx1YXRpb24gZmFpbGVkOiAke2Vycm9yTWVzc2FnZX1gLFxuICAgICAgICAgICAgc2V2ZXJpdHk6IFwiY3JpdGljYWxcIixcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBvdmVyYWxsU2NvcmU6IDAsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogW1xuICAgICAgICAgIFwiRml4IHJlZCB0ZWFtIGV2YWx1YXRpb24gc3lzdGVtIGVycm9yc1wiLFxuICAgICAgICAgIFwiUmV2aWV3IGRpcmVjdCBCZWRyb2NrIGNsaWVudCBjb25maWd1cmF0aW9uXCIsXG4gICAgICAgICAgXCJDaGVjayBzZWN1cml0eSB0ZXN0aW5nIGluZnJhc3RydWN0dXJlXCIsXG4gICAgICAgIF0sXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGVmYXVsdCBjb25maWd1cmF0aW9uXG4gICAqL1xuICBwcml2YXRlIGdldERlZmF1bHRDb25maWcoXG4gICAgb3ZlcnJpZGVzPzogUGFydGlhbDxCZWRyb2NrU3VwcG9ydENvbmZpZz5cbiAgKTogQmVkcm9ja1N1cHBvcnRDb25maWcge1xuICAgIHJldHVybiB7XG4gICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgIGVudmlyb25tZW50czogW1wiZGV2ZWxvcG1lbnRcIiwgXCJzdGFnaW5nXCIsIFwicHJvZHVjdGlvblwiXSxcbiAgICAgIGF1ZGl0SW50ZXJ2YWw6IDE4MDAwMDAsIC8vIDMwIG1pbnV0ZXNcbiAgICAgIG1vbml0b3JpbmdMZXZlbDogXCJiYXNpY1wiLFxuICAgICAgYXV0b1Jlc29sdXRpb25FbmFibGVkOiBmYWxzZSxcbiAgICAgIG5vdGlmaWNhdGlvbkNoYW5uZWxzOiBbXSxcbiAgICAgIC4uLm92ZXJyaWRlcyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzeXN0ZW0gcmVzb3VyY2UgbW9uaXRvcmluZyBzdGF0dXNcbiAgICogRW5zdXJlcyBzdXBwb3J0IG1vZGUgb3ZlcmhlYWQgc3RheXMgdW5kZXIgNSUgb2Ygc3lzdGVtIHJlc291cmNlc1xuICAgKi9cbiAgcHVibGljIGdldFJlc291cmNlTW9uaXRvcmluZ1N0YXR1cygpOiB7XG4gICAgaXNNb25pdG9yaW5nOiBib29sZWFuO1xuICAgIGlzV2l0aGluVGhyZXNob2xkczogYm9vbGVhbjtcbiAgICBjdXJyZW50TWV0cmljczogYW55O1xuICAgIHN1bW1hcnk6IGFueTtcbiAgICBhbGVydHM6IGFueVtdO1xuICB9IHtcbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLnN5c3RlbVJlc291cmNlTW9uaXRvci5nZXRTdGF0dXMoKTtcbiAgICBjb25zdCBzdW1tYXJ5ID0gdGhpcy5zeXN0ZW1SZXNvdXJjZU1vbml0b3IuZ2V0UmVzb3VyY2VTdW1tYXJ5KCk7XG4gICAgY29uc3QgYWxlcnRzID0gdGhpcy5zeXN0ZW1SZXNvdXJjZU1vbml0b3IuZ2V0QWN0aXZlQWxlcnRzKCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNNb25pdG9yaW5nOiBzdGF0dXMuaXNNb25pdG9yaW5nLFxuICAgICAgaXNXaXRoaW5UaHJlc2hvbGRzOiBzdW1tYXJ5LmlzV2l0aGluVGhyZXNob2xkcyxcbiAgICAgIGN1cnJlbnRNZXRyaWNzOiBzdW1tYXJ5LmN1cnJlbnQsXG4gICAgICBzdW1tYXJ5LFxuICAgICAgYWxlcnRzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgc3VwcG9ydCBtb2RlIGlzIHdpdGhpbiB0aGUgNSUgc3lzdGVtIHJlc291cmNlIG92ZXJoZWFkIHJlcXVpcmVtZW50XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgdmFsaWRhdGVSZXNvdXJjZU92ZXJoZWFkKCk6IFByb21pc2U8e1xuICAgIGlzQ29tcGxpYW50OiBib29sZWFuO1xuICAgIGNwdVVzYWdlOiBudW1iZXI7XG4gICAgbWVtb3J5VXNhZ2U6IG51bWJlcjtcbiAgICB0aHJlc2hvbGRzOiBhbnk7XG4gICAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgfT4ge1xuICAgIGNvbnN0IGN1cnJlbnRNZXRyaWNzID0gYXdhaXQgdGhpcy5zeXN0ZW1SZXNvdXJjZU1vbml0b3IuZ2V0Q3VycmVudE1ldHJpY3MoKTtcbiAgICBjb25zdCBzdW1tYXJ5ID0gdGhpcy5zeXN0ZW1SZXNvdXJjZU1vbml0b3IuZ2V0UmVzb3VyY2VTdW1tYXJ5KCk7XG4gICAgY29uc3Qgc3RhdHVzID0gdGhpcy5zeXN0ZW1SZXNvdXJjZU1vbml0b3IuZ2V0U3RhdHVzKCk7XG5cbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBDaGVjayBDUFUgdXNhZ2UgYWdhaW5zdCAxJSB0aHJlc2hvbGQgKHdlbGwgdW5kZXIgNSUpXG4gICAgaWYgKGN1cnJlbnRNZXRyaWNzLmNwdVVzYWdlUGVyY2VudCA+IDAuOCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgIGBDUFUgdXNhZ2UgKCR7Y3VycmVudE1ldHJpY3MuY3B1VXNhZ2VQZXJjZW50LnRvRml4ZWQoXG4gICAgICAgICAgMlxuICAgICAgICApfSUpIGFwcHJvYWNoaW5nIHRocmVzaG9sZC4gQ29uc2lkZXIgb3B0aW1pemluZyBzdXBwb3J0IG9wZXJhdGlvbnMuYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBtZW1vcnkgdXNhZ2UgYWdhaW5zdCA1ME1CIHRocmVzaG9sZFxuICAgIGlmIChjdXJyZW50TWV0cmljcy5tZW1vcnlVc2FnZU1CID4gNDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICBgTWVtb3J5IHVzYWdlICgke2N1cnJlbnRNZXRyaWNzLm1lbW9yeVVzYWdlTUIudG9GaXhlZChcbiAgICAgICAgICAyXG4gICAgICAgICl9TUIpIGFwcHJvYWNoaW5nIHRocmVzaG9sZC4gQ29uc2lkZXIgbWVtb3J5IG9wdGltaXphdGlvbi5gXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIG1vbml0b3JpbmcgaXMgYWN0aXZlXG4gICAgaWYgKCFzdGF0dXMuaXNNb25pdG9yaW5nKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgXCJSZXNvdXJjZSBtb25pdG9yaW5nIGlzIG5vdCBhY3RpdmUuIEVuYWJsZSBtb25pdG9yaW5nIHRvIHRyYWNrIG92ZXJoZWFkLlwiXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGlzQ29tcGxpYW50ID1cbiAgICAgIGN1cnJlbnRNZXRyaWNzLmNwdVVzYWdlUGVyY2VudCA8PSAxLjAgJiYgLy8gMSUgQ1BVICh3ZWxsIHVuZGVyIDUlKVxuICAgICAgY3VycmVudE1ldHJpY3MubWVtb3J5VXNhZ2VNQiA8PSA1MCAmJiAvLyA1ME1CIG1lbW9yeSAocmVhc29uYWJsZSBmb3IgNSUgb3ZlcmhlYWQpXG4gICAgICBzdGF0dXMuaXNNb25pdG9yaW5nO1xuXG4gICAgYXdhaXQgdGhpcy5hdWRpdFRyYWlsLmxvZ0V2ZW50KHtcbiAgICAgIGV2ZW50VHlwZTogXCJyZXNvdXJjZV9vdmVyaGVhZF92YWxpZGF0aW9uXCIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIGNvbXBvbmVudDogXCJCZWRyb2NrU3VwcG9ydE1hbmFnZXJcIixcbiAgICAgICAgaXNDb21wbGlhbnQsXG4gICAgICAgIGNwdVVzYWdlOiBjdXJyZW50TWV0cmljcy5jcHVVc2FnZVBlcmNlbnQsXG4gICAgICAgIG1lbW9yeVVzYWdlOiBjdXJyZW50TWV0cmljcy5tZW1vcnlVc2FnZU1CLFxuICAgICAgICB0aHJlc2hvbGRzOiBzdGF0dXMuY29uZmlnLnRocmVzaG9sZHMsXG4gICAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNDb21wbGlhbnQsXG4gICAgICBjcHVVc2FnZTogY3VycmVudE1ldHJpY3MuY3B1VXNhZ2VQZXJjZW50LFxuICAgICAgbWVtb3J5VXNhZ2U6IGN1cnJlbnRNZXRyaWNzLm1lbW9yeVVzYWdlTUIsXG4gICAgICB0aHJlc2hvbGRzOiBzdGF0dXMuY29uZmlnLnRocmVzaG9sZHMsXG4gICAgICByZWNvbW1lbmRhdGlvbnMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGVyZm9ybWFuY2UgbWV0cmljcyB3aXRoIHJlc291cmNlIG92ZXJoZWFkIGluZm9ybWF0aW9uXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0UGVyZm9ybWFuY2VNZXRyaWNzV2l0aE92ZXJoZWFkKCk6IFByb21pc2U8XG4gICAgUGVyZm9ybWFuY2VNZXRyaWNzICYge1xuICAgICAgcmVzb3VyY2VPdmVyaGVhZDoge1xuICAgICAgICBjcHVVc2FnZVBlcmNlbnQ6IG51bWJlcjtcbiAgICAgICAgbWVtb3J5VXNhZ2VNQjogbnVtYmVyO1xuICAgICAgICBpc1dpdGhpblRocmVzaG9sZHM6IGJvb2xlYW47XG4gICAgICB9O1xuICAgIH1cbiAgPiB7XG4gICAgY29uc3QgY3VycmVudE1ldHJpY3MgPSBhd2FpdCB0aGlzLnN5c3RlbVJlc291cmNlTW9uaXRvci5nZXRDdXJyZW50TWV0cmljcygpO1xuICAgIGNvbnN0IHN1bW1hcnkgPSB0aGlzLnN5c3RlbVJlc291cmNlTW9uaXRvci5nZXRSZXNvdXJjZVN1bW1hcnkoKTtcblxuICAgIHJldHVybiB7XG4gICAgICByZXNwb25zZVRpbWU6IDAsIC8vIFRoaXMgd291bGQgYmUgcG9wdWxhdGVkIGJ5IGFjdHVhbCBvcGVyYXRpb25zXG4gICAgICBtZW1vcnlVc2FnZTogY3VycmVudE1ldHJpY3MubWVtb3J5VXNhZ2VNQixcbiAgICAgIGNwdVVzYWdlOiBjdXJyZW50TWV0cmljcy5jcHVVc2FnZVBlcmNlbnQsXG4gICAgICBuZXR3b3JrTGF0ZW5jeTogMCwgLy8gVGhpcyB3b3VsZCBiZSBwb3B1bGF0ZWQgYnkgYWN0dWFsIG9wZXJhdGlvbnNcbiAgICAgIHJlc291cmNlT3ZlcmhlYWQ6IHtcbiAgICAgICAgY3B1VXNhZ2VQZXJjZW50OiBjdXJyZW50TWV0cmljcy5jcHVVc2FnZVBlcmNlbnQsXG4gICAgICAgIG1lbW9yeVVzYWdlTUI6IGN1cnJlbnRNZXRyaWNzLm1lbW9yeVVzYWdlTUIsXG4gICAgICAgIGlzV2l0aGluVGhyZXNob2xkczogc3VtbWFyeS5pc1dpdGhpblRocmVzaG9sZHMsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRW1lcmdlbmN5IHNodXRkb3duIGlmIHJlc291cmNlIHVzYWdlIGV4Y2VlZHMgY3JpdGljYWwgdGhyZXNob2xkc1xuICAgKi9cbiAgcHVibGljIGFzeW5jIGVtZXJnZW5jeVNodXRkb3duT25SZXNvdXJjZU92ZXJoZWFkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRlUmVzb3VyY2VPdmVyaGVhZCgpO1xuXG4gICAgLy8gSWYgQ1BVIHVzYWdlIGV4Y2VlZHMgMiUgb3IgbWVtb3J5IGV4Y2VlZHMgMTAwTUIsIHRyaWdnZXIgZW1lcmdlbmN5IHNodXRkb3duXG4gICAgaWYgKHZhbGlkYXRpb24uY3B1VXNhZ2UgPiAyLjAgfHwgdmFsaWRhdGlvbi5tZW1vcnlVc2FnZSA+IDEwMCkge1xuICAgICAgdGhpcy5sb2coXG4gICAgICAgIFwiYmVkcm9jay1hY3RpdmF0aW9uXCIsXG4gICAgICAgIGBFbWVyZ2VuY3kgc2h1dGRvd24gdHJpZ2dlcmVkIGR1ZSB0byBleGNlc3NpdmUgcmVzb3VyY2UgdXNhZ2U6IENQVSAke3ZhbGlkYXRpb24uY3B1VXNhZ2UudG9GaXhlZChcbiAgICAgICAgICAyXG4gICAgICAgICl9JSwgTWVtb3J5ICR7dmFsaWRhdGlvbi5tZW1vcnlVc2FnZS50b0ZpeGVkKDIpfU1CYFxuICAgICAgKTtcblxuICAgICAgYXdhaXQgdGhpcy5hdWRpdFRyYWlsLmxvZ0V2ZW50KHtcbiAgICAgICAgZXZlbnRUeXBlOiBcImVtZXJnZW5jeV9zaHV0ZG93bl9yZXNvdXJjZV9vdmVyaGVhZFwiLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBjb21wb25lbnQ6IFwiQmVkcm9ja1N1cHBvcnRNYW5hZ2VyXCIsXG4gICAgICAgICAgdHJpZ2dlcjogXCJyZXNvdXJjZV9vdmVyaGVhZFwiLFxuICAgICAgICAgIGNwdVVzYWdlOiB2YWxpZGF0aW9uLmNwdVVzYWdlLFxuICAgICAgICAgIG1lbW9yeVVzYWdlOiB2YWxpZGF0aW9uLm1lbW9yeVVzYWdlLFxuICAgICAgICAgIHRocmVzaG9sZHM6IHZhbGlkYXRpb24udGhyZXNob2xkcyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBEZWFjdGl2YXRlIHN1cHBvcnQgbW9kZVxuICAgICAgYXdhaXQgdGhpcy5kZWFjdGl2YXRlKCk7XG5cbiAgICAgIC8vIFVzZSBlbWVyZ2VuY3kgc2h1dGRvd24gbWFuYWdlclxuICAgICAgYXdhaXQgdGhpcy5lbWVyZ2VuY3lTaHV0ZG93bk1hbmFnZXIudHJpZ2dlckVtZXJnZW5jeVNodXRkb3duKFxuICAgICAgICBcInJlc291cmNlX292ZXJoZWFkXCIsXG4gICAgICAgIGBSZXNvdXJjZSB1c2FnZSBleGNlZWRlZCBzYWZlIGxpbWl0czogQ1BVICR7dmFsaWRhdGlvbi5jcHVVc2FnZS50b0ZpeGVkKFxuICAgICAgICAgIDJcbiAgICAgICAgKX0lLCBNZW1vcnkgJHt2YWxpZGF0aW9uLm1lbW9yeVVzYWdlLnRvRml4ZWQoMil9TUJgXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgd2l0aCBiZWRyb2NrLWFjdGl2YXRpb24gcHJlZml4XG4gICAqL1xuICBwcml2YXRlIGxvZyhwcmVmaXg6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dnZXIubG9nKGBbJHtwcmVmaXh9XSAke21lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLyoqXG4gKiBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIEJlZHJvY2sgU3VwcG9ydCBNYW5hZ2VyIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCZWRyb2NrU3VwcG9ydE1hbmFnZXIoXG4gIGNvbmZpZz86IFBhcnRpYWw8QmVkcm9ja1N1cHBvcnRDb25maWc+LFxuICBmZWF0dXJlRmxhZ3M/OiBBaUZlYXR1cmVGbGFncyxcbiAgYmVkcm9ja0FkYXB0ZXI/OiBCZWRyb2NrQWRhcHRlclxuKTogQmVkcm9ja1N1cHBvcnRNYW5hZ2VyIHtcbiAgcmV0dXJuIG5ldyBCZWRyb2NrU3VwcG9ydE1hbmFnZXIoY29uZmlnLCBmZWF0dXJlRmxhZ3MsIGJlZHJvY2tBZGFwdGVyKTtcbn1cblxuLyoqXG4gKiBEZWZhdWx0IGV4cG9ydFxuICovXG5leHBvcnQgZGVmYXVsdCBCZWRyb2NrU3VwcG9ydE1hbmFnZXI7XG4iXSwidmVyc2lvbiI6M30=