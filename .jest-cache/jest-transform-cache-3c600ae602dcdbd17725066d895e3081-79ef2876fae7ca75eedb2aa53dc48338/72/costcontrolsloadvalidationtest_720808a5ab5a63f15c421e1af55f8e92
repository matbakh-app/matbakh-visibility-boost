6594b64dcfc9eea9bd6d06a7210cc3f4
/**
 * Cost Controls Load Validation Tests
 *
 * Validates cost controls under load for both Direct Bedrock and MCP routing paths.
 * This test suite ensures budget enforcement, cost tracking, and throttling work
 * correctly under high load scenarios for the hybrid routing architecture.
 *
 * These tests simulate cost control behavior without requiring actual router implementations.
 */
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
describe("Cost Controls Load Validation", () => {
    describe("Direct Bedrock Path Cost Controls", () => {
        it("should enforce budget limits under high load on direct path", () => __awaiter(void 0, void 0, void 0, function* () {
            // Simulate cost control system behavior
            let totalCost = 0;
            const costPerOperation = 0.02; // $0.02 per operation
            const maxBudget = 1.0; // $1.00 budget limit
            const operationsAttempted = [];
            const results = [];
            // Simulate 100 operations with budget enforcement
            for (let i = 0; i < 100; i++) {
                operationsAttempted.push(Date.now());
                // Check budget before adding cost
                if (totalCost + costPerOperation > maxBudget) {
                    results.push({
                        success: false,
                        error: `Budget exceeded: $${(totalCost + costPerOperation).toFixed(2)} > $${maxBudget.toFixed(2)}`,
                        route: "direct_bedrock",
                        cost: 0,
                    });
                    // Don't add cost for failed operations
                }
                else {
                    totalCost += costPerOperation;
                    results.push({
                        success: true,
                        result: "Direct Bedrock operation completed",
                        latency: 150 + Math.random() * 100,
                        route: "direct_bedrock",
                        cost: costPerOperation,
                        operationType: "support",
                        timestamp: new Date(),
                    });
                }
            }
            // Validate results
            const successfulOps = results.filter((r) => r.success);
            const failedOps = results.filter((r) => !r.success);
            // Should have some successful operations before budget limit
            expect(successfulOps.length).toBeGreaterThan(0);
            expect(successfulOps.length).toBeLessThan(100);
            // Should have failures due to budget exceeded
            expect(failedOps.length).toBeGreaterThan(0);
            // Total cost should not exceed budget (since we check before adding)
            expect(totalCost).toBeLessThanOrEqual(maxBudget);
            // Should have attempted operations until budget was exceeded
            expect(operationsAttempted.length).toBe(100);
            expect(successfulOps.length).toBeGreaterThan(40);
            expect(successfulOps.length).toBeLessThan(60);
            console.log(`Direct Bedrock: ${successfulOps.length} successful, ${failedOps.length} failed, total cost: $${totalCost.toFixed(2)}`);
        }));
        it("should track cost metrics accurately under sustained load on direct path", () => __awaiter(void 0, void 0, void 0, function* () {
            const costs = [];
            const latencies = [];
            const operationTypes = [];
            const results = [];
            // Simulate 50 operations with cost tracking
            const operations = [
                ...Array(20).fill("emergency"),
                ...Array(20).fill("support"),
                ...Array(10).fill("support"),
            ];
            for (const operationType of operations) {
                const cost = 0.01 + Math.random() * 0.04; // $0.01-$0.05 per operation
                const latency = 100 + Math.random() * 200; // 100-300ms latency
                costs.push(cost);
                latencies.push(latency);
                operationTypes.push(operationType);
                // Simulate async operation
                yield new Promise((resolve) => setTimeout(resolve, Math.min(latency, 10))); // Cap at 10ms for test speed
                results.push({
                    success: true,
                    result: "Direct Bedrock operation completed",
                    latency,
                    route: "direct_bedrock",
                    cost,
                    operationType,
                    timestamp: new Date(),
                });
            }
            // Validate cost tracking
            expect(costs.length).toBe(50);
            expect(latencies.length).toBe(50);
            expect(operationTypes.length).toBe(50);
            const totalCost = costs.reduce((sum, cost) => sum + cost, 0);
            const avgCost = totalCost / costs.length;
            const avgLatency = latencies.reduce((sum, lat) => sum + lat, 0) / latencies.length;
            // Cost validation
            expect(totalCost).toBeGreaterThan(0.5); // At least $0.50 total
            expect(totalCost).toBeLessThan(2.5); // Less than $2.50 total
            expect(avgCost).toBeGreaterThan(0.01);
            expect(avgCost).toBeLessThan(0.05);
            // Performance validation
            expect(avgLatency).toBeGreaterThan(100);
            expect(avgLatency).toBeLessThan(300);
            // All operations should succeed
            expect(results.every((r) => r.success)).toBe(true);
            console.log(`Direct Bedrock Cost Metrics: Total: $${totalCost.toFixed(2)}, Avg: $${avgCost.toFixed(3)}, Avg Latency: ${avgLatency.toFixed(0)}ms`);
        }));
        it("should implement cost-based throttling on direct path", () => __awaiter(void 0, void 0, void 0, function* () {
            let totalCost = 0;
            const costPerOperation = 0.03;
            const throttleThreshold = 0.5; // Start throttling at $0.50
            const maxBudget = 1.0;
            let throttleActivated = false;
            const throttledOperations = [];
            const results = [];
            // Simulate 40 operations with throttling
            for (let i = 0; i < 40; i++) {
                // Check if we should throttle before processing
                if (totalCost > throttleThreshold && !throttleActivated) {
                    throttleActivated = true;
                    console.log(`Throttling activated at $${totalCost.toFixed(2)}`);
                }
                if (throttleActivated) {
                    throttledOperations.push(Date.now());
                    // Simulate throttling delay
                    yield new Promise((resolve) => setTimeout(resolve, 50)); // Reduced for test speed
                }
                // Check budget before adding cost
                if (totalCost + costPerOperation > maxBudget) {
                    results.push({
                        success: false,
                        error: `Budget exceeded: $${(totalCost + costPerOperation).toFixed(2)}`,
                        throttled: throttleActivated,
                    });
                }
                else {
                    totalCost += costPerOperation;
                    results.push({
                        success: true,
                        result: "Direct Bedrock operation completed",
                        latency: throttleActivated ? 650 : 150,
                        route: "direct_bedrock",
                        cost: costPerOperation,
                        throttled: throttleActivated,
                        timestamp: new Date(),
                    });
                }
            }
            // Validate throttling behavior
            expect(throttleActivated).toBe(true);
            expect(throttledOperations.length).toBeGreaterThan(0);
            const successfulOps = results.filter((r) => r.success);
            const throttledOps = successfulOps.filter((r) => r.throttled);
            expect(throttledOps.length).toBeGreaterThan(0);
            console.log(`Direct Bedrock Throttling: ${throttledOps.length} throttled operations, total operations: ${results.length}`);
        }));
    });
    describe("MCP Path Cost Controls", () => {
        it("should enforce budget limits under high load on MCP path", () => __awaiter(void 0, void 0, void 0, function* () {
            let totalCost = 0;
            const costPerOperation = 0.015; // Slightly lower cost for MCP
            const maxBudget = 0.8; // $0.80 budget limit
            const operationsAttempted = [];
            const results = [];
            // Simulate 80 operations (should exceed budget at ~53 operations)
            for (let i = 0; i < 80; i++) {
                operationsAttempted.push(Date.now());
                // Check budget before adding cost
                if (totalCost + costPerOperation > maxBudget) {
                    results.push({
                        success: false,
                        error: `MCP Budget exceeded: $${(totalCost + costPerOperation).toFixed(2)} > $${maxBudget.toFixed(2)}`,
                        route: "mcp",
                        cost: 0,
                    });
                }
                else {
                    totalCost += costPerOperation;
                    results.push({
                        success: true,
                        result: "MCP operation completed",
                        latencyMs: 200 + Math.random() * 150,
                        operationId: `mcp-${Date.now()}`,
                        route: "mcp",
                        cost: costPerOperation,
                        timestamp: new Date(),
                    });
                }
            }
            // Validate results
            const successfulOps = results.filter((r) => r.success);
            const failedOps = results.filter((r) => !r.success);
            // Should have some successful operations before budget limit
            expect(successfulOps.length).toBeGreaterThan(0);
            expect(successfulOps.length).toBeLessThan(80);
            // Should have failures due to budget exceeded
            expect(failedOps.length).toBeGreaterThan(0);
            // Total cost should not exceed budget
            expect(totalCost).toBeLessThanOrEqual(maxBudget);
            // Should have attempted operations until budget was exceeded
            expect(operationsAttempted.length).toBe(80);
            expect(successfulOps.length).toBeGreaterThan(45);
            expect(successfulOps.length).toBeLessThan(60);
            console.log(`MCP Path: ${successfulOps.length} successful, ${failedOps.length} failed, total cost: $${totalCost.toFixed(2)}`);
        }));
        it("should track cost metrics accurately under sustained load on MCP path", () => __awaiter(void 0, void 0, void 0, function* () {
            const costs = [];
            const latencies = [];
            const operationIds = [];
            const results = [];
            // Execute 40 operations
            for (let i = 0; i < 40; i++) {
                const cost = 0.008 + Math.random() * 0.02; // $0.008-$0.028 per operation
                const latency = 150 + Math.random() * 250; // 150-400ms latency
                const operationId = `mcp-${Date.now()}-${Math.random()
                    .toString(36)
                    .substr(2, 9)}`;
                costs.push(cost);
                latencies.push(latency);
                operationIds.push(operationId);
                yield new Promise((resolve) => setTimeout(resolve, Math.min(latency, 10))); // Cap for test speed
                results.push({
                    success: true,
                    result: "MCP operation completed",
                    latencyMs: latency,
                    operationId,
                    route: "mcp",
                    cost,
                    timestamp: new Date(),
                });
            }
            // Validate cost tracking
            expect(costs.length).toBe(40);
            expect(latencies.length).toBe(40);
            expect(operationIds.length).toBe(40);
            const totalCost = costs.reduce((sum, cost) => sum + cost, 0);
            const avgCost = totalCost / costs.length;
            const avgLatency = latencies.reduce((sum, lat) => sum + lat, 0) / latencies.length;
            // Cost validation
            expect(totalCost).toBeGreaterThan(0.32); // At least $0.32 total (40 * $0.008)
            expect(totalCost).toBeLessThan(1.12); // Less than $1.12 total (40 * $0.028)
            expect(avgCost).toBeGreaterThan(0.008);
            expect(avgCost).toBeLessThan(0.028);
            // Performance validation
            expect(avgLatency).toBeGreaterThan(150);
            expect(avgLatency).toBeLessThan(400);
            // All operations should succeed
            expect(results.every((r) => r.success)).toBe(true);
            // Unique operation IDs
            expect(new Set(operationIds).size).toBe(40);
            console.log(`MCP Cost Metrics: Total: $${totalCost.toFixed(2)}, Avg: $${avgCost.toFixed(3)}, Avg Latency: ${avgLatency.toFixed(0)}ms`);
        }));
    });
    describe("Emergency Cost Controls", () => {
        it("should implement emergency shutdown when budget critically exceeded", () => __awaiter(void 0, void 0, void 0, function* () {
            let totalCost = 0;
            const costPerOperation = 0.05;
            const emergencyThreshold = 0.3; // Emergency shutdown at $0.30
            let emergencyShutdownTriggered = false;
            const emergencyEvents = [];
            const results = [];
            // Simulate 20 operations with emergency shutdown
            for (let i = 0; i < 20; i++) {
                // Check for emergency shutdown before processing
                if (totalCost + costPerOperation > emergencyThreshold &&
                    !emergencyShutdownTriggered) {
                    emergencyShutdownTriggered = true;
                    emergencyEvents.push({
                        type: "emergency_shutdown",
                        totalCost: totalCost + costPerOperation,
                        threshold: emergencyThreshold,
                        timestamp: Date.now(),
                    });
                    results.push({
                        success: false,
                        error: `EMERGENCY SHUTDOWN: Cost $${(totalCost + costPerOperation).toFixed(2)} exceeded emergency threshold $${emergencyThreshold.toFixed(2)}`,
                        emergencyShutdown: true,
                    });
                    continue;
                }
                if (emergencyShutdownTriggered) {
                    results.push({
                        success: false,
                        error: "System in emergency shutdown mode",
                        emergencyShutdown: true,
                    });
                    continue;
                }
                totalCost += costPerOperation;
                results.push({
                    success: true,
                    result: "Operation completed",
                    latency: 150,
                    route: "direct_bedrock",
                    cost: costPerOperation,
                });
            }
            const successfulOps = results.filter((r) => r.success);
            const emergencyFailures = results.filter((r) => r.emergencyShutdown);
            // Validate emergency shutdown
            expect(emergencyShutdownTriggered).toBe(true);
            expect(emergencyEvents.length).toBeGreaterThan(0);
            expect(emergencyFailures.length).toBeGreaterThan(0);
            // Should have some successful operations before shutdown
            expect(successfulOps.length).toBeGreaterThan(0);
            expect(successfulOps.length).toBeLessThan(10); // Should shutdown quickly
            console.log(`Emergency Shutdown: ${successfulOps.length} successful before shutdown, ${emergencyFailures.length} blocked by emergency shutdown`);
        }));
    });
    describe("Cost Control Integration Tests", () => {
        it("should validate cost controls are properly integrated with existing cost control systems", () => __awaiter(void 0, void 0, void 0, function* () {
            // This test validates that our cost control tests integrate with the existing
            // cost control infrastructure from the lambda functions
            let totalCost = 0;
            const costPerOperation = 0.02;
            const budgetLimit = 0.5;
            const costTrackingEvents = [];
            const results = [];
            // Execute operations until budget is exceeded
            for (let i = 0; i < 30; i++) {
                // Simulate cost tracking event (like in cost-control-system.ts)
                costTrackingEvents.push({
                    operation: "infrastructure_audit",
                    cost: costPerOperation,
                    totalCost: totalCost + costPerOperation,
                    timestamp: Date.now(),
                    userId: "test-user",
                });
                // Simulate budget enforcement (like in automatic-cost-control.ts)
                if (totalCost + costPerOperation > budgetLimit) {
                    results.push({
                        success: false,
                        error: `Budget exceeded: $${(totalCost + costPerOperation).toFixed(2)}`,
                    });
                }
                else {
                    totalCost += costPerOperation;
                    results.push({
                        success: true,
                        result: "Operation completed with cost tracking",
                        latency: 150,
                        route: "direct_bedrock",
                        cost: costPerOperation,
                        totalCost,
                        costTrackingId: `cost-${Date.now()}`,
                    });
                }
            }
            const successfulOps = results.filter((r) => r.success);
            const failedOps = results.filter((r) => !r.success);
            // Validate cost tracking integration
            expect(costTrackingEvents.length).toBeGreaterThan(0);
            expect(costTrackingEvents.length).toBe(30); // All operations tracked
            // Validate budget enforcement
            expect(successfulOps.length).toBeGreaterThan(0);
            expect(failedOps.length).toBeGreaterThan(0);
            // Validate cost accumulation (should not exceed budget)
            expect(totalCost).toBeLessThanOrEqual(budgetLimit);
            // Validate cost tracking data structure
            const lastEvent = costTrackingEvents[costTrackingEvents.length - 1];
            expect(lastEvent).toHaveProperty("operation");
            expect(lastEvent).toHaveProperty("cost");
            expect(lastEvent).toHaveProperty("totalCost");
            expect(lastEvent).toHaveProperty("timestamp");
            expect(lastEvent).toHaveProperty("userId");
            console.log(`Cost Integration: ${successfulOps.length} successful, ${failedOps.length} failed, ${costTrackingEvents.length} cost events tracked`);
        }));
        it("should validate cost controls work correctly under concurrent load", () => __awaiter(void 0, void 0, void 0, function* () {
            let totalCost = 0;
            const costPerOperation = 0.01;
            const budgetLimit = 0.5;
            const concurrentBatches = 5;
            const operationsPerBatch = 20;
            const costMutex = { locked: false };
            const allResults = [];
            // Execute concurrent batches
            const batchPromises = Array(concurrentBatches)
                .fill(null)
                .map((_, batchIndex) => __awaiter(void 0, void 0, void 0, function* () {
                const batchResults = [];
                for (let opIndex = 0; opIndex < operationsPerBatch; opIndex++) {
                    // Simulate thread-safe cost tracking
                    while (costMutex.locked) {
                        yield new Promise((resolve) => setTimeout(resolve, 1));
                    }
                    costMutex.locked = true;
                    const currentCost = totalCost;
                    // Check budget before adding cost
                    if (totalCost + costPerOperation > budgetLimit) {
                        costMutex.locked = false;
                        batchResults.push({
                            success: false,
                            error: `Concurrent budget exceeded: $${(totalCost + costPerOperation).toFixed(2)}`,
                            batchIndex,
                            opIndex,
                        });
                    }
                    else {
                        totalCost += costPerOperation;
                        costMutex.locked = false;
                        batchResults.push({
                            success: true,
                            result: "Concurrent operation completed",
                            latency: 50 + Math.random() * 100,
                            route: "direct_bedrock",
                            cost: costPerOperation,
                            batchCost: currentCost,
                            batchIndex,
                            opIndex,
                        });
                    }
                }
                return batchResults;
            }));
            const batchResults = yield Promise.all(batchPromises);
            allResults.push(...batchResults.flat());
            const successfulOps = allResults.filter((r) => r.success);
            const failedOps = allResults.filter((r) => !r.success);
            // Validate concurrent cost control
            expect(successfulOps.length).toBeGreaterThan(0);
            expect(failedOps.length).toBeGreaterThan(0);
            expect(totalCost).toBeLessThanOrEqual(budgetLimit);
            console.log(`Concurrent Cost Control: ${successfulOps.length} successful, ${failedOps.length} failed, total cost: $${totalCost.toFixed(2)}`);
        }));
    });
    describe("Hybrid Path Cost Controls", () => {
        it("should enforce combined budget limits across both paths", () => __awaiter(void 0, void 0, void 0, function* () {
            let directCost = 0;
            let mcpCost = 0;
            const costPerDirectOp = 0.02;
            const costPerMcpOp = 0.015;
            const combinedBudget = 1.0;
            const directOperations = [];
            const mcpOperations = [];
            const results = [];
            // Mix of operations that should route to different paths
            const operations = [
                // Emergency operations -> Direct Bedrock
                ...Array(20).fill({
                    type: "direct",
                    operation: "emergency_operations",
                }),
                // Standard operations -> MCP
                ...Array(30).fill({ type: "mcp", operation: "standard_analysis" }),
                // Critical operations -> Direct Bedrock
                ...Array(20).fill({
                    type: "direct",
                    operation: "infrastructure_audit",
                }),
            ];
            for (const op of operations) {
                if (op.type === "direct") {
                    const totalCost = directCost + mcpCost + costPerDirectOp;
                    if (totalCost > combinedBudget) {
                        results.push({
                            success: false,
                            error: `Combined budget exceeded: $${totalCost.toFixed(2)} > $${combinedBudget.toFixed(2)}`,
                            route: "direct_bedrock",
                        });
                    }
                    else {
                        directCost += costPerDirectOp;
                        directOperations.push({
                            cost: costPerDirectOp,
                            totalCost,
                            timestamp: Date.now(),
                        });
                        results.push({
                            success: true,
                            result: "Direct operation completed",
                            latency: 150,
                            route: "direct_bedrock",
                            cost: costPerDirectOp,
                            totalCombinedCost: directCost + mcpCost,
                        });
                    }
                }
                else {
                    const totalCost = directCost + mcpCost + costPerMcpOp;
                    if (totalCost > combinedBudget) {
                        results.push({
                            success: false,
                            error: `Combined budget exceeded: $${totalCost.toFixed(2)} > $${combinedBudget.toFixed(2)}`,
                            route: "mcp",
                        });
                    }
                    else {
                        mcpCost += costPerMcpOp;
                        mcpOperations.push({
                            cost: costPerMcpOp,
                            totalCost,
                            timestamp: Date.now(),
                        });
                        results.push({
                            success: true,
                            result: "MCP operation completed",
                            latencyMs: 200,
                            operationId: `mcp-${Date.now()}`,
                            route: "mcp",
                            cost: costPerMcpOp,
                            totalCombinedCost: directCost + mcpCost,
                        });
                    }
                }
            }
            const successfulOps = results.filter((r) => r.success);
            const failedOps = results.filter((r) => !r.success);
            const totalCombinedCost = directCost + mcpCost;
            // Validate combined budget enforcement
            expect(successfulOps.length).toBeGreaterThan(0);
            expect(failedOps.length).toBeGreaterThan(0);
            expect(totalCombinedCost).toBeLessThanOrEqual(combinedBudget);
            // Validate both paths were used
            expect(directOperations.length).toBeGreaterThan(0);
            expect(mcpOperations.length).toBeGreaterThan(0);
            console.log(`Hybrid Cost Control: Direct: $${directCost.toFixed(2)} (${directOperations.length} ops), MCP: $${mcpCost.toFixed(2)} (${mcpOperations.length} ops), Total: $${totalCombinedCost.toFixed(2)}`);
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hdGJha2gtdmlzaWJpbGl0eS1ib29zdC4yMDI1MDkyMC9zcmMvbGliL2FpLW9yY2hlc3RyYXRvci9fX3Rlc3RzX18vY29zdC1jb250cm9scy1sb2FkLXZhbGlkYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7R0FRRzs7Ozs7Ozs7OztBQUVILFFBQVEsQ0FBQywrQkFBK0IsRUFBRSxHQUFHLEVBQUU7SUFDN0MsUUFBUSxDQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtRQUNqRCxFQUFFLENBQUMsNkRBQTZELEVBQUUsR0FBUyxFQUFFO1lBQzNFLHdDQUF3QztZQUN4QyxJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7WUFDbEIsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsQ0FBQyxzQkFBc0I7WUFDckQsTUFBTSxTQUFTLEdBQUcsR0FBRyxDQUFDLENBQUMscUJBQXFCO1lBQzVDLE1BQU0sbUJBQW1CLEdBQWEsRUFBRSxDQUFDO1lBQ3pDLE1BQU0sT0FBTyxHQUFVLEVBQUUsQ0FBQztZQUUxQixrREFBa0Q7WUFDbEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUM3QixtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBRXJDLGtDQUFrQztnQkFDbEMsSUFBSSxTQUFTLEdBQUcsZ0JBQWdCLEdBQUcsU0FBUyxFQUFFLENBQUM7b0JBQzdDLE9BQU8sQ0FBQyxJQUFJLENBQUM7d0JBQ1gsT0FBTyxFQUFFLEtBQUs7d0JBQ2QsS0FBSyxFQUFFLHFCQUFxQixDQUFDLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sQ0FDaEUsQ0FBQyxDQUNGLE9BQU8sU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDOUIsS0FBSyxFQUFFLGdCQUFnQjt3QkFDdkIsSUFBSSxFQUFFLENBQUM7cUJBQ1IsQ0FBQyxDQUFDO29CQUNILHVDQUF1QztnQkFDekMsQ0FBQztxQkFBTSxDQUFDO29CQUNOLFNBQVMsSUFBSSxnQkFBZ0IsQ0FBQztvQkFDOUIsT0FBTyxDQUFDLElBQUksQ0FBQzt3QkFDWCxPQUFPLEVBQUUsSUFBSTt3QkFDYixNQUFNLEVBQUUsb0NBQW9DO3dCQUM1QyxPQUFPLEVBQUUsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHO3dCQUNsQyxLQUFLLEVBQUUsZ0JBQWdCO3dCQUN2QixJQUFJLEVBQUUsZ0JBQWdCO3dCQUN0QixhQUFhLEVBQUUsU0FBUzt3QkFDeEIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO3FCQUN0QixDQUFDLENBQUM7Z0JBQ0wsQ0FBQztZQUNILENBQUM7WUFFRCxtQkFBbUI7WUFDbkIsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzVELE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRXpELDZEQUE2RDtZQUM3RCxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUUvQyw4Q0FBOEM7WUFDOUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFNUMscUVBQXFFO1lBQ3JFLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUVqRCw2REFBNkQ7WUFDN0QsTUFBTSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM3QyxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUU5QyxPQUFPLENBQUMsR0FBRyxDQUNULG1CQUFtQixhQUFhLENBQUMsTUFBTSxnQkFDckMsU0FBUyxDQUFDLE1BQ1oseUJBQXlCLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FDaEQsQ0FBQztRQUNKLENBQUMsQ0FBQSxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMEVBQTBFLEVBQUUsR0FBUyxFQUFFO1lBQ3hGLE1BQU0sS0FBSyxHQUFhLEVBQUUsQ0FBQztZQUMzQixNQUFNLFNBQVMsR0FBYSxFQUFFLENBQUM7WUFDL0IsTUFBTSxjQUFjLEdBQWEsRUFBRSxDQUFDO1lBQ3BDLE1BQU0sT0FBTyxHQUFVLEVBQUUsQ0FBQztZQUUxQiw0Q0FBNEM7WUFDNUMsTUFBTSxVQUFVLEdBQUc7Z0JBQ2pCLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7Z0JBQzlCLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQzVCLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7YUFDN0IsQ0FBQztZQUVGLEtBQUssTUFBTSxhQUFhLElBQUksVUFBVSxFQUFFLENBQUM7Z0JBQ3ZDLE1BQU0sSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsNEJBQTRCO2dCQUN0RSxNQUFNLE9BQU8sR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQjtnQkFFL0QsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDakIsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDeEIsY0FBYyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztnQkFFbkMsMkJBQTJCO2dCQUMzQixNQUFNLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FDNUIsVUFBVSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUMzQyxDQUFDLENBQUMsNkJBQTZCO2dCQUVoQyxPQUFPLENBQUMsSUFBSSxDQUFDO29CQUNYLE9BQU8sRUFBRSxJQUFJO29CQUNiLE1BQU0sRUFBRSxvQ0FBb0M7b0JBQzVDLE9BQU87b0JBQ1AsS0FBSyxFQUFFLGdCQUFnQjtvQkFDdkIsSUFBSTtvQkFDSixhQUFhO29CQUNiLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtpQkFDdEIsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztZQUVELHlCQUF5QjtZQUN6QixNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM5QixNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUV2QyxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM3RCxNQUFNLE9BQU8sR0FBRyxTQUFTLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQztZQUN6QyxNQUFNLFVBQVUsR0FDZCxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDO1lBRWxFLGtCQUFrQjtZQUNsQixNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsdUJBQXVCO1lBQy9ELE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyx3QkFBd0I7WUFDN0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRW5DLHlCQUF5QjtZQUN6QixNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFckMsZ0NBQWdDO1lBQ2hDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFeEQsT0FBTyxDQUFDLEdBQUcsQ0FDVCx3Q0FBd0MsU0FBUyxDQUFDLE9BQU8sQ0FDdkQsQ0FBQyxDQUNGLFdBQVcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsa0JBQWtCLFVBQVUsQ0FBQyxPQUFPLENBQ2hFLENBQUMsQ0FDRixJQUFJLENBQ04sQ0FBQztRQUNKLENBQUMsQ0FBQSxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsdURBQXVELEVBQUUsR0FBUyxFQUFFO1lBQ3JFLElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQztZQUNsQixNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQztZQUM5QixNQUFNLGlCQUFpQixHQUFHLEdBQUcsQ0FBQyxDQUFDLDRCQUE0QjtZQUMzRCxNQUFNLFNBQVMsR0FBRyxHQUFHLENBQUM7WUFDdEIsSUFBSSxpQkFBaUIsR0FBRyxLQUFLLENBQUM7WUFDOUIsTUFBTSxtQkFBbUIsR0FBYSxFQUFFLENBQUM7WUFDekMsTUFBTSxPQUFPLEdBQVUsRUFBRSxDQUFDO1lBRTFCLHlDQUF5QztZQUN6QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQzVCLGdEQUFnRDtnQkFDaEQsSUFBSSxTQUFTLEdBQUcsaUJBQWlCLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO29CQUN4RCxpQkFBaUIsR0FBRyxJQUFJLENBQUM7b0JBQ3pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsNEJBQTRCLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNsRSxDQUFDO2dCQUVELElBQUksaUJBQWlCLEVBQUUsQ0FBQztvQkFDdEIsbUJBQW1CLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO29CQUNyQyw0QkFBNEI7b0JBQzVCLE1BQU0sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLHlCQUF5QjtnQkFDcEYsQ0FBQztnQkFFRCxrQ0FBa0M7Z0JBQ2xDLElBQUksU0FBUyxHQUFHLGdCQUFnQixHQUFHLFNBQVMsRUFBRSxDQUFDO29CQUM3QyxPQUFPLENBQUMsSUFBSSxDQUFDO3dCQUNYLE9BQU8sRUFBRSxLQUFLO3dCQUNkLEtBQUssRUFBRSxxQkFBcUIsQ0FBQyxTQUFTLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLENBQ2hFLENBQUMsQ0FDRixFQUFFO3dCQUNILFNBQVMsRUFBRSxpQkFBaUI7cUJBQzdCLENBQUMsQ0FBQztnQkFDTCxDQUFDO3FCQUFNLENBQUM7b0JBQ04sU0FBUyxJQUFJLGdCQUFnQixDQUFDO29CQUM5QixPQUFPLENBQUMsSUFBSSxDQUFDO3dCQUNYLE9BQU8sRUFBRSxJQUFJO3dCQUNiLE1BQU0sRUFBRSxvQ0FBb0M7d0JBQzVDLE9BQU8sRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHO3dCQUN0QyxLQUFLLEVBQUUsZ0JBQWdCO3dCQUN2QixJQUFJLEVBQUUsZ0JBQWdCO3dCQUN0QixTQUFTLEVBQUUsaUJBQWlCO3dCQUM1QixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7cUJBQ3RCLENBQUMsQ0FBQztnQkFDTCxDQUFDO1lBQ0gsQ0FBQztZQUVELCtCQUErQjtZQUMvQixNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV0RCxNQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDNUQsTUFBTSxZQUFZLEdBQUcsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRW5FLE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRS9DLE9BQU8sQ0FBQyxHQUFHLENBQ1QsOEJBQThCLFlBQVksQ0FBQyxNQUFNLDRDQUE0QyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQzlHLENBQUM7UUFDSixDQUFDLENBQUEsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsd0JBQXdCLEVBQUUsR0FBRyxFQUFFO1FBQ3RDLEVBQUUsQ0FBQywwREFBMEQsRUFBRSxHQUFTLEVBQUU7WUFDeEUsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO1lBQ2xCLE1BQU0sZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLENBQUMsOEJBQThCO1lBQzlELE1BQU0sU0FBUyxHQUFHLEdBQUcsQ0FBQyxDQUFDLHFCQUFxQjtZQUM1QyxNQUFNLG1CQUFtQixHQUFhLEVBQUUsQ0FBQztZQUN6QyxNQUFNLE9BQU8sR0FBVSxFQUFFLENBQUM7WUFFMUIsa0VBQWtFO1lBQ2xFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDNUIsbUJBQW1CLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2dCQUVyQyxrQ0FBa0M7Z0JBQ2xDLElBQUksU0FBUyxHQUFHLGdCQUFnQixHQUFHLFNBQVMsRUFBRSxDQUFDO29CQUM3QyxPQUFPLENBQUMsSUFBSSxDQUFDO3dCQUNYLE9BQU8sRUFBRSxLQUFLO3dCQUNkLEtBQUssRUFBRSx5QkFBeUIsQ0FDOUIsU0FBUyxHQUFHLGdCQUFnQixDQUM3QixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFO3dCQUN6QyxLQUFLLEVBQUUsS0FBSzt3QkFDWixJQUFJLEVBQUUsQ0FBQztxQkFDUixDQUFDLENBQUM7Z0JBQ0wsQ0FBQztxQkFBTSxDQUFDO29CQUNOLFNBQVMsSUFBSSxnQkFBZ0IsQ0FBQztvQkFDOUIsT0FBTyxDQUFDLElBQUksQ0FBQzt3QkFDWCxPQUFPLEVBQUUsSUFBSTt3QkFDYixNQUFNLEVBQUUseUJBQXlCO3dCQUNqQyxTQUFTLEVBQUUsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHO3dCQUNwQyxXQUFXLEVBQUUsT0FBTyxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUU7d0JBQ2hDLEtBQUssRUFBRSxLQUFLO3dCQUNaLElBQUksRUFBRSxnQkFBZ0I7d0JBQ3RCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtxQkFDdEIsQ0FBQyxDQUFDO2dCQUNMLENBQUM7WUFDSCxDQUFDO1lBRUQsbUJBQW1CO1lBQ25CLE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1RCxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUV6RCw2REFBNkQ7WUFDN0QsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFOUMsOENBQThDO1lBQzlDLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTVDLHNDQUFzQztZQUN0QyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsbUJBQW1CLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFakQsNkRBQTZEO1lBQzdELE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDNUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDakQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFOUMsT0FBTyxDQUFDLEdBQUcsQ0FDVCxhQUFhLGFBQWEsQ0FBQyxNQUFNLGdCQUMvQixTQUFTLENBQUMsTUFDWix5QkFBeUIsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUNoRCxDQUFDO1FBQ0osQ0FBQyxDQUFBLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx1RUFBdUUsRUFBRSxHQUFTLEVBQUU7WUFDckYsTUFBTSxLQUFLLEdBQWEsRUFBRSxDQUFDO1lBQzNCLE1BQU0sU0FBUyxHQUFhLEVBQUUsQ0FBQztZQUMvQixNQUFNLFlBQVksR0FBYSxFQUFFLENBQUM7WUFDbEMsTUFBTSxPQUFPLEdBQVUsRUFBRSxDQUFDO1lBRTFCLHdCQUF3QjtZQUN4QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQzVCLE1BQU0sSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsOEJBQThCO2dCQUN6RSxNQUFNLE9BQU8sR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQjtnQkFDL0QsTUFBTSxXQUFXLEdBQUcsT0FBTyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtxQkFDbkQsUUFBUSxDQUFDLEVBQUUsQ0FBQztxQkFDWixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBRWxCLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2pCLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ3hCLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBRS9CLE1BQU0sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUM1QixVQUFVLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQzNDLENBQUMsQ0FBQyxxQkFBcUI7Z0JBRXhCLE9BQU8sQ0FBQyxJQUFJLENBQUM7b0JBQ1gsT0FBTyxFQUFFLElBQUk7b0JBQ2IsTUFBTSxFQUFFLHlCQUF5QjtvQkFDakMsU0FBUyxFQUFFLE9BQU87b0JBQ2xCLFdBQVc7b0JBQ1gsS0FBSyxFQUFFLEtBQUs7b0JBQ1osSUFBSTtvQkFDSixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7aUJBQ3RCLENBQUMsQ0FBQztZQUNMLENBQUM7WUFFRCx5QkFBeUI7WUFDekIsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDOUIsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFckMsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLEdBQUcsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDN0QsTUFBTSxPQUFPLEdBQUcsU0FBUyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7WUFDekMsTUFBTSxVQUFVLEdBQ2QsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQztZQUVsRSxrQkFBa0I7WUFDbEIsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLHFDQUFxQztZQUM5RSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsc0NBQXNDO1lBQzVFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUVwQyx5QkFBeUI7WUFDekIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRXJDLGdDQUFnQztZQUNoQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRXhELHVCQUF1QjtZQUN2QixNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRTVDLE9BQU8sQ0FBQyxHQUFHLENBQ1QsNkJBQTZCLFNBQVMsQ0FBQyxPQUFPLENBQzVDLENBQUMsQ0FDRixXQUFXLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixVQUFVLENBQUMsT0FBTyxDQUNoRSxDQUFDLENBQ0YsSUFBSSxDQUNOLENBQUM7UUFDSixDQUFDLENBQUEsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO1FBQ3ZDLEVBQUUsQ0FBQyxxRUFBcUUsRUFBRSxHQUFTLEVBQUU7WUFDbkYsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO1lBQ2xCLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1lBQzlCLE1BQU0sa0JBQWtCLEdBQUcsR0FBRyxDQUFDLENBQUMsOEJBQThCO1lBQzlELElBQUksMEJBQTBCLEdBQUcsS0FBSyxDQUFDO1lBQ3ZDLE1BQU0sZUFBZSxHQUFVLEVBQUUsQ0FBQztZQUNsQyxNQUFNLE9BQU8sR0FBVSxFQUFFLENBQUM7WUFFMUIsaURBQWlEO1lBQ2pELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDNUIsaURBQWlEO2dCQUNqRCxJQUNFLFNBQVMsR0FBRyxnQkFBZ0IsR0FBRyxrQkFBa0I7b0JBQ2pELENBQUMsMEJBQTBCLEVBQzNCLENBQUM7b0JBQ0QsMEJBQTBCLEdBQUcsSUFBSSxDQUFDO29CQUNsQyxlQUFlLENBQUMsSUFBSSxDQUFDO3dCQUNuQixJQUFJLEVBQUUsb0JBQW9CO3dCQUMxQixTQUFTLEVBQUUsU0FBUyxHQUFHLGdCQUFnQjt3QkFDdkMsU0FBUyxFQUFFLGtCQUFrQjt3QkFDN0IsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7cUJBQ3RCLENBQUMsQ0FBQztvQkFDSCxPQUFPLENBQUMsSUFBSSxDQUFDO3dCQUNYLE9BQU8sRUFBRSxLQUFLO3dCQUNkLEtBQUssRUFBRSw2QkFBNkIsQ0FDbEMsU0FBUyxHQUFHLGdCQUFnQixDQUM3QixDQUFDLE9BQU8sQ0FDUCxDQUFDLENBQ0Ysa0NBQWtDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDbEUsaUJBQWlCLEVBQUUsSUFBSTtxQkFDeEIsQ0FBQyxDQUFDO29CQUNILFNBQVM7Z0JBQ1gsQ0FBQztnQkFFRCxJQUFJLDBCQUEwQixFQUFFLENBQUM7b0JBQy9CLE9BQU8sQ0FBQyxJQUFJLENBQUM7d0JBQ1gsT0FBTyxFQUFFLEtBQUs7d0JBQ2QsS0FBSyxFQUFFLG1DQUFtQzt3QkFDMUMsaUJBQWlCLEVBQUUsSUFBSTtxQkFDeEIsQ0FBQyxDQUFDO29CQUNILFNBQVM7Z0JBQ1gsQ0FBQztnQkFFRCxTQUFTLElBQUksZ0JBQWdCLENBQUM7Z0JBQzlCLE9BQU8sQ0FBQyxJQUFJLENBQUM7b0JBQ1gsT0FBTyxFQUFFLElBQUk7b0JBQ2IsTUFBTSxFQUFFLHFCQUFxQjtvQkFDN0IsT0FBTyxFQUFFLEdBQUc7b0JBQ1osS0FBSyxFQUFFLGdCQUFnQjtvQkFDdkIsSUFBSSxFQUFFLGdCQUFnQjtpQkFDdkIsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztZQUVELE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1RCxNQUFNLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBRTFFLDhCQUE4QjtZQUM5QixNQUFNLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVwRCx5REFBeUQ7WUFDekQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQywwQkFBMEI7WUFFekUsT0FBTyxDQUFDLEdBQUcsQ0FDVCx1QkFBdUIsYUFBYSxDQUFDLE1BQU0sZ0NBQWdDLGlCQUFpQixDQUFDLE1BQU0sZ0NBQWdDLENBQ3BJLENBQUM7UUFDSixDQUFDLENBQUEsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFO1FBQzlDLEVBQUUsQ0FBQywwRkFBMEYsRUFBRSxHQUFTLEVBQUU7WUFDeEcsOEVBQThFO1lBQzlFLHdEQUF3RDtZQUV4RCxJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7WUFDbEIsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7WUFDOUIsTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDO1lBQ3hCLE1BQU0sa0JBQWtCLEdBQVUsRUFBRSxDQUFDO1lBQ3JDLE1BQU0sT0FBTyxHQUFVLEVBQUUsQ0FBQztZQUUxQiw4Q0FBOEM7WUFDOUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUM1QixnRUFBZ0U7Z0JBQ2hFLGtCQUFrQixDQUFDLElBQUksQ0FBQztvQkFDdEIsU0FBUyxFQUFFLHNCQUFzQjtvQkFDakMsSUFBSSxFQUFFLGdCQUFnQjtvQkFDdEIsU0FBUyxFQUFFLFNBQVMsR0FBRyxnQkFBZ0I7b0JBQ3ZDLFNBQVMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO29CQUNyQixNQUFNLEVBQUUsV0FBVztpQkFDcEIsQ0FBQyxDQUFDO2dCQUVILGtFQUFrRTtnQkFDbEUsSUFBSSxTQUFTLEdBQUcsZ0JBQWdCLEdBQUcsV0FBVyxFQUFFLENBQUM7b0JBQy9DLE9BQU8sQ0FBQyxJQUFJLENBQUM7d0JBQ1gsT0FBTyxFQUFFLEtBQUs7d0JBQ2QsS0FBSyxFQUFFLHFCQUFxQixDQUFDLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sQ0FDaEUsQ0FBQyxDQUNGLEVBQUU7cUJBQ0osQ0FBQyxDQUFDO2dCQUNMLENBQUM7cUJBQU0sQ0FBQztvQkFDTixTQUFTLElBQUksZ0JBQWdCLENBQUM7b0JBQzlCLE9BQU8sQ0FBQyxJQUFJLENBQUM7d0JBQ1gsT0FBTyxFQUFFLElBQUk7d0JBQ2IsTUFBTSxFQUFFLHdDQUF3Qzt3QkFDaEQsT0FBTyxFQUFFLEdBQUc7d0JBQ1osS0FBSyxFQUFFLGdCQUFnQjt3QkFDdkIsSUFBSSxFQUFFLGdCQUFnQjt3QkFDdEIsU0FBUzt3QkFDVCxjQUFjLEVBQUUsUUFBUSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUU7cUJBQ3JDLENBQUMsQ0FBQztnQkFDTCxDQUFDO1lBQ0gsQ0FBQztZQUVELE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1RCxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUV6RCxxQ0FBcUM7WUFDckMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyRCxNQUFNLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMseUJBQXlCO1lBRXJFLDhCQUE4QjtZQUM5QixNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUU1Qyx3REFBd0Q7WUFDeEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBRW5ELHdDQUF3QztZQUN4QyxNQUFNLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDcEUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDOUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRTNDLE9BQU8sQ0FBQyxHQUFHLENBQ1QscUJBQXFCLGFBQWEsQ0FBQyxNQUFNLGdCQUFnQixTQUFTLENBQUMsTUFBTSxZQUFZLGtCQUFrQixDQUFDLE1BQU0sc0JBQXNCLENBQ3JJLENBQUM7UUFDSixDQUFDLENBQUEsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG9FQUFvRSxFQUFFLEdBQVMsRUFBRTtZQUNsRixJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7WUFDbEIsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7WUFDOUIsTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDO1lBQ3hCLE1BQU0saUJBQWlCLEdBQUcsQ0FBQyxDQUFDO1lBQzVCLE1BQU0sa0JBQWtCLEdBQUcsRUFBRSxDQUFDO1lBQzlCLE1BQU0sU0FBUyxHQUFHLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDO1lBQ3BDLE1BQU0sVUFBVSxHQUFVLEVBQUUsQ0FBQztZQUU3Qiw2QkFBNkI7WUFDN0IsTUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLGlCQUFpQixDQUFDO2lCQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDO2lCQUNWLEdBQUcsQ0FBQyxDQUFPLENBQUMsRUFBRSxVQUFVLEVBQUUsRUFBRTtnQkFDM0IsTUFBTSxZQUFZLEdBQVUsRUFBRSxDQUFDO2dCQUUvQixLQUFLLElBQUksT0FBTyxHQUFHLENBQUMsRUFBRSxPQUFPLEdBQUcsa0JBQWtCLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FBQztvQkFDOUQscUNBQXFDO29CQUNyQyxPQUFPLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQzt3QkFDeEIsTUFBTSxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN6RCxDQUFDO29CQUVELFNBQVMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO29CQUN4QixNQUFNLFdBQVcsR0FBRyxTQUFTLENBQUM7b0JBRTlCLGtDQUFrQztvQkFDbEMsSUFBSSxTQUFTLEdBQUcsZ0JBQWdCLEdBQUcsV0FBVyxFQUFFLENBQUM7d0JBQy9DLFNBQVMsQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO3dCQUN6QixZQUFZLENBQUMsSUFBSSxDQUFDOzRCQUNoQixPQUFPLEVBQUUsS0FBSzs0QkFDZCxLQUFLLEVBQUUsZ0NBQWdDLENBQ3JDLFNBQVMsR0FBRyxnQkFBZ0IsQ0FDN0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7NEJBQ2QsVUFBVTs0QkFDVixPQUFPO3lCQUNSLENBQUMsQ0FBQztvQkFDTCxDQUFDO3lCQUFNLENBQUM7d0JBQ04sU0FBUyxJQUFJLGdCQUFnQixDQUFDO3dCQUM5QixTQUFTLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQzt3QkFFekIsWUFBWSxDQUFDLElBQUksQ0FBQzs0QkFDaEIsT0FBTyxFQUFFLElBQUk7NEJBQ2IsTUFBTSxFQUFFLGdDQUFnQzs0QkFDeEMsT0FBTyxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRzs0QkFDakMsS0FBSyxFQUFFLGdCQUFnQjs0QkFDdkIsSUFBSSxFQUFFLGdCQUFnQjs0QkFDdEIsU0FBUyxFQUFFLFdBQVc7NEJBQ3RCLFVBQVU7NEJBQ1YsT0FBTzt5QkFDUixDQUFDLENBQUM7b0JBQ0wsQ0FBQztnQkFDSCxDQUFDO2dCQUVELE9BQU8sWUFBWSxDQUFDO1lBQ3RCLENBQUMsQ0FBQSxDQUFDLENBQUM7WUFFTCxNQUFNLFlBQVksR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDdEQsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBRXhDLE1BQU0sYUFBYSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMvRCxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUU1RCxtQ0FBbUM7WUFDbkMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBRW5ELE9BQU8sQ0FBQyxHQUFHLENBQ1QsNEJBQTRCLGFBQWEsQ0FBQyxNQUFNLGdCQUM5QyxTQUFTLENBQUMsTUFDWix5QkFBeUIsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUNoRCxDQUFDO1FBQ0osQ0FBQyxDQUFBLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtRQUN6QyxFQUFFLENBQUMseURBQXlELEVBQUUsR0FBUyxFQUFFO1lBQ3ZFLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztZQUNuQixJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUM7WUFDaEIsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDO1lBQzdCLE1BQU0sWUFBWSxHQUFHLEtBQUssQ0FBQztZQUMzQixNQUFNLGNBQWMsR0FBRyxHQUFHLENBQUM7WUFDM0IsTUFBTSxnQkFBZ0IsR0FBVSxFQUFFLENBQUM7WUFDbkMsTUFBTSxhQUFhLEdBQVUsRUFBRSxDQUFDO1lBQ2hDLE1BQU0sT0FBTyxHQUFVLEVBQUUsQ0FBQztZQUUxQix5REFBeUQ7WUFDekQsTUFBTSxVQUFVLEdBQUc7Z0JBQ2pCLHlDQUF5QztnQkFDekMsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDO29CQUNoQixJQUFJLEVBQUUsUUFBUTtvQkFDZCxTQUFTLEVBQUUsc0JBQXNCO2lCQUNsQyxDQUFDO2dCQUNGLDZCQUE2QjtnQkFDN0IsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsbUJBQW1CLEVBQUUsQ0FBQztnQkFDbEUsd0NBQXdDO2dCQUN4QyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUM7b0JBQ2hCLElBQUksRUFBRSxRQUFRO29CQUNkLFNBQVMsRUFBRSxzQkFBc0I7aUJBQ2xDLENBQUM7YUFDSCxDQUFDO1lBRUYsS0FBSyxNQUFNLEVBQUUsSUFBSSxVQUFVLEVBQUUsQ0FBQztnQkFDNUIsSUFBSSxFQUFFLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRSxDQUFDO29CQUN6QixNQUFNLFNBQVMsR0FBRyxVQUFVLEdBQUcsT0FBTyxHQUFHLGVBQWUsQ0FBQztvQkFFekQsSUFBSSxTQUFTLEdBQUcsY0FBYyxFQUFFLENBQUM7d0JBQy9CLE9BQU8sQ0FBQyxJQUFJLENBQUM7NEJBQ1gsT0FBTyxFQUFFLEtBQUs7NEJBQ2QsS0FBSyxFQUFFLDhCQUE4QixTQUFTLENBQUMsT0FBTyxDQUNwRCxDQUFDLENBQ0YsT0FBTyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFOzRCQUNuQyxLQUFLLEVBQUUsZ0JBQWdCO3lCQUN4QixDQUFDLENBQUM7b0JBQ0wsQ0FBQzt5QkFBTSxDQUFDO3dCQUNOLFVBQVUsSUFBSSxlQUFlLENBQUM7d0JBQzlCLGdCQUFnQixDQUFDLElBQUksQ0FBQzs0QkFDcEIsSUFBSSxFQUFFLGVBQWU7NEJBQ3JCLFNBQVM7NEJBQ1QsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7eUJBQ3RCLENBQUMsQ0FBQzt3QkFFSCxPQUFPLENBQUMsSUFBSSxDQUFDOzRCQUNYLE9BQU8sRUFBRSxJQUFJOzRCQUNiLE1BQU0sRUFBRSw0QkFBNEI7NEJBQ3BDLE9BQU8sRUFBRSxHQUFHOzRCQUNaLEtBQUssRUFBRSxnQkFBZ0I7NEJBQ3ZCLElBQUksRUFBRSxlQUFlOzRCQUNyQixpQkFBaUIsRUFBRSxVQUFVLEdBQUcsT0FBTzt5QkFDeEMsQ0FBQyxDQUFDO29CQUNMLENBQUM7Z0JBQ0gsQ0FBQztxQkFBTSxDQUFDO29CQUNOLE1BQU0sU0FBUyxHQUFHLFVBQVUsR0FBRyxPQUFPLEdBQUcsWUFBWSxDQUFDO29CQUV0RCxJQUFJLFNBQVMsR0FBRyxjQUFjLEVBQUUsQ0FBQzt3QkFDL0IsT0FBTyxDQUFDLElBQUksQ0FBQzs0QkFDWCxPQUFPLEVBQUUsS0FBSzs0QkFDZCxLQUFLLEVBQUUsOEJBQThCLFNBQVMsQ0FBQyxPQUFPLENBQ3BELENBQUMsQ0FDRixPQUFPLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7NEJBQ25DLEtBQUssRUFBRSxLQUFLO3lCQUNiLENBQUMsQ0FBQztvQkFDTCxDQUFDO3lCQUFNLENBQUM7d0JBQ04sT0FBTyxJQUFJLFlBQVksQ0FBQzt3QkFDeEIsYUFBYSxDQUFDLElBQUksQ0FBQzs0QkFDakIsSUFBSSxFQUFFLFlBQVk7NEJBQ2xCLFNBQVM7NEJBQ1QsU0FBUyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7eUJBQ3RCLENBQUMsQ0FBQzt3QkFFSCxPQUFPLENBQUMsSUFBSSxDQUFDOzRCQUNYLE9BQU8sRUFBRSxJQUFJOzRCQUNiLE1BQU0sRUFBRSx5QkFBeUI7NEJBQ2pDLFNBQVMsRUFBRSxHQUFHOzRCQUNkLFdBQVcsRUFBRSxPQUFPLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRTs0QkFDaEMsS0FBSyxFQUFFLEtBQUs7NEJBQ1osSUFBSSxFQUFFLFlBQVk7NEJBQ2xCLGlCQUFpQixFQUFFLFVBQVUsR0FBRyxPQUFPO3lCQUN4QyxDQUFDLENBQUM7b0JBQ0wsQ0FBQztnQkFDSCxDQUFDO1lBQ0gsQ0FBQztZQUVELE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1RCxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN6RCxNQUFNLGlCQUFpQixHQUFHLFVBQVUsR0FBRyxPQUFPLENBQUM7WUFFL0MsdUNBQXVDO1lBQ3ZDLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBRTlELGdDQUFnQztZQUNoQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25ELE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRWhELE9BQU8sQ0FBQyxHQUFHLENBQ1QsaUNBQWlDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQ3BELGdCQUFnQixDQUFDLE1BQ25CLGdCQUFnQixPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUNoQyxhQUFhLENBQUMsTUFDaEIsa0JBQWtCLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUNqRCxDQUFDO1FBQ0osQ0FBQyxDQUFBLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL21hdGJha2gtdmlzaWJpbGl0eS1ib29zdC4yMDI1MDkyMC9zcmMvbGliL2FpLW9yY2hlc3RyYXRvci9fX3Rlc3RzX18vY29zdC1jb250cm9scy1sb2FkLXZhbGlkYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvc3QgQ29udHJvbHMgTG9hZCBWYWxpZGF0aW9uIFRlc3RzXG4gKlxuICogVmFsaWRhdGVzIGNvc3QgY29udHJvbHMgdW5kZXIgbG9hZCBmb3IgYm90aCBEaXJlY3QgQmVkcm9jayBhbmQgTUNQIHJvdXRpbmcgcGF0aHMuXG4gKiBUaGlzIHRlc3Qgc3VpdGUgZW5zdXJlcyBidWRnZXQgZW5mb3JjZW1lbnQsIGNvc3QgdHJhY2tpbmcsIGFuZCB0aHJvdHRsaW5nIHdvcmtcbiAqIGNvcnJlY3RseSB1bmRlciBoaWdoIGxvYWQgc2NlbmFyaW9zIGZvciB0aGUgaHlicmlkIHJvdXRpbmcgYXJjaGl0ZWN0dXJlLlxuICpcbiAqIFRoZXNlIHRlc3RzIHNpbXVsYXRlIGNvc3QgY29udHJvbCBiZWhhdmlvciB3aXRob3V0IHJlcXVpcmluZyBhY3R1YWwgcm91dGVyIGltcGxlbWVudGF0aW9ucy5cbiAqL1xuXG5kZXNjcmliZShcIkNvc3QgQ29udHJvbHMgTG9hZCBWYWxpZGF0aW9uXCIsICgpID0+IHtcbiAgZGVzY3JpYmUoXCJEaXJlY3QgQmVkcm9jayBQYXRoIENvc3QgQ29udHJvbHNcIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIGVuZm9yY2UgYnVkZ2V0IGxpbWl0cyB1bmRlciBoaWdoIGxvYWQgb24gZGlyZWN0IHBhdGhcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2ltdWxhdGUgY29zdCBjb250cm9sIHN5c3RlbSBiZWhhdmlvclxuICAgICAgbGV0IHRvdGFsQ29zdCA9IDA7XG4gICAgICBjb25zdCBjb3N0UGVyT3BlcmF0aW9uID0gMC4wMjsgLy8gJDAuMDIgcGVyIG9wZXJhdGlvblxuICAgICAgY29uc3QgbWF4QnVkZ2V0ID0gMS4wOyAvLyAkMS4wMCBidWRnZXQgbGltaXRcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnNBdHRlbXB0ZWQ6IG51bWJlcltdID0gW107XG4gICAgICBjb25zdCByZXN1bHRzOiBhbnlbXSA9IFtdO1xuXG4gICAgICAvLyBTaW11bGF0ZSAxMDAgb3BlcmF0aW9ucyB3aXRoIGJ1ZGdldCBlbmZvcmNlbWVudFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgICAgICBvcGVyYXRpb25zQXR0ZW1wdGVkLnB1c2goRGF0ZS5ub3coKSk7XG5cbiAgICAgICAgLy8gQ2hlY2sgYnVkZ2V0IGJlZm9yZSBhZGRpbmcgY29zdFxuICAgICAgICBpZiAodG90YWxDb3N0ICsgY29zdFBlck9wZXJhdGlvbiA+IG1heEJ1ZGdldCkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBgQnVkZ2V0IGV4Y2VlZGVkOiAkJHsodG90YWxDb3N0ICsgY29zdFBlck9wZXJhdGlvbikudG9GaXhlZChcbiAgICAgICAgICAgICAgMlxuICAgICAgICAgICAgKX0gPiAkJHttYXhCdWRnZXQudG9GaXhlZCgyKX1gLFxuICAgICAgICAgICAgcm91dGU6IFwiZGlyZWN0X2JlZHJvY2tcIixcbiAgICAgICAgICAgIGNvc3Q6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gRG9uJ3QgYWRkIGNvc3QgZm9yIGZhaWxlZCBvcGVyYXRpb25zXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG90YWxDb3N0ICs9IGNvc3RQZXJPcGVyYXRpb247XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICByZXN1bHQ6IFwiRGlyZWN0IEJlZHJvY2sgb3BlcmF0aW9uIGNvbXBsZXRlZFwiLFxuICAgICAgICAgICAgbGF0ZW5jeTogMTUwICsgTWF0aC5yYW5kb20oKSAqIDEwMCxcbiAgICAgICAgICAgIHJvdXRlOiBcImRpcmVjdF9iZWRyb2NrXCIsXG4gICAgICAgICAgICBjb3N0OiBjb3N0UGVyT3BlcmF0aW9uLFxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZTogXCJzdXBwb3J0XCIsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgcmVzdWx0c1xuICAgICAgY29uc3Qgc3VjY2Vzc2Z1bE9wcyA9IHJlc3VsdHMuZmlsdGVyKChyOiBhbnkpID0+IHIuc3VjY2Vzcyk7XG4gICAgICBjb25zdCBmYWlsZWRPcHMgPSByZXN1bHRzLmZpbHRlcigocjogYW55KSA9PiAhci5zdWNjZXNzKTtcblxuICAgICAgLy8gU2hvdWxkIGhhdmUgc29tZSBzdWNjZXNzZnVsIG9wZXJhdGlvbnMgYmVmb3JlIGJ1ZGdldCBsaW1pdFxuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxPcHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3Qoc3VjY2Vzc2Z1bE9wcy5sZW5ndGgpLnRvQmVMZXNzVGhhbigxMDApO1xuXG4gICAgICAvLyBTaG91bGQgaGF2ZSBmYWlsdXJlcyBkdWUgdG8gYnVkZ2V0IGV4Y2VlZGVkXG4gICAgICBleHBlY3QoZmFpbGVkT3BzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAvLyBUb3RhbCBjb3N0IHNob3VsZCBub3QgZXhjZWVkIGJ1ZGdldCAoc2luY2Ugd2UgY2hlY2sgYmVmb3JlIGFkZGluZylcbiAgICAgIGV4cGVjdCh0b3RhbENvc3QpLnRvQmVMZXNzVGhhbk9yRXF1YWwobWF4QnVkZ2V0KTtcblxuICAgICAgLy8gU2hvdWxkIGhhdmUgYXR0ZW1wdGVkIG9wZXJhdGlvbnMgdW50aWwgYnVkZ2V0IHdhcyBleGNlZWRlZFxuICAgICAgZXhwZWN0KG9wZXJhdGlvbnNBdHRlbXB0ZWQubGVuZ3RoKS50b0JlKDEwMCk7XG4gICAgICBleHBlY3Qoc3VjY2Vzc2Z1bE9wcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbig0MCk7XG4gICAgICBleHBlY3Qoc3VjY2Vzc2Z1bE9wcy5sZW5ndGgpLnRvQmVMZXNzVGhhbig2MCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgRGlyZWN0IEJlZHJvY2s6ICR7c3VjY2Vzc2Z1bE9wcy5sZW5ndGh9IHN1Y2Nlc3NmdWwsICR7XG4gICAgICAgICAgZmFpbGVkT3BzLmxlbmd0aFxuICAgICAgICB9IGZhaWxlZCwgdG90YWwgY29zdDogJCR7dG90YWxDb3N0LnRvRml4ZWQoMil9YFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHRyYWNrIGNvc3QgbWV0cmljcyBhY2N1cmF0ZWx5IHVuZGVyIHN1c3RhaW5lZCBsb2FkIG9uIGRpcmVjdCBwYXRoXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvc3RzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgY29uc3QgbGF0ZW5jaWVzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgY29uc3Qgb3BlcmF0aW9uVHlwZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCByZXN1bHRzOiBhbnlbXSA9IFtdO1xuXG4gICAgICAvLyBTaW11bGF0ZSA1MCBvcGVyYXRpb25zIHdpdGggY29zdCB0cmFja2luZ1xuICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IFtcbiAgICAgICAgLi4uQXJyYXkoMjApLmZpbGwoXCJlbWVyZ2VuY3lcIiksXG4gICAgICAgIC4uLkFycmF5KDIwKS5maWxsKFwic3VwcG9ydFwiKSxcbiAgICAgICAgLi4uQXJyYXkoMTApLmZpbGwoXCJzdXBwb3J0XCIpLFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBvcGVyYXRpb25UeXBlIG9mIG9wZXJhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29zdCA9IDAuMDEgKyBNYXRoLnJhbmRvbSgpICogMC4wNDsgLy8gJDAuMDEtJDAuMDUgcGVyIG9wZXJhdGlvblxuICAgICAgICBjb25zdCBsYXRlbmN5ID0gMTAwICsgTWF0aC5yYW5kb20oKSAqIDIwMDsgLy8gMTAwLTMwMG1zIGxhdGVuY3lcblxuICAgICAgICBjb3N0cy5wdXNoKGNvc3QpO1xuICAgICAgICBsYXRlbmNpZXMucHVzaChsYXRlbmN5KTtcbiAgICAgICAgb3BlcmF0aW9uVHlwZXMucHVzaChvcGVyYXRpb25UeXBlKTtcblxuICAgICAgICAvLyBTaW11bGF0ZSBhc3luYyBvcGVyYXRpb25cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+XG4gICAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBNYXRoLm1pbihsYXRlbmN5LCAxMCkpXG4gICAgICAgICk7IC8vIENhcCBhdCAxMG1zIGZvciB0ZXN0IHNwZWVkXG5cbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHJlc3VsdDogXCJEaXJlY3QgQmVkcm9jayBvcGVyYXRpb24gY29tcGxldGVkXCIsXG4gICAgICAgICAgbGF0ZW5jeSxcbiAgICAgICAgICByb3V0ZTogXCJkaXJlY3RfYmVkcm9ja1wiLFxuICAgICAgICAgIGNvc3QsXG4gICAgICAgICAgb3BlcmF0aW9uVHlwZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBjb3N0IHRyYWNraW5nXG4gICAgICBleHBlY3QoY29zdHMubGVuZ3RoKS50b0JlKDUwKTtcbiAgICAgIGV4cGVjdChsYXRlbmNpZXMubGVuZ3RoKS50b0JlKDUwKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb25UeXBlcy5sZW5ndGgpLnRvQmUoNTApO1xuXG4gICAgICBjb25zdCB0b3RhbENvc3QgPSBjb3N0cy5yZWR1Y2UoKHN1bSwgY29zdCkgPT4gc3VtICsgY29zdCwgMCk7XG4gICAgICBjb25zdCBhdmdDb3N0ID0gdG90YWxDb3N0IC8gY29zdHMubGVuZ3RoO1xuICAgICAgY29uc3QgYXZnTGF0ZW5jeSA9XG4gICAgICAgIGxhdGVuY2llcy5yZWR1Y2UoKHN1bSwgbGF0KSA9PiBzdW0gKyBsYXQsIDApIC8gbGF0ZW5jaWVzLmxlbmd0aDtcblxuICAgICAgLy8gQ29zdCB2YWxpZGF0aW9uXG4gICAgICBleHBlY3QodG90YWxDb3N0KS50b0JlR3JlYXRlclRoYW4oMC41KTsgLy8gQXQgbGVhc3QgJDAuNTAgdG90YWxcbiAgICAgIGV4cGVjdCh0b3RhbENvc3QpLnRvQmVMZXNzVGhhbigyLjUpOyAvLyBMZXNzIHRoYW4gJDIuNTAgdG90YWxcbiAgICAgIGV4cGVjdChhdmdDb3N0KS50b0JlR3JlYXRlclRoYW4oMC4wMSk7XG4gICAgICBleHBlY3QoYXZnQ29zdCkudG9CZUxlc3NUaGFuKDAuMDUpO1xuXG4gICAgICAvLyBQZXJmb3JtYW5jZSB2YWxpZGF0aW9uXG4gICAgICBleHBlY3QoYXZnTGF0ZW5jeSkudG9CZUdyZWF0ZXJUaGFuKDEwMCk7XG4gICAgICBleHBlY3QoYXZnTGF0ZW5jeSkudG9CZUxlc3NUaGFuKDMwMCk7XG5cbiAgICAgIC8vIEFsbCBvcGVyYXRpb25zIHNob3VsZCBzdWNjZWVkXG4gICAgICBleHBlY3QocmVzdWx0cy5ldmVyeSgocjogYW55KSA9PiByLnN1Y2Nlc3MpKS50b0JlKHRydWUpO1xuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYERpcmVjdCBCZWRyb2NrIENvc3QgTWV0cmljczogVG90YWw6ICQke3RvdGFsQ29zdC50b0ZpeGVkKFxuICAgICAgICAgIDJcbiAgICAgICAgKX0sIEF2ZzogJCR7YXZnQ29zdC50b0ZpeGVkKDMpfSwgQXZnIExhdGVuY3k6ICR7YXZnTGF0ZW5jeS50b0ZpeGVkKFxuICAgICAgICAgIDBcbiAgICAgICAgKX1tc2BcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBpbXBsZW1lbnQgY29zdC1iYXNlZCB0aHJvdHRsaW5nIG9uIGRpcmVjdCBwYXRoXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCB0b3RhbENvc3QgPSAwO1xuICAgICAgY29uc3QgY29zdFBlck9wZXJhdGlvbiA9IDAuMDM7XG4gICAgICBjb25zdCB0aHJvdHRsZVRocmVzaG9sZCA9IDAuNTsgLy8gU3RhcnQgdGhyb3R0bGluZyBhdCAkMC41MFxuICAgICAgY29uc3QgbWF4QnVkZ2V0ID0gMS4wO1xuICAgICAgbGV0IHRocm90dGxlQWN0aXZhdGVkID0gZmFsc2U7XG4gICAgICBjb25zdCB0aHJvdHRsZWRPcGVyYXRpb25zOiBudW1iZXJbXSA9IFtdO1xuICAgICAgY29uc3QgcmVzdWx0czogYW55W10gPSBbXTtcblxuICAgICAgLy8gU2ltdWxhdGUgNDAgb3BlcmF0aW9ucyB3aXRoIHRocm90dGxpbmdcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDA7IGkrKykge1xuICAgICAgICAvLyBDaGVjayBpZiB3ZSBzaG91bGQgdGhyb3R0bGUgYmVmb3JlIHByb2Nlc3NpbmdcbiAgICAgICAgaWYgKHRvdGFsQ29zdCA+IHRocm90dGxlVGhyZXNob2xkICYmICF0aHJvdHRsZUFjdGl2YXRlZCkge1xuICAgICAgICAgIHRocm90dGxlQWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgVGhyb3R0bGluZyBhY3RpdmF0ZWQgYXQgJCR7dG90YWxDb3N0LnRvRml4ZWQoMil9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhyb3R0bGVBY3RpdmF0ZWQpIHtcbiAgICAgICAgICB0aHJvdHRsZWRPcGVyYXRpb25zLnB1c2goRGF0ZS5ub3coKSk7XG4gICAgICAgICAgLy8gU2ltdWxhdGUgdGhyb3R0bGluZyBkZWxheVxuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwKSk7IC8vIFJlZHVjZWQgZm9yIHRlc3Qgc3BlZWRcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGJ1ZGdldCBiZWZvcmUgYWRkaW5nIGNvc3RcbiAgICAgICAgaWYgKHRvdGFsQ29zdCArIGNvc3RQZXJPcGVyYXRpb24gPiBtYXhCdWRnZXQpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogYEJ1ZGdldCBleGNlZWRlZDogJCR7KHRvdGFsQ29zdCArIGNvc3RQZXJPcGVyYXRpb24pLnRvRml4ZWQoXG4gICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICl9YCxcbiAgICAgICAgICAgIHRocm90dGxlZDogdGhyb3R0bGVBY3RpdmF0ZWQsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG90YWxDb3N0ICs9IGNvc3RQZXJPcGVyYXRpb247XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICByZXN1bHQ6IFwiRGlyZWN0IEJlZHJvY2sgb3BlcmF0aW9uIGNvbXBsZXRlZFwiLFxuICAgICAgICAgICAgbGF0ZW5jeTogdGhyb3R0bGVBY3RpdmF0ZWQgPyA2NTAgOiAxNTAsXG4gICAgICAgICAgICByb3V0ZTogXCJkaXJlY3RfYmVkcm9ja1wiLFxuICAgICAgICAgICAgY29zdDogY29zdFBlck9wZXJhdGlvbixcbiAgICAgICAgICAgIHRocm90dGxlZDogdGhyb3R0bGVBY3RpdmF0ZWQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgdGhyb3R0bGluZyBiZWhhdmlvclxuICAgICAgZXhwZWN0KHRocm90dGxlQWN0aXZhdGVkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHRocm90dGxlZE9wZXJhdGlvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgIGNvbnN0IHN1Y2Nlc3NmdWxPcHMgPSByZXN1bHRzLmZpbHRlcigocjogYW55KSA9PiByLnN1Y2Nlc3MpO1xuICAgICAgY29uc3QgdGhyb3R0bGVkT3BzID0gc3VjY2Vzc2Z1bE9wcy5maWx0ZXIoKHI6IGFueSkgPT4gci50aHJvdHRsZWQpO1xuXG4gICAgICBleHBlY3QodGhyb3R0bGVkT3BzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYERpcmVjdCBCZWRyb2NrIFRocm90dGxpbmc6ICR7dGhyb3R0bGVkT3BzLmxlbmd0aH0gdGhyb3R0bGVkIG9wZXJhdGlvbnMsIHRvdGFsIG9wZXJhdGlvbnM6ICR7cmVzdWx0cy5sZW5ndGh9YFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJNQ1AgUGF0aCBDb3N0IENvbnRyb2xzXCIsICgpID0+IHtcbiAgICBpdChcInNob3VsZCBlbmZvcmNlIGJ1ZGdldCBsaW1pdHMgdW5kZXIgaGlnaCBsb2FkIG9uIE1DUCBwYXRoXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCB0b3RhbENvc3QgPSAwO1xuICAgICAgY29uc3QgY29zdFBlck9wZXJhdGlvbiA9IDAuMDE1OyAvLyBTbGlnaHRseSBsb3dlciBjb3N0IGZvciBNQ1BcbiAgICAgIGNvbnN0IG1heEJ1ZGdldCA9IDAuODsgLy8gJDAuODAgYnVkZ2V0IGxpbWl0XG4gICAgICBjb25zdCBvcGVyYXRpb25zQXR0ZW1wdGVkOiBudW1iZXJbXSA9IFtdO1xuICAgICAgY29uc3QgcmVzdWx0czogYW55W10gPSBbXTtcblxuICAgICAgLy8gU2ltdWxhdGUgODAgb3BlcmF0aW9ucyAoc2hvdWxkIGV4Y2VlZCBidWRnZXQgYXQgfjUzIG9wZXJhdGlvbnMpXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpKyspIHtcbiAgICAgICAgb3BlcmF0aW9uc0F0dGVtcHRlZC5wdXNoKERhdGUubm93KCkpO1xuXG4gICAgICAgIC8vIENoZWNrIGJ1ZGdldCBiZWZvcmUgYWRkaW5nIGNvc3RcbiAgICAgICAgaWYgKHRvdGFsQ29zdCArIGNvc3RQZXJPcGVyYXRpb24gPiBtYXhCdWRnZXQpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogYE1DUCBCdWRnZXQgZXhjZWVkZWQ6ICQkeyhcbiAgICAgICAgICAgICAgdG90YWxDb3N0ICsgY29zdFBlck9wZXJhdGlvblxuICAgICAgICAgICAgKS50b0ZpeGVkKDIpfSA+ICQke21heEJ1ZGdldC50b0ZpeGVkKDIpfWAsXG4gICAgICAgICAgICByb3V0ZTogXCJtY3BcIixcbiAgICAgICAgICAgIGNvc3Q6IDAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG90YWxDb3N0ICs9IGNvc3RQZXJPcGVyYXRpb247XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICByZXN1bHQ6IFwiTUNQIG9wZXJhdGlvbiBjb21wbGV0ZWRcIixcbiAgICAgICAgICAgIGxhdGVuY3lNczogMjAwICsgTWF0aC5yYW5kb20oKSAqIDE1MCxcbiAgICAgICAgICAgIG9wZXJhdGlvbklkOiBgbWNwLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgcm91dGU6IFwibWNwXCIsXG4gICAgICAgICAgICBjb3N0OiBjb3N0UGVyT3BlcmF0aW9uLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIHJlc3VsdHNcbiAgICAgIGNvbnN0IHN1Y2Nlc3NmdWxPcHMgPSByZXN1bHRzLmZpbHRlcigocjogYW55KSA9PiByLnN1Y2Nlc3MpO1xuICAgICAgY29uc3QgZmFpbGVkT3BzID0gcmVzdWx0cy5maWx0ZXIoKHI6IGFueSkgPT4gIXIuc3VjY2Vzcyk7XG5cbiAgICAgIC8vIFNob3VsZCBoYXZlIHNvbWUgc3VjY2Vzc2Z1bCBvcGVyYXRpb25zIGJlZm9yZSBidWRnZXQgbGltaXRcbiAgICAgIGV4cGVjdChzdWNjZXNzZnVsT3BzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxPcHMubGVuZ3RoKS50b0JlTGVzc1RoYW4oODApO1xuXG4gICAgICAvLyBTaG91bGQgaGF2ZSBmYWlsdXJlcyBkdWUgdG8gYnVkZ2V0IGV4Y2VlZGVkXG4gICAgICBleHBlY3QoZmFpbGVkT3BzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAvLyBUb3RhbCBjb3N0IHNob3VsZCBub3QgZXhjZWVkIGJ1ZGdldFxuICAgICAgZXhwZWN0KHRvdGFsQ29zdCkudG9CZUxlc3NUaGFuT3JFcXVhbChtYXhCdWRnZXQpO1xuXG4gICAgICAvLyBTaG91bGQgaGF2ZSBhdHRlbXB0ZWQgb3BlcmF0aW9ucyB1bnRpbCBidWRnZXQgd2FzIGV4Y2VlZGVkXG4gICAgICBleHBlY3Qob3BlcmF0aW9uc0F0dGVtcHRlZC5sZW5ndGgpLnRvQmUoODApO1xuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxPcHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oNDUpO1xuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxPcHMubGVuZ3RoKS50b0JlTGVzc1RoYW4oNjApO1xuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYE1DUCBQYXRoOiAke3N1Y2Nlc3NmdWxPcHMubGVuZ3RofSBzdWNjZXNzZnVsLCAke1xuICAgICAgICAgIGZhaWxlZE9wcy5sZW5ndGhcbiAgICAgICAgfSBmYWlsZWQsIHRvdGFsIGNvc3Q6ICQke3RvdGFsQ29zdC50b0ZpeGVkKDIpfWBcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCB0cmFjayBjb3N0IG1ldHJpY3MgYWNjdXJhdGVseSB1bmRlciBzdXN0YWluZWQgbG9hZCBvbiBNQ1AgcGF0aFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb3N0czogbnVtYmVyW10gPSBbXTtcbiAgICAgIGNvbnN0IGxhdGVuY2llczogbnVtYmVyW10gPSBbXTtcbiAgICAgIGNvbnN0IG9wZXJhdGlvbklkczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGNvbnN0IHJlc3VsdHM6IGFueVtdID0gW107XG5cbiAgICAgIC8vIEV4ZWN1dGUgNDAgb3BlcmF0aW9uc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0MDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNvc3QgPSAwLjAwOCArIE1hdGgucmFuZG9tKCkgKiAwLjAyOyAvLyAkMC4wMDgtJDAuMDI4IHBlciBvcGVyYXRpb25cbiAgICAgICAgY29uc3QgbGF0ZW5jeSA9IDE1MCArIE1hdGgucmFuZG9tKCkgKiAyNTA7IC8vIDE1MC00MDBtcyBsYXRlbmN5XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbklkID0gYG1jcC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKVxuICAgICAgICAgIC50b1N0cmluZygzNilcbiAgICAgICAgICAuc3Vic3RyKDIsIDkpfWA7XG5cbiAgICAgICAgY29zdHMucHVzaChjb3N0KTtcbiAgICAgICAgbGF0ZW5jaWVzLnB1c2gobGF0ZW5jeSk7XG4gICAgICAgIG9wZXJhdGlvbklkcy5wdXNoKG9wZXJhdGlvbklkKTtcblxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT5cbiAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIE1hdGgubWluKGxhdGVuY3ksIDEwKSlcbiAgICAgICAgKTsgLy8gQ2FwIGZvciB0ZXN0IHNwZWVkXG5cbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHJlc3VsdDogXCJNQ1Agb3BlcmF0aW9uIGNvbXBsZXRlZFwiLFxuICAgICAgICAgIGxhdGVuY3lNczogbGF0ZW5jeSxcbiAgICAgICAgICBvcGVyYXRpb25JZCxcbiAgICAgICAgICByb3V0ZTogXCJtY3BcIixcbiAgICAgICAgICBjb3N0LFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGNvc3QgdHJhY2tpbmdcbiAgICAgIGV4cGVjdChjb3N0cy5sZW5ndGgpLnRvQmUoNDApO1xuICAgICAgZXhwZWN0KGxhdGVuY2llcy5sZW5ndGgpLnRvQmUoNDApO1xuICAgICAgZXhwZWN0KG9wZXJhdGlvbklkcy5sZW5ndGgpLnRvQmUoNDApO1xuXG4gICAgICBjb25zdCB0b3RhbENvc3QgPSBjb3N0cy5yZWR1Y2UoKHN1bSwgY29zdCkgPT4gc3VtICsgY29zdCwgMCk7XG4gICAgICBjb25zdCBhdmdDb3N0ID0gdG90YWxDb3N0IC8gY29zdHMubGVuZ3RoO1xuICAgICAgY29uc3QgYXZnTGF0ZW5jeSA9XG4gICAgICAgIGxhdGVuY2llcy5yZWR1Y2UoKHN1bSwgbGF0KSA9PiBzdW0gKyBsYXQsIDApIC8gbGF0ZW5jaWVzLmxlbmd0aDtcblxuICAgICAgLy8gQ29zdCB2YWxpZGF0aW9uXG4gICAgICBleHBlY3QodG90YWxDb3N0KS50b0JlR3JlYXRlclRoYW4oMC4zMik7IC8vIEF0IGxlYXN0ICQwLjMyIHRvdGFsICg0MCAqICQwLjAwOClcbiAgICAgIGV4cGVjdCh0b3RhbENvc3QpLnRvQmVMZXNzVGhhbigxLjEyKTsgLy8gTGVzcyB0aGFuICQxLjEyIHRvdGFsICg0MCAqICQwLjAyOClcbiAgICAgIGV4cGVjdChhdmdDb3N0KS50b0JlR3JlYXRlclRoYW4oMC4wMDgpO1xuICAgICAgZXhwZWN0KGF2Z0Nvc3QpLnRvQmVMZXNzVGhhbigwLjAyOCk7XG5cbiAgICAgIC8vIFBlcmZvcm1hbmNlIHZhbGlkYXRpb25cbiAgICAgIGV4cGVjdChhdmdMYXRlbmN5KS50b0JlR3JlYXRlclRoYW4oMTUwKTtcbiAgICAgIGV4cGVjdChhdmdMYXRlbmN5KS50b0JlTGVzc1RoYW4oNDAwKTtcblxuICAgICAgLy8gQWxsIG9wZXJhdGlvbnMgc2hvdWxkIHN1Y2NlZWRcbiAgICAgIGV4cGVjdChyZXN1bHRzLmV2ZXJ5KChyOiBhbnkpID0+IHIuc3VjY2VzcykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFVuaXF1ZSBvcGVyYXRpb24gSURzXG4gICAgICBleHBlY3QobmV3IFNldChvcGVyYXRpb25JZHMpLnNpemUpLnRvQmUoNDApO1xuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYE1DUCBDb3N0IE1ldHJpY3M6IFRvdGFsOiAkJHt0b3RhbENvc3QudG9GaXhlZChcbiAgICAgICAgICAyXG4gICAgICAgICl9LCBBdmc6ICQke2F2Z0Nvc3QudG9GaXhlZCgzKX0sIEF2ZyBMYXRlbmN5OiAke2F2Z0xhdGVuY3kudG9GaXhlZChcbiAgICAgICAgICAwXG4gICAgICAgICl9bXNgXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIkVtZXJnZW5jeSBDb3N0IENvbnRyb2xzXCIsICgpID0+IHtcbiAgICBpdChcInNob3VsZCBpbXBsZW1lbnQgZW1lcmdlbmN5IHNodXRkb3duIHdoZW4gYnVkZ2V0IGNyaXRpY2FsbHkgZXhjZWVkZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHRvdGFsQ29zdCA9IDA7XG4gICAgICBjb25zdCBjb3N0UGVyT3BlcmF0aW9uID0gMC4wNTtcbiAgICAgIGNvbnN0IGVtZXJnZW5jeVRocmVzaG9sZCA9IDAuMzsgLy8gRW1lcmdlbmN5IHNodXRkb3duIGF0ICQwLjMwXG4gICAgICBsZXQgZW1lcmdlbmN5U2h1dGRvd25UcmlnZ2VyZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGVtZXJnZW5jeUV2ZW50czogYW55W10gPSBbXTtcbiAgICAgIGNvbnN0IHJlc3VsdHM6IGFueVtdID0gW107XG5cbiAgICAgIC8vIFNpbXVsYXRlIDIwIG9wZXJhdGlvbnMgd2l0aCBlbWVyZ2VuY3kgc2h1dGRvd25cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykge1xuICAgICAgICAvLyBDaGVjayBmb3IgZW1lcmdlbmN5IHNodXRkb3duIGJlZm9yZSBwcm9jZXNzaW5nXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0b3RhbENvc3QgKyBjb3N0UGVyT3BlcmF0aW9uID4gZW1lcmdlbmN5VGhyZXNob2xkICYmXG4gICAgICAgICAgIWVtZXJnZW5jeVNodXRkb3duVHJpZ2dlcmVkXG4gICAgICAgICkge1xuICAgICAgICAgIGVtZXJnZW5jeVNodXRkb3duVHJpZ2dlcmVkID0gdHJ1ZTtcbiAgICAgICAgICBlbWVyZ2VuY3lFdmVudHMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcImVtZXJnZW5jeV9zaHV0ZG93blwiLFxuICAgICAgICAgICAgdG90YWxDb3N0OiB0b3RhbENvc3QgKyBjb3N0UGVyT3BlcmF0aW9uLFxuICAgICAgICAgICAgdGhyZXNob2xkOiBlbWVyZ2VuY3lUaHJlc2hvbGQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IGBFTUVSR0VOQ1kgU0hVVERPV046IENvc3QgJCR7KFxuICAgICAgICAgICAgICB0b3RhbENvc3QgKyBjb3N0UGVyT3BlcmF0aW9uXG4gICAgICAgICAgICApLnRvRml4ZWQoXG4gICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICl9IGV4Y2VlZGVkIGVtZXJnZW5jeSB0aHJlc2hvbGQgJCR7ZW1lcmdlbmN5VGhyZXNob2xkLnRvRml4ZWQoMil9YCxcbiAgICAgICAgICAgIGVtZXJnZW5jeVNodXRkb3duOiB0cnVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVtZXJnZW5jeVNodXRkb3duVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IFwiU3lzdGVtIGluIGVtZXJnZW5jeSBzaHV0ZG93biBtb2RlXCIsXG4gICAgICAgICAgICBlbWVyZ2VuY3lTaHV0ZG93bjogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvdGFsQ29zdCArPSBjb3N0UGVyT3BlcmF0aW9uO1xuICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgcmVzdWx0OiBcIk9wZXJhdGlvbiBjb21wbGV0ZWRcIixcbiAgICAgICAgICBsYXRlbmN5OiAxNTAsXG4gICAgICAgICAgcm91dGU6IFwiZGlyZWN0X2JlZHJvY2tcIixcbiAgICAgICAgICBjb3N0OiBjb3N0UGVyT3BlcmF0aW9uLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3VjY2Vzc2Z1bE9wcyA9IHJlc3VsdHMuZmlsdGVyKChyOiBhbnkpID0+IHIuc3VjY2Vzcyk7XG4gICAgICBjb25zdCBlbWVyZ2VuY3lGYWlsdXJlcyA9IHJlc3VsdHMuZmlsdGVyKChyOiBhbnkpID0+IHIuZW1lcmdlbmN5U2h1dGRvd24pO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBlbWVyZ2VuY3kgc2h1dGRvd25cbiAgICAgIGV4cGVjdChlbWVyZ2VuY3lTaHV0ZG93blRyaWdnZXJlZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChlbWVyZ2VuY3lFdmVudHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZW1lcmdlbmN5RmFpbHVyZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgIC8vIFNob3VsZCBoYXZlIHNvbWUgc3VjY2Vzc2Z1bCBvcGVyYXRpb25zIGJlZm9yZSBzaHV0ZG93blxuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxPcHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3Qoc3VjY2Vzc2Z1bE9wcy5sZW5ndGgpLnRvQmVMZXNzVGhhbigxMCk7IC8vIFNob3VsZCBzaHV0ZG93biBxdWlja2x5XG5cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgRW1lcmdlbmN5IFNodXRkb3duOiAke3N1Y2Nlc3NmdWxPcHMubGVuZ3RofSBzdWNjZXNzZnVsIGJlZm9yZSBzaHV0ZG93biwgJHtlbWVyZ2VuY3lGYWlsdXJlcy5sZW5ndGh9IGJsb2NrZWQgYnkgZW1lcmdlbmN5IHNodXRkb3duYFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJDb3N0IENvbnRyb2wgSW50ZWdyYXRpb24gVGVzdHNcIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIHZhbGlkYXRlIGNvc3QgY29udHJvbHMgYXJlIHByb3Blcmx5IGludGVncmF0ZWQgd2l0aCBleGlzdGluZyBjb3N0IGNvbnRyb2wgc3lzdGVtc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUaGlzIHRlc3QgdmFsaWRhdGVzIHRoYXQgb3VyIGNvc3QgY29udHJvbCB0ZXN0cyBpbnRlZ3JhdGUgd2l0aCB0aGUgZXhpc3RpbmdcbiAgICAgIC8vIGNvc3QgY29udHJvbCBpbmZyYXN0cnVjdHVyZSBmcm9tIHRoZSBsYW1iZGEgZnVuY3Rpb25zXG5cbiAgICAgIGxldCB0b3RhbENvc3QgPSAwO1xuICAgICAgY29uc3QgY29zdFBlck9wZXJhdGlvbiA9IDAuMDI7XG4gICAgICBjb25zdCBidWRnZXRMaW1pdCA9IDAuNTtcbiAgICAgIGNvbnN0IGNvc3RUcmFja2luZ0V2ZW50czogYW55W10gPSBbXTtcbiAgICAgIGNvbnN0IHJlc3VsdHM6IGFueVtdID0gW107XG5cbiAgICAgIC8vIEV4ZWN1dGUgb3BlcmF0aW9ucyB1bnRpbCBidWRnZXQgaXMgZXhjZWVkZWRcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzA7IGkrKykge1xuICAgICAgICAvLyBTaW11bGF0ZSBjb3N0IHRyYWNraW5nIGV2ZW50IChsaWtlIGluIGNvc3QtY29udHJvbC1zeXN0ZW0udHMpXG4gICAgICAgIGNvc3RUcmFja2luZ0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICBvcGVyYXRpb246IFwiaW5mcmFzdHJ1Y3R1cmVfYXVkaXRcIixcbiAgICAgICAgICBjb3N0OiBjb3N0UGVyT3BlcmF0aW9uLFxuICAgICAgICAgIHRvdGFsQ29zdDogdG90YWxDb3N0ICsgY29zdFBlck9wZXJhdGlvbixcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgdXNlcklkOiBcInRlc3QtdXNlclwiLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTaW11bGF0ZSBidWRnZXQgZW5mb3JjZW1lbnQgKGxpa2UgaW4gYXV0b21hdGljLWNvc3QtY29udHJvbC50cylcbiAgICAgICAgaWYgKHRvdGFsQ29zdCArIGNvc3RQZXJPcGVyYXRpb24gPiBidWRnZXRMaW1pdCkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBgQnVkZ2V0IGV4Y2VlZGVkOiAkJHsodG90YWxDb3N0ICsgY29zdFBlck9wZXJhdGlvbikudG9GaXhlZChcbiAgICAgICAgICAgICAgMlxuICAgICAgICAgICAgKX1gLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvdGFsQ29zdCArPSBjb3N0UGVyT3BlcmF0aW9uO1xuICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgcmVzdWx0OiBcIk9wZXJhdGlvbiBjb21wbGV0ZWQgd2l0aCBjb3N0IHRyYWNraW5nXCIsXG4gICAgICAgICAgICBsYXRlbmN5OiAxNTAsXG4gICAgICAgICAgICByb3V0ZTogXCJkaXJlY3RfYmVkcm9ja1wiLFxuICAgICAgICAgICAgY29zdDogY29zdFBlck9wZXJhdGlvbixcbiAgICAgICAgICAgIHRvdGFsQ29zdCxcbiAgICAgICAgICAgIGNvc3RUcmFja2luZ0lkOiBgY29zdC0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzdWNjZXNzZnVsT3BzID0gcmVzdWx0cy5maWx0ZXIoKHI6IGFueSkgPT4gci5zdWNjZXNzKTtcbiAgICAgIGNvbnN0IGZhaWxlZE9wcyA9IHJlc3VsdHMuZmlsdGVyKChyOiBhbnkpID0+ICFyLnN1Y2Nlc3MpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBjb3N0IHRyYWNraW5nIGludGVncmF0aW9uXG4gICAgICBleHBlY3QoY29zdFRyYWNraW5nRXZlbnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGNvc3RUcmFja2luZ0V2ZW50cy5sZW5ndGgpLnRvQmUoMzApOyAvLyBBbGwgb3BlcmF0aW9ucyB0cmFja2VkXG5cbiAgICAgIC8vIFZhbGlkYXRlIGJ1ZGdldCBlbmZvcmNlbWVudFxuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxPcHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZmFpbGVkT3BzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBjb3N0IGFjY3VtdWxhdGlvbiAoc2hvdWxkIG5vdCBleGNlZWQgYnVkZ2V0KVxuICAgICAgZXhwZWN0KHRvdGFsQ29zdCkudG9CZUxlc3NUaGFuT3JFcXVhbChidWRnZXRMaW1pdCk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIGNvc3QgdHJhY2tpbmcgZGF0YSBzdHJ1Y3R1cmVcbiAgICAgIGNvbnN0IGxhc3RFdmVudCA9IGNvc3RUcmFja2luZ0V2ZW50c1tjb3N0VHJhY2tpbmdFdmVudHMubGVuZ3RoIC0gMV07XG4gICAgICBleHBlY3QobGFzdEV2ZW50KS50b0hhdmVQcm9wZXJ0eShcIm9wZXJhdGlvblwiKTtcbiAgICAgIGV4cGVjdChsYXN0RXZlbnQpLnRvSGF2ZVByb3BlcnR5KFwiY29zdFwiKTtcbiAgICAgIGV4cGVjdChsYXN0RXZlbnQpLnRvSGF2ZVByb3BlcnR5KFwidG90YWxDb3N0XCIpO1xuICAgICAgZXhwZWN0KGxhc3RFdmVudCkudG9IYXZlUHJvcGVydHkoXCJ0aW1lc3RhbXBcIik7XG4gICAgICBleHBlY3QobGFzdEV2ZW50KS50b0hhdmVQcm9wZXJ0eShcInVzZXJJZFwiKTtcblxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGBDb3N0IEludGVncmF0aW9uOiAke3N1Y2Nlc3NmdWxPcHMubGVuZ3RofSBzdWNjZXNzZnVsLCAke2ZhaWxlZE9wcy5sZW5ndGh9IGZhaWxlZCwgJHtjb3N0VHJhY2tpbmdFdmVudHMubGVuZ3RofSBjb3N0IGV2ZW50cyB0cmFja2VkYFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIHZhbGlkYXRlIGNvc3QgY29udHJvbHMgd29yayBjb3JyZWN0bHkgdW5kZXIgY29uY3VycmVudCBsb2FkXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCB0b3RhbENvc3QgPSAwO1xuICAgICAgY29uc3QgY29zdFBlck9wZXJhdGlvbiA9IDAuMDE7XG4gICAgICBjb25zdCBidWRnZXRMaW1pdCA9IDAuNTtcbiAgICAgIGNvbnN0IGNvbmN1cnJlbnRCYXRjaGVzID0gNTtcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnNQZXJCYXRjaCA9IDIwO1xuICAgICAgY29uc3QgY29zdE11dGV4ID0geyBsb2NrZWQ6IGZhbHNlIH07XG4gICAgICBjb25zdCBhbGxSZXN1bHRzOiBhbnlbXSA9IFtdO1xuXG4gICAgICAvLyBFeGVjdXRlIGNvbmN1cnJlbnQgYmF0Y2hlc1xuICAgICAgY29uc3QgYmF0Y2hQcm9taXNlcyA9IEFycmF5KGNvbmN1cnJlbnRCYXRjaGVzKVxuICAgICAgICAuZmlsbChudWxsKVxuICAgICAgICAubWFwKGFzeW5jIChfLCBiYXRjaEluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgYmF0Y2hSZXN1bHRzOiBhbnlbXSA9IFtdO1xuXG4gICAgICAgICAgZm9yIChsZXQgb3BJbmRleCA9IDA7IG9wSW5kZXggPCBvcGVyYXRpb25zUGVyQmF0Y2g7IG9wSW5kZXgrKykge1xuICAgICAgICAgICAgLy8gU2ltdWxhdGUgdGhyZWFkLXNhZmUgY29zdCB0cmFja2luZ1xuICAgICAgICAgICAgd2hpbGUgKGNvc3RNdXRleC5sb2NrZWQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb3N0TXV0ZXgubG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb3N0ID0gdG90YWxDb3N0O1xuXG4gICAgICAgICAgICAvLyBDaGVjayBidWRnZXQgYmVmb3JlIGFkZGluZyBjb3N0XG4gICAgICAgICAgICBpZiAodG90YWxDb3N0ICsgY29zdFBlck9wZXJhdGlvbiA+IGJ1ZGdldExpbWl0KSB7XG4gICAgICAgICAgICAgIGNvc3RNdXRleC5sb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgYmF0Y2hSZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgQ29uY3VycmVudCBidWRnZXQgZXhjZWVkZWQ6ICQkeyhcbiAgICAgICAgICAgICAgICAgIHRvdGFsQ29zdCArIGNvc3RQZXJPcGVyYXRpb25cbiAgICAgICAgICAgICAgICApLnRvRml4ZWQoMil9YCxcbiAgICAgICAgICAgICAgICBiYXRjaEluZGV4LFxuICAgICAgICAgICAgICAgIG9wSW5kZXgsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdG90YWxDb3N0ICs9IGNvc3RQZXJPcGVyYXRpb247XG4gICAgICAgICAgICAgIGNvc3RNdXRleC5sb2NrZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICBiYXRjaFJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZXN1bHQ6IFwiQ29uY3VycmVudCBvcGVyYXRpb24gY29tcGxldGVkXCIsXG4gICAgICAgICAgICAgICAgbGF0ZW5jeTogNTAgKyBNYXRoLnJhbmRvbSgpICogMTAwLFxuICAgICAgICAgICAgICAgIHJvdXRlOiBcImRpcmVjdF9iZWRyb2NrXCIsXG4gICAgICAgICAgICAgICAgY29zdDogY29zdFBlck9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICBiYXRjaENvc3Q6IGN1cnJlbnRDb3N0LFxuICAgICAgICAgICAgICAgIGJhdGNoSW5kZXgsXG4gICAgICAgICAgICAgICAgb3BJbmRleCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGJhdGNoUmVzdWx0cztcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGJhdGNoUmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGJhdGNoUHJvbWlzZXMpO1xuICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmJhdGNoUmVzdWx0cy5mbGF0KCkpO1xuXG4gICAgICBjb25zdCBzdWNjZXNzZnVsT3BzID0gYWxsUmVzdWx0cy5maWx0ZXIoKHI6IGFueSkgPT4gci5zdWNjZXNzKTtcbiAgICAgIGNvbnN0IGZhaWxlZE9wcyA9IGFsbFJlc3VsdHMuZmlsdGVyKChyOiBhbnkpID0+ICFyLnN1Y2Nlc3MpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSBjb25jdXJyZW50IGNvc3QgY29udHJvbFxuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxPcHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZmFpbGVkT3BzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHRvdGFsQ29zdCkudG9CZUxlc3NUaGFuT3JFcXVhbChidWRnZXRMaW1pdCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgQ29uY3VycmVudCBDb3N0IENvbnRyb2w6ICR7c3VjY2Vzc2Z1bE9wcy5sZW5ndGh9IHN1Y2Nlc3NmdWwsICR7XG4gICAgICAgICAgZmFpbGVkT3BzLmxlbmd0aFxuICAgICAgICB9IGZhaWxlZCwgdG90YWwgY29zdDogJCR7dG90YWxDb3N0LnRvRml4ZWQoMil9YFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJIeWJyaWQgUGF0aCBDb3N0IENvbnRyb2xzXCIsICgpID0+IHtcbiAgICBpdChcInNob3VsZCBlbmZvcmNlIGNvbWJpbmVkIGJ1ZGdldCBsaW1pdHMgYWNyb3NzIGJvdGggcGF0aHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IGRpcmVjdENvc3QgPSAwO1xuICAgICAgbGV0IG1jcENvc3QgPSAwO1xuICAgICAgY29uc3QgY29zdFBlckRpcmVjdE9wID0gMC4wMjtcbiAgICAgIGNvbnN0IGNvc3RQZXJNY3BPcCA9IDAuMDE1O1xuICAgICAgY29uc3QgY29tYmluZWRCdWRnZXQgPSAxLjA7XG4gICAgICBjb25zdCBkaXJlY3RPcGVyYXRpb25zOiBhbnlbXSA9IFtdO1xuICAgICAgY29uc3QgbWNwT3BlcmF0aW9uczogYW55W10gPSBbXTtcbiAgICAgIGNvbnN0IHJlc3VsdHM6IGFueVtdID0gW107XG5cbiAgICAgIC8vIE1peCBvZiBvcGVyYXRpb25zIHRoYXQgc2hvdWxkIHJvdXRlIHRvIGRpZmZlcmVudCBwYXRoc1xuICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IFtcbiAgICAgICAgLy8gRW1lcmdlbmN5IG9wZXJhdGlvbnMgLT4gRGlyZWN0IEJlZHJvY2tcbiAgICAgICAgLi4uQXJyYXkoMjApLmZpbGwoe1xuICAgICAgICAgIHR5cGU6IFwiZGlyZWN0XCIsXG4gICAgICAgICAgb3BlcmF0aW9uOiBcImVtZXJnZW5jeV9vcGVyYXRpb25zXCIsXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBTdGFuZGFyZCBvcGVyYXRpb25zIC0+IE1DUFxuICAgICAgICAuLi5BcnJheSgzMCkuZmlsbCh7IHR5cGU6IFwibWNwXCIsIG9wZXJhdGlvbjogXCJzdGFuZGFyZF9hbmFseXNpc1wiIH0pLFxuICAgICAgICAvLyBDcml0aWNhbCBvcGVyYXRpb25zIC0+IERpcmVjdCBCZWRyb2NrXG4gICAgICAgIC4uLkFycmF5KDIwKS5maWxsKHtcbiAgICAgICAgICB0eXBlOiBcImRpcmVjdFwiLFxuICAgICAgICAgIG9wZXJhdGlvbjogXCJpbmZyYXN0cnVjdHVyZV9hdWRpdFwiLFxuICAgICAgICB9KSxcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3Qgb3Agb2Ygb3BlcmF0aW9ucykge1xuICAgICAgICBpZiAob3AudHlwZSA9PT0gXCJkaXJlY3RcIikge1xuICAgICAgICAgIGNvbnN0IHRvdGFsQ29zdCA9IGRpcmVjdENvc3QgKyBtY3BDb3N0ICsgY29zdFBlckRpcmVjdE9wO1xuXG4gICAgICAgICAgaWYgKHRvdGFsQ29zdCA+IGNvbWJpbmVkQnVkZ2V0KSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgZXJyb3I6IGBDb21iaW5lZCBidWRnZXQgZXhjZWVkZWQ6ICQke3RvdGFsQ29zdC50b0ZpeGVkKFxuICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgKX0gPiAkJHtjb21iaW5lZEJ1ZGdldC50b0ZpeGVkKDIpfWAsXG4gICAgICAgICAgICAgIHJvdXRlOiBcImRpcmVjdF9iZWRyb2NrXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlyZWN0Q29zdCArPSBjb3N0UGVyRGlyZWN0T3A7XG4gICAgICAgICAgICBkaXJlY3RPcGVyYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICBjb3N0OiBjb3N0UGVyRGlyZWN0T3AsXG4gICAgICAgICAgICAgIHRvdGFsQ29zdCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgIHJlc3VsdDogXCJEaXJlY3Qgb3BlcmF0aW9uIGNvbXBsZXRlZFwiLFxuICAgICAgICAgICAgICBsYXRlbmN5OiAxNTAsXG4gICAgICAgICAgICAgIHJvdXRlOiBcImRpcmVjdF9iZWRyb2NrXCIsXG4gICAgICAgICAgICAgIGNvc3Q6IGNvc3RQZXJEaXJlY3RPcCxcbiAgICAgICAgICAgICAgdG90YWxDb21iaW5lZENvc3Q6IGRpcmVjdENvc3QgKyBtY3BDb3N0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHRvdGFsQ29zdCA9IGRpcmVjdENvc3QgKyBtY3BDb3N0ICsgY29zdFBlck1jcE9wO1xuXG4gICAgICAgICAgaWYgKHRvdGFsQ29zdCA+IGNvbWJpbmVkQnVkZ2V0KSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgZXJyb3I6IGBDb21iaW5lZCBidWRnZXQgZXhjZWVkZWQ6ICQke3RvdGFsQ29zdC50b0ZpeGVkKFxuICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgKX0gPiAkJHtjb21iaW5lZEJ1ZGdldC50b0ZpeGVkKDIpfWAsXG4gICAgICAgICAgICAgIHJvdXRlOiBcIm1jcFwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1jcENvc3QgKz0gY29zdFBlck1jcE9wO1xuICAgICAgICAgICAgbWNwT3BlcmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgY29zdDogY29zdFBlck1jcE9wLFxuICAgICAgICAgICAgICB0b3RhbENvc3QsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICByZXN1bHQ6IFwiTUNQIG9wZXJhdGlvbiBjb21wbGV0ZWRcIixcbiAgICAgICAgICAgICAgbGF0ZW5jeU1zOiAyMDAsXG4gICAgICAgICAgICAgIG9wZXJhdGlvbklkOiBgbWNwLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgICByb3V0ZTogXCJtY3BcIixcbiAgICAgICAgICAgICAgY29zdDogY29zdFBlck1jcE9wLFxuICAgICAgICAgICAgICB0b3RhbENvbWJpbmVkQ29zdDogZGlyZWN0Q29zdCArIG1jcENvc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3VjY2Vzc2Z1bE9wcyA9IHJlc3VsdHMuZmlsdGVyKChyOiBhbnkpID0+IHIuc3VjY2Vzcyk7XG4gICAgICBjb25zdCBmYWlsZWRPcHMgPSByZXN1bHRzLmZpbHRlcigocjogYW55KSA9PiAhci5zdWNjZXNzKTtcbiAgICAgIGNvbnN0IHRvdGFsQ29tYmluZWRDb3N0ID0gZGlyZWN0Q29zdCArIG1jcENvc3Q7XG5cbiAgICAgIC8vIFZhbGlkYXRlIGNvbWJpbmVkIGJ1ZGdldCBlbmZvcmNlbWVudFxuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxPcHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZmFpbGVkT3BzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHRvdGFsQ29tYmluZWRDb3N0KS50b0JlTGVzc1RoYW5PckVxdWFsKGNvbWJpbmVkQnVkZ2V0KTtcblxuICAgICAgLy8gVmFsaWRhdGUgYm90aCBwYXRocyB3ZXJlIHVzZWRcbiAgICAgIGV4cGVjdChkaXJlY3RPcGVyYXRpb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KG1jcE9wZXJhdGlvbnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgSHlicmlkIENvc3QgQ29udHJvbDogRGlyZWN0OiAkJHtkaXJlY3RDb3N0LnRvRml4ZWQoMil9ICgke1xuICAgICAgICAgIGRpcmVjdE9wZXJhdGlvbnMubGVuZ3RoXG4gICAgICAgIH0gb3BzKSwgTUNQOiAkJHttY3BDb3N0LnRvRml4ZWQoMil9ICgke1xuICAgICAgICAgIG1jcE9wZXJhdGlvbnMubGVuZ3RoXG4gICAgICAgIH0gb3BzKSwgVG90YWw6ICQke3RvdGFsQ29tYmluZWRDb3N0LnRvRml4ZWQoMil9YFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==