{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.211.0"},"children":{"MatbakhVcStack":{"id":"MatbakhVcStack","path":"MatbakhVcStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.211.0"},"children":{"WebBucket":{"id":"WebBucket","path":"MatbakhVcStack/WebBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/WebBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}},"Policy":{"id":"Policy","path":"MatbakhVcStack/WebBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"<REDACTED_AWS_SECRET_ACCESS_KEY>","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebBucket12880F5B"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:aws:cloudfront::055062860590:distribution/",{"Ref":"WebDistro6266C15A"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"WebCert":{"id":"WebCert","path":"MatbakhVcStack/WebCert","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":[]}},"WebOAC":{"id":"WebOAC","path":"MatbakhVcStack/WebOAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"MatbakhWebOAC-MatbakhVcStack","description":"SigV4 access to S3 origin","originAccessControlOriginType":"s3","signingBehavior":"always","signingProtocol":"sigv4"}}}},"RedirectToWwwFn":{"id":"RedirectToWwwFn","path":"MatbakhVcStack/RedirectToWwwFn","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Function","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/RedirectToWwwFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Function","aws:cdk:cloudformation:props":{"autoPublish":true,"functionCode":"function handler(event) {\n  var req = event.request;\n  var host = (req.headers && req.headers.host && req.headers.host.value) || '';\n  if (host === 'matbakh.app') {\n    var qs = '';\n    var q = req.querystring;\n    if (q && typeof q === 'object') {\n      var parts = [];\n      for (var k in q) {\n        if (Object.prototype.hasOwnProperty.call(q, k)) {\n          var v = (q[k] && q[k].value) ? q[k].value : '';\n          parts.push(k + (v ? '=' + v : ''));\n        }\n      }\n      if (parts.length) qs = '?' + parts.join('&');\n    }\n    return {\n      statusCode: 301,\n      statusDescription: 'Moved Permanently',\n      headers: { location: { value: 'https://www.matbakh.app' + req.uri + qs } }\n    };\n  }\n  return req;\n}","functionConfig":{"comment":"redirect-to-www-MatbakhVcStack","runtime":"cloudfront-js-1.0"},"name":"redirect-to-www-MatbakhVcStack"}}}}},"WebDistro":{"id":"WebDistro","path":"MatbakhVcStack/WebDistro","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.211.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"MatbakhVcStack/WebDistro/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"MatbakhVcStack/WebDistro/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebBucket12880F5B","RegionalDomainName"]},"id":"MatbakhVcStackWebDistroOrigin1DA2D7BEA","s3OriginConfig":{"originAccessIdentity":""}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"MatbakhVcStackWebDistroOrigin1DA2D7BEA","allowedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"responseHeadersPolicyId":"67f7725c-6f97-4210-82d7-5512b31e9d03","viewerProtocolPolicy":"redirect-to-https","functionAssociations":[{"functionArn":{"Fn::GetAtt":["RedirectToWwwFn12C2FEA2","FunctionARN"]},"eventType":"viewer-request"}]},"aliases":["matbakh.app","www.matbakh.app"],"customErrorResponses":[{"errorCachingMinTtl":0,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":0,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"viewerCertificate":{"acmCertificateArn":"arn:aws:acm:us-east-1:055062860590:certificate/85327717-5a87-4d9b-a14b-c4eb0473fdfd","minimumProtocolVersion":"TLSv1.2_2021","sslSupportMethod":"sni-only"}}}}}}},"VcTokens":{"id":"VcTokens","path":"MatbakhVcStack/VcTokens","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/VcTokens/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"token_hash","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"token_hash","keyType":"HASH"}],"timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"MatbakhVcStack/VcTokens/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":[]}}}},"SesSuppressionImport":{"id":"SesSuppressionImport","path":"MatbakhVcStack/SesSuppressionImport","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.211.0","metadata":[]}},"VcStartFn":{"id":"VcStartFn","path":"MatbakhVcStack/VcStartFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.211.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MatbakhVcStack/VcStartFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MatbakhVcStack/VcStartFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":[]}},"Resource":{"id":"Resource","path":"MatbakhVcStack/VcStartFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MatbakhVcStack/VcStartFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/VcStartFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":["arn:aws:ses:eu-central-1:055062860590:identity/matbakh.app","arn:aws:ses:eu-central-1:055062860590:identity/mail@matbakh.app","arn:aws:ses:eu-central-1:055062860590:configuration-set/matbakh-default"]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["VcTokensA3253C71","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":dynamodb:eu-central-1:055062860590:table/SesSuppression"]]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"VcStartFnServiceRoleDefaultPolicy8C0048DA","roles":[{"Ref":"VcStartFnServiceRoleD81E4A8A"}]}}}}}}},"Code":{"id":"Code","path":"MatbakhVcStack/VcStartFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.211.0"},"children":{"Stage":{"id":"Stage","path":"MatbakhVcStack/VcStartFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"AssetBucket":{"id":"AssetBucket","path":"MatbakhVcStack/VcStartFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.211.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MatbakhVcStack/VcStartFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-055062860590-eu-central-1","s3Key":"3d9ccd1f596ae1200ac7184eb9c07880ab9a7642e52d1cce4e22476906963556.zip"},"environment":{"variables":{"CORS_ORIGINS":"https://matbakh.app,https://www.matbakh.app,https://d23vpl9r70m1vk.cloudfront.net,https://*.vercel.app,http://localhost:5173,http://127.0.0.1:5173,http://localhost:8080,http://127.0.0.1:8080","RESULT_URL":"https://matbakh.app/vc/result","DOI_FROM":"mail@matbakh.app","DDB_TABLE":{"Ref":"VcTokensA3253C71"},"SES_CONFIGURATION_SET":"matbakh-default","SEND_WELCOME":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["VcStartFnServiceRoleD81E4A8A","Arn"]},"runtime":"nodejs20.x","timeout":15}}}}},"VcConfirmFn":{"id":"VcConfirmFn","path":"MatbakhVcStack/VcConfirmFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.211.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MatbakhVcStack/VcConfirmFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MatbakhVcStack/VcConfirmFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":[]}},"Resource":{"id":"Resource","path":"MatbakhVcStack/VcConfirmFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MatbakhVcStack/VcConfirmFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/VcConfirmFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":["arn:aws:ses:eu-central-1:055062860590:identity/matbakh.app","arn:aws:ses:eu-central-1:055062860590:identity/mail@matbakh.app","arn:aws:ses:eu-central-1:055062860590:configuration-set/matbakh-default"]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["VcTokensA3253C71","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":dynamodb:eu-central-1:055062860590:table/SesSuppression"]]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"VcConfirmFnServiceRoleDefaultPolicy48F46A73","roles":[{"Ref":"VcConfirmFnServiceRole31653353"}]}}}}}}},"Code":{"id":"Code","path":"MatbakhVcStack/VcConfirmFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.211.0"},"children":{"Stage":{"id":"Stage","path":"MatbakhVcStack/VcConfirmFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"AssetBucket":{"id":"AssetBucket","path":"MatbakhVcStack/VcConfirmFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.211.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MatbakhVcStack/VcConfirmFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-055062860590-eu-central-1","s3Key":"6e8f2d6db14f78a6115f0a4837a018fd235564881d6827cbea850eb25015514c.zip"},"environment":{"variables":{"CORS_ORIGINS":"https://matbakh.app,https://www.matbakh.app,https://d23vpl9r70m1vk.cloudfront.net,https://*.vercel.app,http://localhost:5173,http://127.0.0.1:5173,http://localhost:8080,http://127.0.0.1:8080","RESULT_URL":"https://matbakh.app/vc/result","DOI_FROM":"mail@matbakh.app","DDB_TABLE":{"Ref":"VcTokensA3253C71"},"SES_CONFIGURATION_SET":"matbakh-default","SEND_WELCOME":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["VcConfirmFnServiceRole31653353","Arn"]},"runtime":"nodejs20.x","timeout":10}}}}},"PublicApi":{"id":"PublicApi","path":"MatbakhVcStack/PublicApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"PublicApi"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"MatbakhVcStack/PublicApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"MatbakhVcStack/PublicApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":[]}},"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"MatbakhVcStack/PublicApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["PublicApiCloudWatchRole8820E422","Arn"]}}}},"Deployment":{"id":"Deployment","path":"MatbakhVcStack/PublicApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"PublicApiC8293BC5"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"<REDACTED_AWS_SECRET_ACCESS_KEY>.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"<REDACTED_AWS_SECRET_ACCESS_KEY>.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"PublicApiDeployment375FE7FC2665b786d58c2480d5a008be95689f31"},"restApiId":{"Ref":"PublicApiC8293BC5"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"MatbakhVcStack/PublicApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"Default":{"id":"Default","path":"MatbakhVcStack/PublicApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.211.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"<REDACTED_AWS_SECRET_ACCESS_KEY>","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["PublicApiC8293BC5","RootResourceId"]},"restApiId":{"Ref":"PublicApiC8293BC5"}}}}}},"vc":{"id":"vc","path":"MatbakhVcStack/PublicApi/Default/vc","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Default/vc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["PublicApiC8293BC5","RootResourceId"]},"pathPart":"vc","restApiId":{"Ref":"PublicApiC8293BC5"}}}},"OPTIONS":{"id":"OPTIONS","path":"MatbakhVcStack/PublicApi/Default/vc/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Default/vc/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"PublicApivcBF018C5C"},"restApiId":{"Ref":"PublicApiC8293BC5"}}}}}},"start":{"id":"start","path":"MatbakhVcStack/PublicApi/Default/vc/start","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Default/vc/start/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"PublicApivcBF018C5C"},"pathPart":"start","restApiId":{"Ref":"PublicApiC8293BC5"}}}},"OPTIONS":{"id":"OPTIONS","path":"MatbakhVcStack/PublicApi/Default/vc/start/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Default/vc/start/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"PublicApivcstart14D2DB51"},"restApiId":{"Ref":"PublicApiC8293BC5"}}}}}},"POST":{"id":"POST","path":"MatbakhVcStack/PublicApi/Default/vc/start/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.211.0","metadata":[]},"children":{"ApiPermission.MatbakhVcStackPublicApiC89DF633.POST..vc.start":{"id":"ApiPermission.MatbakhVcStackPublicApiC89DF633.POST..vc.start","path":"MatbakhVcStack/PublicApi/Default/vc/start/POST/ApiPermission.MatbakhVcStackPublicApiC89DF633.POST..vc.start","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["VcStartFnC5BAD875","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-central-1:055062860590:",{"Ref":"PublicApiC8293BC5"},"/",{"Ref":"PublicApiDeploymentStageprod67D5A370"},"/POST/vc/start"]]}}}},"ApiPermission.Test.MatbakhVcStackPublicApiC89DF633.POST..vc.start":{"id":"ApiPermission.Test.MatbakhVcStackPublicApiC89DF633.POST..vc.start","path":"MatbakhVcStack/PublicApi/Default/vc/start/POST/ApiPermission.Test.MatbakhVcStackPublicApiC89DF633.POST..vc.start","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["VcStartFnC5BAD875","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-central-1:055062860590:",{"Ref":"PublicApiC8293BC5"},"/test-invoke-stage/POST/vc/start"]]}}}},"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Default/vc/start/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:eu-central-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["VcStartFnC5BAD875","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"PublicApivcstart14D2DB51"},"restApiId":{"Ref":"PublicApiC8293BC5"}}}}}}}},"confirm":{"id":"confirm","path":"MatbakhVcStack/PublicApi/Default/vc/confirm","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Default/vc/confirm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"PublicApivcBF018C5C"},"pathPart":"confirm","restApiId":{"Ref":"PublicApiC8293BC5"}}}},"OPTIONS":{"id":"OPTIONS","path":"MatbakhVcStack/PublicApi/Default/vc/confirm/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Default/vc/confirm/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"PublicApivcconfirm51F45E3E"},"restApiId":{"Ref":"PublicApiC8293BC5"}}}}}},"GET":{"id":"GET","path":"MatbakhVcStack/PublicApi/Default/vc/confirm/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.211.0","metadata":[]},"children":{"ApiPermission.MatbakhVcStackPublicApiC89DF633.GET..vc.confirm":{"id":"ApiPermission.MatbakhVcStackPublicApiC89DF633.GET..vc.confirm","path":"MatbakhVcStack/PublicApi/Default/vc/confirm/GET/ApiPermission.MatbakhVcStackPublicApiC89DF633.GET..vc.confirm","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["VcConfirmFnBC142FAD","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-central-1:055062860590:",{"Ref":"PublicApiC8293BC5"},"/",{"Ref":"PublicApiDeploymentStageprod67D5A370"},"/GET/vc/confirm"]]}}}},"ApiPermission.Test.MatbakhVcStackPublicApiC89DF633.GET..vc.confirm":{"id":"ApiPermission.Test.MatbakhVcStackPublicApiC89DF633.GET..vc.confirm","path":"MatbakhVcStack/PublicApi/Default/vc/confirm/GET/ApiPermission.Test.MatbakhVcStackPublicApiC89DF633.GET..vc.confirm","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["VcConfirmFnBC142FAD","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-central-1:055062860590:",{"Ref":"PublicApiC8293BC5"},"/test-invoke-stage/GET/vc/confirm"]]}}}},"Resource":{"id":"Resource","path":"MatbakhVcStack/PublicApi/Default/vc/confirm/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:eu-central-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["VcConfirmFnBC142FAD","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"PublicApivcconfirm51F45E3E"},"restApiId":{"Ref":"PublicApiC8293BC5"}}}}}}}}}}}}}},"WebBucketName":{"id":"WebBucketName","path":"MatbakhVcStack/WebBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"CloudFrontDomain":{"id":"CloudFrontDomain","path":"MatbakhVcStack/CloudFrontDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"ApiUrl":{"id":"ApiUrl","path":"MatbakhVcStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"DdbTableName":{"id":"DdbTableName","path":"MatbakhVcStack/DdbTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MatbakhVcStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"MatbakhVcStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.211.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MatbakhVcStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.211.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MatbakhVcStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.211.0"}}}},"SesEventsMonitorStack":{"id":"SesEventsMonitorStack","path":"SesEventsMonitorStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.211.0"},"children":{"SesEventsQueue":{"id":"SesEventsQueue","path":"SesEventsMonitorStack/SesEventsQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueueBase","version":"2.211.0","metadata":[]}},"SesEventsDlq":{"id":"SesEventsDlq","path":"SesEventsMonitorStack/SesEventsDlq","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueueBase","version":"2.211.0","metadata":[]}},"SesEventsWorker":{"id":"SesEventsWorker","path":"SesEventsMonitorStack/SesEventsWorker","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionBase","version":"2.211.0","metadata":[]}},"SesNotifyTopic":{"id":"SesNotifyTopic","path":"SesEventsMonitorStack/SesNotifyTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.TopicBase","version":"2.211.0","metadata":[]}},"SqsAgeAlarm":{"id":"SqsAgeAlarm","path":"SesEventsMonitorStack/SqsAgeAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SesEventsMonitorStack/SqsAgeAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"QueueName","value":"ses-events-queue"}],"evaluationPeriods":1,"metricName":"ApproximateAgeOfOldestMessage","namespace":"AWS/SQS","period":300,"statistic":"Maximum","threshold":300}}}}},"WorkerErrorsAlarm":{"id":"WorkerErrorsAlarm","path":"SesEventsMonitorStack/WorkerErrorsAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.211.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SesEventsMonitorStack/WorkerErrorsAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Fn::Select":[6,{"Fn::Split":[":",{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":lambda:eu-central-1:055062860590:function:ses-events-worker"]]}]}]}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":1}}}}},"SesTopicArn":{"id":"SesTopicArn","path":"SesEventsMonitorStack/SesTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"SesEventsQueueArn":{"id":"SesEventsQueueArn","path":"SesEventsMonitorStack/SesEventsQueueArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"SesEventsDlqArn":{"id":"SesEventsDlqArn","path":"SesEventsMonitorStack/SesEventsDlqArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.211.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SesEventsMonitorStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"SesEventsMonitorStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.211.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SesEventsMonitorStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.211.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SesEventsMonitorStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.211.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}