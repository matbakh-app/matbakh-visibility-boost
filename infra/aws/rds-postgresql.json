{
  "RDSConfiguration": {
    "projectName": "matbakh.app",
    "region": "eu-central-1",
    "cluster": {
      "clusterIdentifier": "matbakh-prod",
      "engine": "aurora-postgresql",
      "engineVersion": "15.5",
      "engineMode": "provisioned",
      "databaseName": "matbakh_main",
      "masterUsername": "matbakh_admin",
      "masterUserPassword": {
        "secretsManagerSecretId": "matbakh/rds/master-password",
        "generateRandomPassword": true,
        "passwordLength": 32,
        "excludeCharacters": "\"@/\\"
      },
      "backupRetentionPeriod": 7,
      "preferredBackupWindow": "03:00-04:00",
      "preferredMaintenanceWindow": "sun:04:00-sun:05:00",
      "deletionProtection": true,
      "storageEncrypted": true,
      "kmsKeyId": "alias/aws/rds",
      "enableCloudwatchLogsExports": ["postgresql"],
      "enableIamDatabaseAuthentication": true,
      "enableHttpEndpoint": true,
      "tags": {
        "Name": "matbakh-prod-cluster",
        "Environment": "production",
        "Project": "matbakh-migration",
        "BackupRequired": "true",
        "DataClassification": "confidential"
      }
    },
    "instances": [
      {
        "instanceIdentifier": "matbakh-prod-writer",
        "instanceClass": "db.t4g.medium",
        "availabilityZone": "eu-central-1a",
        "publiclyAccessible": false,
        "autoMinorVersionUpgrade": true,
        "performanceInsightsEnabled": true,
        "performanceInsightsRetentionPeriod": 7,
        "monitoringInterval": 60,
        "monitoringRoleArn": "auto-create",
        "tags": {
          "Name": "matbakh-prod-writer",
          "Role": "writer"
        }
      },
      {
        "instanceIdentifier": "matbakh-prod-reader",
        "instanceClass": "db.t4g.medium",
        "availabilityZone": "eu-central-1b",
        "publiclyAccessible": false,
        "autoMinorVersionUpgrade": true,
        "performanceInsightsEnabled": true,
        "performanceInsightsRetentionPeriod": 7,
        "monitoringInterval": 60,
        "monitoringRoleArn": "auto-create",
        "tags": {
          "Name": "matbakh-prod-reader",
          "Role": "reader"
        }
      }
    ],
    "subnetGroup": {
      "name": "matbakh-db-subnet-group",
      "description": "Subnet group for matbakh RDS cluster",
      "subnetIds": ["matbakh-db-1a", "matbakh-db-1b", "matbakh-db-1c"],
      "tags": {
        "Name": "matbakh-db-subnet-group"
      }
    },
    "parameterGroup": {
      "cluster": {
        "name": "matbakh-cluster-pg",
        "family": "aurora-postgresql15",
        "description": "Custom parameter group for matbakh cluster",
        "parameters": [
          {
            "name": "shared_preload_libraries",
            "value": "pg_stat_statements,pg_hint_plan"
          },
          {
            "name": "log_statement",
            "value": "all"
          },
          {
            "name": "log_min_duration_statement",
            "value": "1000"
          },
          {
            "name": "log_checkpoints",
            "value": "1"
          },
          {
            "name": "log_connections",
            "value": "1"
          },
          {
            "name": "log_disconnections",
            "value": "1"
          },
          {
            "name": "log_lock_waits",
            "value": "1"
          },
          {
            "name": "log_temp_files",
            "value": "0"
          },
          {
            "name": "track_activity_query_size",
            "value": "2048"
          },
          {
            "name": "pg_stat_statements.track",
            "value": "all"
          }
        ]
      },
      "instance": {
        "name": "matbakh-instance-pg",
        "family": "aurora-postgresql15",
        "description": "Custom parameter group for matbakh instances",
        "parameters": [
          {
            "name": "max_connections",
            "value": "200"
          },
          {
            "name": "work_mem",
            "value": "4096"
          },
          {
            "name": "maintenance_work_mem",
            "value": "65536"
          },
          {
            "name": "effective_cache_size",
            "value": "1048576"
          }
        ]
      }
    },
    "monitoring": {
      "enhancedMonitoring": {
        "enabled": true,
        "monitoringInterval": 60,
        "monitoringRoleArn": "auto-create"
      },
      "performanceInsights": {
        "enabled": true,
        "retentionPeriod": 7
      },
      "cloudWatchLogs": {
        "enabled": true,
        "logTypes": ["postgresql"]
      }
    },
    "security": {
      "vpcSecurityGroupIds": ["matbakh-rds-sg"],
      "iamDatabaseAuthenticationEnabled": true,
      "storageEncrypted": true,
      "kmsKeyId": "alias/aws/rds"
    },
    "backup": {
      "backupRetentionPeriod": 7,
      "preferredBackupWindow": "03:00-04:00",
      "copyTagsToSnapshot": true,
      "deletionProtection": true
    },
    "maintenance": {
      "preferredMaintenanceWindow": "sun:04:00-sun:05:00",
      "autoMinorVersionUpgrade": true,
      "allowMajorVersionUpgrade": false
    }
  },
  "SecretsManager": {
    "masterPassword": {
      "name": "matbakh/rds/master-password",
      "description": "Master password for matbakh RDS cluster",
      "generateSecretString": {
        "secretStringTemplate": "{\"username\": \"matbakh_admin\"}",
        "generateStringKey": "password",
        "excludeCharacters": "\"@/\\",
        "passwordLength": 32
      },
      "tags": {
        "Name": "matbakh-rds-master-password",
        "Environment": "production",
        "Project": "matbakh-migration"
      }
    },
    "applicationCredentials": {
      "name": "matbakh/rds/app-credentials",
      "description": "Application credentials for matbakh database access",
      "secretString": {
        "username": "matbakh_app",
        "password": "auto-generate",
        "engine": "postgres",
        "host": "auto-populate",
        "port": 5432,
        "dbname": "matbakh_main",
        "dbClusterIdentifier": "matbakh-prod"
      },
      "tags": {
        "Name": "matbakh-rds-app-credentials",
        "Environment": "production",
        "Project": "matbakh-migration"
      }
    }
  }
}