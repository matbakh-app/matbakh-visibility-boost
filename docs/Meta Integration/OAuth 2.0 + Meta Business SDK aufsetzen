> matbakh.app-Agenten (Ã¼ber Bedrock / AGP) sollen in Zukunft Meta Business Suite-Profile (Facebook & Instagram Business Accounts) der Restaurants lesen, bearbeiten und steuern,
> 
> 
> sofern:
> 
> 1. du Metaâ€™s **Graph API + Marketing API + Business Account API** korrekt integrierst,
> 2. der Nutzer **explizit authentifiziert und zustimmt** (OAuth 2.0 Login with Facebook),
> 3. dein System **die Tokens sicher verwaltet** (verschlÃ¼sselt, kurzlebig, refreshfÃ¤hig),
> 4. Aktionen **im Audit-Trail dokumentiert** und **genehmigungspflichtig** sind.

---

## âš™ï¸ Technische Grundlage

### 1. **Authentifizierung & Berechtigungen**

- Du nutzt **Meta OAuth 2.0** Login-Flow
    
    â†’ Nutzer meldet sich mit Facebook / Instagram Business Account an
    
    â†’ du erhÃ¤ltst ein temporÃ¤res `access_token` + `page_access_token` + `business_id`.
    

**Scopes**, die nÃ¶tig wÃ¤ren:

```
pages_show_list
pages_manage_metadata
pages_manage_posts
business_management
instagram_basic
instagram_manage_insights
instagram_manage_comments

```

Diese Scopes erlauben:

- Zugriff auf Seiteninformationen (Name, Ã–ffnungszeiten, Impressum, Profilbild)
- Bearbeiten von Unternehmensinfos
- Posten, Planen und LÃ¶schen von BeitrÃ¤gen
- Auslesen von Insights (Reichweite, Engagement, Ads)
- Verwalten von Kommentaren / Nachrichten (optional)

---

### 2. **Integration Ã¼ber Agent Gateway Protocol (AGP)**

Sobald Bedrock-AGP aktiv ist, kannst du Meta-Steuerung als eigenen **AGP-Intent** definieren:

| Intent | Beschreibung | Beispiel |
| --- | --- | --- |
| `meta.profile.update` | Profil-Infos aktualisieren (z. B. Ã–ffnungszeiten, Beschreibung) | â€Update Instagram bio text for @alshamrestaurantâ€œ |
| `meta.post.create` | Beitrag verÃ¶ffentlichen oder planen | â€Post daily special photo tomorrow 11 amâ€œ |
| `meta.comment.reply` | Kommentarverwaltung | â€Reply to positive reviews with thanks messageâ€œ |
| `meta.analytics.fetch` | Insights abrufen | â€Get last weekâ€™s reach and engagementâ€œ |

Der Agent (z. B. Kiro â†’ Bedrock â†’ Meta Gateway) sendet Requests via Meta Graph API,

das Audit-System dokumentiert jeden API-Call mit Request-Hash und Response-Digest.

---

### 3. **Rollen & Sicherheit**

Damit keine unkontrollierten Ã„nderungen passieren:

- **Role-Based Access Control (RBAC)** pro Restaurant:
    
    â†’ nur Besitzer oder autorisierte Manager dÃ¼rfen Agentenaktionen freigeben.
    
- **AI Operations Audit Trail** loggt:
    - Wer? (User / Agent ID)
    - Wann?
    - Was? (Intent + Parameter)
    - Ergebnis (Success / Fail)
- **Approval Layer**: bevor der Agent Ã„nderungen schreibt, kann er ein â€Previewâ€œ im Dashboard anzeigen:
    
    *â€Will you approve this change to your Instagram bio?â€œ* â†’ [Approve] / [Reject].
    

---

### 4. **Datenschutz & DSGVO**

- Tokens verschlÃ¼sselt speichern (KMS + Rotation alle 90 Tage)
- Nur minimal erforderliche Daten abrufen (â€data minimizationâ€œ)
- Jeder Zugriff wird protokolliert (siehe `ai-operations-audit-trail-system.md`)
- MÃ¶glichkeit zum **Revoke Access** direkt im Nutzer-Dashboard
- Transparente Einwilligung im Login-Dialog (â€matbakh.app may manage your business page content on your behalfâ€œ)

---

### 5. **Beispiel-Architektur**

```
User Login â†’ OAuth 2.0 Meta â†’ matbakh.auth-service
        â†“
Kiro CLI / Dashboard â†’ Bedrock Orchestrator
        â†“
AGP Intent: meta.profile.update
        â†“
Meta Graph API â†’ Business Suite Endpoint
        â†“
AI Operations Audit Trail â†’ S3 / RDS (Storage)

```

---

## ğŸ“… Empfohlener Zeitplan

| Phase | Zeitpunkt | Ziel |
| --- | --- | --- |
| **Nach Bedrock-StabilitÃ¤t (T+4 Wochen)** | OAuth-Integration & Meta SDK-Setup | Login / Token-Handling |
| **Vor Gemini-Aktivierung** | Agent-Intents `meta.profile.*` implementieren | geprÃ¼fter API-Zugriff |
| **Nach Gemini** | Context-basierte Automatisierung (z. B. â€verbessere mein Profiltext basierend auf Bewertungenâ€œ) | AI-optimierte Content-Steuerung |

---

## ğŸ§  Fazit

- âœ… *Ja*, technisch ist es mÃ¶glich und sinnvoll.
- âš™ï¸ Bedingung: OAuth 2.0 + Graph API-Integration + RBAC + Audit-Trail.
- ğŸ” Empfehlung: erst nach Bedrock-StabilitÃ¤t, **vor** oder **parallel mit Gemini**,
    
    damit deine AI-Agents den Content bereits kontrolliert beeinflussen kÃ¶nnen.