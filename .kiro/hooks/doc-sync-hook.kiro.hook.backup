{
  "enabled": true,
  "name": "Documentation Synchronization Hook",
  "description": "Synchronizes project documentation after every completed task. Automatically updates key files in /docs, appends changes to the release guidance, and ensures audit compliance.",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "docs/release-guidance.md",
      "docs/task-*-completion-report.md",
      "docs/architecture-decisions.md",
      "docs/personas.md",
      "docs/performance.md",
      "docs/ai-provider-architektur.md",
      "docs/multi-region.md",
      "docs/support.md",
      "src/components/personas/**/*.tsx",
      "src/lib/ai-orchestrator/**/*.ts",
      "src/lib/performance/**/*.ts",
      "infra/**/*.ts",
      "__tests__/**/*.test.ts"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "A task has been completed or documentation has been updated. Please:\n\n1. **Update Release Guidance** (docs/release-guidance.md):\n   - Add new features, fixes, and hardening steps with timestamp and commit hash\n   - Include performance metrics and service impacts\n   - Update SLO targets and monitoring requirements\n\n2. **Update Master Documents by Area**:\n   - **Persona System** (docs/personas.md): If persona components changed\n   - **Performance & Caching** (docs/performance.md): If tests, benchmarks, or hardening occurred\n   - **AI & Routing Architecture** (docs/ai-provider-architektur.md): If routing logic or LLM adapters changed\n   - **Multi-Region & Failover** (docs/multi-region.md): If DR tests or load tests ran\n   - **Self-Service & Support** (docs/support.md): If new support processes, FAQ, or onboarding changed\n   - **Architecture Decisions** (docs/architecture-decisions.md): If new features, migrations, or refactors occurred\n\n3. **Generate Release Entry**:\n   - Create structured entry with: timestamp, task ID, affected services, results summary\n   - Include performance impact and any breaking changes\n   - Add audit trail information if ENABLE_AUDIT_DOC_MODE=true\n\n4. **Cross-Area Impact Analysis**:\n   - Identify if multiple areas are affected by the changes\n   - Update all relevant documentation files\n   - Ensure consistency across related documents\n\n5. **Audit Trail Support** (if ENABLE_AUDIT_DOC_MODE=true):\n   - Create hash-versioned documentation in .audit/ folder\n   - Store change history with timestamp, author, taskId\n   - Prepare audit dashboard reporting data\n\nPlease analyze the changed files and update the appropriate documentation sections. Focus on maintaining audit compliance and ensuring all stakeholders have current information about system changes."
  }
}