
import { createRoot } from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import { HelmetProvider } from 'react-helmet-async';
import { SimpleAuthProvider } from '@/contexts/SimpleAuthContext'; 
import '@/lib/i18n';
import App from './App.tsx';
import { I18nProvider } from '@/contexts/i18nContext';
import './index.css';
import { clearExpiredData } from './utils/localStorage';

// AWS Amplify Configuration - TEMPORARILY DISABLED
// Using passwordless auth via Lambda instead
// import { configureAmplify } from './auth/AmplifyConfig';

// Configure Amplify before app initialization
// try {
//   configureAmplify();
//   console.log('‚úÖ AWS Amplify configured successfully');
// } catch (error) {
//   console.error('‚ùå Failed to configure AWS Amplify:', error);
//   // Continue with app initialization even if Amplify fails
// }

console.log('üîê Using passwordless auth via AWS Lambda endpoints');

// Clear expired localStorage data on app load
clearExpiredData();

createRoot(document.getElementById("root")!).render(
  <HelmetProvider>
    <BrowserRouter>
      <SimpleAuthProvider>
        <I18nProvider>
          <App />
        </I18nProvider>
      </SimpleAuthProvider>
    </BrowserRouter>
  </HelmetProvider>
);
