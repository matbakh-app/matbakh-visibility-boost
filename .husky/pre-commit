#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit legacy validation..."

# Run ESLint legacy rules check
echo "ğŸ“‹ Checking for legacy service imports..."
npx eslint . --max-warnings 0

# Run legacy scanner on staged files
echo "ğŸ” Scanning staged files for legacy patterns..."
npx tsx scripts/cleanup-2/legacy-scanner.ts --staged-only

# Run core tests to ensure nothing is broken
echo "ğŸ§ª Running core tests..."
npm run test:suite:core

echo "âœ… Pre-commit validation completed successfully!"
