#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "🔍 Running pre-commit legacy validation..."

# Run ESLint legacy rules check
echo "📋 Checking for legacy service imports..."
npx eslint . --max-warnings 0

# Run legacy scanner on staged files
echo "🔍 Scanning staged files for legacy patterns..."
npx tsx scripts/cleanup-2/legacy-scanner.ts --staged-only

# Run core tests to ensure nothing is broken
echo "🧪 Running core tests..."
npm run test:suite:core

echo "✅ Pre-commit validation completed successfully!"
