{
  "environment_templates": {
    "development": {
      "description": "Development environment configuration for local development and testing",
      "required_variables": {
        "VITE_AWS_REGION": {
          "value": "eu-central-1",
          "description": "AWS region for all services",
          "type": "string",
          "required": true
        },
        "VITE_COGNITO_USER_POOL_ID": {
          "value": "eu-central-1_DEV_POOL",
          "description": "Cognito User Pool ID for development",
          "type": "string",
          "required": true,
          "example": "eu-central-1_AbCdEfGhI"
        },
        "VITE_COGNITO_USER_POOL_WEB_CLIENT_ID": {
          "value": "dev-client-id",
          "description": "Cognito App Client ID for web application",
          "type": "string",
          "required": true,
          "example": "1a2b3c4d5e6f7g8h9i0j1k2l3m"
        },
        "VITE_API_BASE_URL": {
          "value": "https://dev-api.matbakh.app",
          "description": "Base URL for API Gateway endpoints",
          "type": "string",
          "required": true,
          "example": "https://abcdef123.execute-api.eu-central-1.amazonaws.com/dev"
        },
        "VITE_ENVIRONMENT": {
          "value": "development",
          "description": "Current environment identifier",
          "type": "string",
          "required": true,
          "options": [
            "development",
            "staging",
            "production"
          ]
        }
      },
      "optional_variables": {
        "VITE_COGNITO_DOMAIN": {
          "value": "",
          "description": "Cognito Hosted UI domain (if using hosted UI)",
          "type": "string",
          "required": false,
          "example": "matbakh-dev.auth.eu-central-1.amazoncognito.com"
        },
        "VITE_OAUTH_REDIRECT_SIGNIN": {
          "value": "http://localhost:5173/auth/callback",
          "description": "OAuth redirect URL for sign in",
          "type": "string",
          "required": false
        },
        "VITE_OAUTH_REDIRECT_SIGNOUT": {
          "value": "http://localhost:5173/",
          "description": "OAuth redirect URL for sign out",
          "type": "string",
          "required": false
        },
        "VITE_ENABLE_MFA": {
          "value": "false",
          "description": "Enable Multi-Factor Authentication",
          "type": "boolean",
          "required": false
        },
        "VITE_ENABLE_SOCIAL_PROVIDERS": {
          "value": "false",
          "description": "Enable social login providers (Google, Facebook)",
          "type": "boolean",
          "required": false
        },
        "VITE_DEBUG_AUTH": {
          "value": "true",
          "description": "Enable authentication debugging logs",
          "type": "boolean",
          "required": false
        }
      }
    },
    "staging": {
      "description": "Staging environment configuration for pre-production testing",
      "required_variables": {
        "VITE_AWS_REGION": {
          "value": "eu-central-1",
          "description": "AWS region for all services",
          "type": "string",
          "required": true
        },
        "VITE_COGNITO_USER_POOL_ID": {
          "value": "eu-central-1_STAGING_POOL",
          "description": "Cognito User Pool ID for staging",
          "type": "string",
          "required": true
        },
        "VITE_COGNITO_USER_POOL_WEB_CLIENT_ID": {
          "value": "staging-client-id",
          "description": "Cognito App Client ID for staging web application",
          "type": "string",
          "required": true
        },
        "VITE_API_BASE_URL": {
          "value": "https://staging-api.matbakh.app",
          "description": "Base URL for staging API Gateway endpoints",
          "type": "string",
          "required": true
        },
        "VITE_ENVIRONMENT": {
          "value": "staging",
          "description": "Current environment identifier",
          "type": "string",
          "required": true
        }
      },
      "optional_variables": {
        "VITE_COGNITO_DOMAIN": {
          "value": "matbakh-staging.auth.eu-central-1.amazoncognito.com",
          "description": "Cognito Hosted UI domain for staging",
          "type": "string",
          "required": false
        },
        "VITE_OAUTH_REDIRECT_SIGNIN": {
          "value": "https://staging.matbakh.app/auth/callback",
          "description": "OAuth redirect URL for sign in",
          "type": "string",
          "required": false
        },
        "VITE_OAUTH_REDIRECT_SIGNOUT": {
          "value": "https://staging.matbakh.app/",
          "description": "OAuth redirect URL for sign out",
          "type": "string",
          "required": false
        },
        "VITE_ENABLE_MFA": {
          "value": "true",
          "description": "Enable Multi-Factor Authentication",
          "type": "boolean",
          "required": false
        },
        "VITE_ENABLE_SOCIAL_PROVIDERS": {
          "value": "true",
          "description": "Enable social login providers",
          "type": "boolean",
          "required": false
        },
        "VITE_DEBUG_AUTH": {
          "value": "false",
          "description": "Disable authentication debugging in staging",
          "type": "boolean",
          "required": false
        }
      }
    },
    "production": {
      "description": "Production environment configuration",
      "required_variables": {
        "VITE_AWS_REGION": {
          "value": "eu-central-1",
          "description": "AWS region for all services",
          "type": "string",
          "required": true
        },
        "VITE_COGNITO_USER_POOL_ID": {
          "value": "eu-central-1_PROD_POOL",
          "description": "Cognito User Pool ID for production",
          "type": "string",
          "required": true,
          "sensitive": true
        },
        "VITE_COGNITO_USER_POOL_WEB_CLIENT_ID": {
          "value": "prod-client-id",
          "description": "Cognito App Client ID for production web application",
          "type": "string",
          "required": true,
          "sensitive": true
        },
        "VITE_API_BASE_URL": {
          "value": "https://api.matbakh.app",
          "description": "Base URL for production API Gateway endpoints",
          "type": "string",
          "required": true
        },
        "VITE_ENVIRONMENT": {
          "value": "production",
          "description": "Current environment identifier",
          "type": "string",
          "required": true
        }
      },
      "optional_variables": {
        "VITE_COGNITO_DOMAIN": {
          "value": "auth.matbakh.app",
          "description": "Custom Cognito domain for production",
          "type": "string",
          "required": false
        },
        "VITE_OAUTH_REDIRECT_SIGNIN": {
          "value": "https://matbakh.app/auth/callback",
          "description": "OAuth redirect URL for sign in",
          "type": "string",
          "required": false
        },
        "VITE_OAUTH_REDIRECT_SIGNOUT": {
          "value": "https://matbakh.app/",
          "description": "OAuth redirect URL for sign out",
          "type": "string",
          "required": false
        },
        "VITE_ENABLE_MFA": {
          "value": "true",
          "description": "Enable Multi-Factor Authentication for production",
          "type": "boolean",
          "required": false
        },
        "VITE_ENABLE_SOCIAL_PROVIDERS": {
          "value": "true",
          "description": "Enable social login providers in production",
          "type": "boolean",
          "required": false
        },
        "VITE_DEBUG_AUTH": {
          "value": "false",
          "description": "Disable authentication debugging in production",
          "type": "boolean",
          "required": false
        },
        "VITE_SENTRY_DSN": {
          "value": "",
          "description": "Sentry DSN for error tracking in production",
          "type": "string",
          "required": false,
          "sensitive": true
        }
      }
    }
  },
  "amplify_configuration": {
    "description": "AWS Amplify configuration object structure",
    "template": {
      "Auth": {
        "region": "${VITE_AWS_REGION}",
        "userPoolId": "${VITE_COGNITO_USER_POOL_ID}",
        "userPoolWebClientId": "${VITE_COGNITO_USER_POOL_WEB_CLIENT_ID}",
        "mandatorySignIn": true,
        "authenticationFlowType": "USER_SRP_AUTH",
        "cookieStorage": {
          "domain": "conditional_based_on_environment",
          "path": "/",
          "expires": 30,
          "secure": "conditional_based_on_environment",
          "sameSite": "strict"
        },
        "oauth": {
          "domain": "${VITE_COGNITO_DOMAIN}",
          "scope": [
            "email",
            "profile",
            "openid",
            "aws.cognito.signin.user.admin"
          ],
          "redirectSignIn": "${VITE_OAUTH_REDIRECT_SIGNIN}",
          "redirectSignOut": "${VITE_OAUTH_REDIRECT_SIGNOUT}",
          "responseType": "code"
        }
      },
      "API": {
        "endpoints": [
          {
            "name": "matbakhAPI",
            "endpoint": "${VITE_API_BASE_URL}",
            "region": "${VITE_AWS_REGION}",
            "custom_header": "async () => ({ Authorization: `Bearer ${(await Auth.currentSession()).getAccessToken().getJwtToken()}` })"
          }
        ]
      }
    }
  },
  "validation_rules": {
    "VITE_AWS_REGION": {
      "pattern": "^[a-z]{2}-[a-z]+-[0-9]$",
      "example": "eu-central-1"
    },
    "VITE_COGNITO_USER_POOL_ID": {
      "pattern": "^[a-z]{2}-[a-z]+-[0-9]_[A-Za-z0-9]+$",
      "example": "eu-central-1_AbCdEfGhI"
    },
    "VITE_COGNITO_USER_POOL_WEB_CLIENT_ID": {
      "pattern": "^[a-z0-9]{26}$",
      "example": "1a2b3c4d5e6f7g8h9i0j1k2l3m"
    },
    "VITE_API_BASE_URL": {
      "pattern": "^https://[a-zA-Z0-9.-]+(/[a-zA-Z0-9.-]*)?$",
      "example": "https://api.matbakh.app"
    }
  },
  "setup_instructions": {
    "steps": [
      {
        "step": 1,
        "description": "Copy the appropriate environment template to .env.local",
        "command": "cp .env.template.development .env.local"
      },
      {
        "step": 2,
        "description": "Replace placeholder values with actual AWS resource IDs",
        "note": "Get values from AWS Console or deployment outputs"
      },
      {
        "step": 3,
        "description": "Validate environment variables",
        "command": "npm run validate:env"
      },
      {
        "step": 4,
        "description": "Test authentication configuration",
        "command": "npm run test:auth"
      }
    ],
    "security_notes": [
      "Never commit .env files containing sensitive values to version control",
      "Use different User Pool IDs for each environment",
      "Rotate client secrets regularly in production",
      "Enable MFA for admin users in production",
      "Monitor authentication logs for suspicious activity"
    ]
  }
}